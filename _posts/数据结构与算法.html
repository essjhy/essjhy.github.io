<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>Python学习笔记</title>
</head>
<body>
<h1 id='数据结构与算法'>数据结构与算法</h1>
<h2 id='线性结构linear-structure'>线性结构Linear Structure</h2>
<p><strong>线性结构是一种有序的数据项的集合，其中每个数据项都有唯一的前驱和后继</strong></p>
<p>新的数据项加入到数据集中，只会加入到原有数据项之前和之后。具有这种性质的数据集被称为线性结构</p>
<p><strong>线性结构总有两端，在不同的情况下，两端的称呼也不相同</strong></p>
<p><strong>两端的称呼不是关键，不同线性结构的关键区别在于数据项增减的方式</strong></p>
<p>有的结构只允许数据项从一端添加/移除，而有的结构则允许数据项从两端移除</p>
<p><strong>栈Stack、队列Queue、双端队列Deque、列表List</strong></p>
<p>它们的共同点在于数据项之间只存在先后的次序关系，都属于线性结构</p>
<h3 id='栈stack'>栈Stack</h3>
<p>栈是一种有次序的数据项集合，在栈中，数据项的加入和移除都仅发生在同一端</p>
<p>能操作的一端被称为栈“顶top”，不能操作的一端被称为栈“底base”</p>
<h4 id='数据特征-1'><strong>数据特征</strong></h4>
<p>距离栈底越近的数据项，留在栈中的时间就越长</p>
<p>LIFO：后进先出，Last in First out，进栈和出栈的次序正好相反</p>
<p>能够简易的完成反转次序：如浏览器后退back按钮、word的undo按钮（撤销最近完成的操作）</p>
<h4 id='栈stack的操作'>栈Stack的操作</h4>
<p>抽象数据类型栈定义为如下操作</p>
<pre><code class='language-python' lang='python'>Stack()   #创建一个空栈
push(item)#将item加入栈顶，无返回值
pop()     #将栈顶数据项移除并返回，栈被修改
peek()    #&quot;窥视&quot;栈顶数据项，返回栈顶数据项但不移除
isEmpty() #返回栈是否为空栈
size()    #返回栈中有多少个数据项
</code></pre>
<h4 id='用python实现adt-stack'><strong>用python实现ADT Stack</strong></h4>
<p>注意此处取了list的尾端为栈顶，以保证push和pop单个元素的操作为O(1)</p>
<pre><code class='language-python' lang='python'>class Stack:
    def __init__(self):self.items = []
    def isEmpty(self):return self.items == []
    def push(self,item):self.items.append(item)
    def pop(self):return self.items.pop()
    def peek(self):return self.items[-1]
    def size(self):return len(self.items)

# from pythonds.basic.stack import Stack
</code></pre>
<h4 id='栈示例十进制转换为二进制'>栈示例：十进制转换为二进制</h4>
<p><strong>十进制转化为二进制</strong></p>
<pre><code class='language-python' lang='python'>from pythonds.basic.stack import Stack


def divideBy2(decNumber):
    remstack = Stack()

    while decNumber &gt; 0:
        rem = decNumber % 2
        remstack.push(rem)
        decNumber = decnumber // 2

    binString = &#39;&#39;
    while not remstack.isEmpty():
        binString = binString + str(remstack.pop())

    return binString


print(divideBy2(42))
</code></pre>
<p><strong>十进制转换为十六以下任意进制</strong></p>
<pre><code class='language-python' lang='python'>from pythonds.basic.stack import Stack


def baseConverter(decNumber, base):
    digits = &#39;0123456789ABCDEF&#39;

    remstack = Stack()

    while decNumber &gt; 0:
        rem = decNumber % base
        remstack.push(rem)
        decNumber = decNumber // base

    newString = &#39;&#39;
    while not remstack.isEmpty():
        newString = newString + digits[remstack.pop()]

    return newString


print(baseConverter(25, 2))
print(baseConverter(25, 16))
</code></pre>
<h4 id='栈示例中缀转后缀算法'>栈示例：中缀转后缀算法</h4>
<p>以中缀表达式<strong>A+B*C</strong>为例，其后缀表达式为<strong>ABC*+</strong></p>
<p>操作数ABC没有改变顺序</p>
<p>操作符的出现顺序在后缀表达式中反转了</p>
<p>由于*的优先级比+高，所以后缀表达式中操作符的出现顺序与运算次序一致</p>
<p><strong>在中缀表达式转换为后缀形式的处理过程中，操作符比操作数要晚输出</strong></p>
<p>所以在扫描到对应的第二个操作数之前，需要把操作符先保存起来</p>
<p><strong>而这些暂存的操作符，由于优先级的规则，还有可能要反转次序输出</strong></p>
<p>这种反转特性，使得我们考虑用栈来保存暂时未处理的操作符</p>
<p>再看看带括号的<strong>(A+B)*C</strong>，对应的后缀形式是<strong>AB+C*</strong></p>
<p>括号使得其中的运算符优先级提升了，所以遇到左括号时，要标记下，其后出现的操作符优先级提升了，一旦扫描到对应的右括号，就可以马上输出这个操作符</p>
<p><strong>总结算法：</strong></p>
<p>在从左到右扫描逐个字符扫描中缀表达式的过程中，采用一个栈来暂存未处理的操作符</p>
<p>这样，栈顶的操作符就是最近暂存进去的，当遇到一个新的操作符，就需要和栈顶的操作符比较下优先级，再行处理</p>
<p><strong>约定：</strong></p>
<p>opstack：暂存操作符</p>
<p>postfixLIst：保存后缀表达式</p>
<p>中缀表达式由空格隔开的一系列单词（token）组成</p>
<p><strong>算法实现：</strong></p>
<p>从左到右扫描中缀表达式单词列表</p>
<p>如果单词是操作数，则直接添加到后缀表达式列表的末尾</p>
<p>如果单词是左括号，则压入opstack栈顶</p>
<p>如果单词是右括号，则反复弹出opstack栈顶操作符，加入到输出列表末尾，直到碰到左括号</p>
<p>如果单词是操作符，则压入opstack栈顶（压入时要反复弹出栈顶操作符，直到栈顶的操作符优先级低于它）</p>
<p>中缀表达式单词列表扫描结束后，把opstack栈中所有剩余操作符依次弹出，添加到输出列表末尾</p>
<pre><code class='language-python' lang='python'>from pythonds.basic.stack import Stack


def infixToPostfix(infixexpr):
    prec = {}
    prec[&#39;*&#39;] = 3
    prec[&#39;/&#39;] = 3
    prec[&#39;+&#39;] = 2
    prec[&#39;-&#39;] = 2
    prec[&#39;(&#39;] = 1
    opStack = Stack()
    postfixList = []
    tokenList = infixexpr.split()

    for token in tokenList:
        if token in &#39;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#39; or token in &#39;0123456789&#39;:
            postfixList.append(token)
        elif token == &#39;(&#39;:
            opStack.push(token)
        elif token == &#39;)&#39;:
            topToken = opStack.pop()
            while topToken != &#39;(&#39;:
                postfixList.append(topToken)
                topToken = opStack.pop()
        else:
            while (not opStack.isempty()) and \
            (prec[opStack.peek()] &gt;= prec[token]):
                postfixList.append(opStack.pop())
            opStack.push(token)
    while not opStack.isEmpty():
        postfixList.append(opStack.pop())
    return &#39; &#39;.join(postfixList)
</code></pre>
<h4 id='栈示例后缀表达式求值'>栈示例：后缀表达式求值</h4>
<p>由于操作符在操作数后面，所以要暂存操作数，在碰到操作符的时候，再将暂存的两个操作数进行运算</p>
<p>依然利用栈的特性：操作符只作用于离它最近的两个操作数</p>
<p>（对于-/运算，要注意先弹出的是右操作数）</p>
<pre><code class='language-python' lang='python'>from pythonds.basic.stack import Stack


def postfixEval(postfixExpr):
    operandStack = Stack()
    tokenList = postfixExpr.split()

    for token in tokenList:
        if token in &#39;0123456789&#39;:
            operandStack.push(int(token))
        else:
            operand2 = operandStack.pop()
            operand1 = operandStack.pop()
            result = doMath(token, operand1, operand2)
            operandStack.push(result)
    return operandStack.pop()


def doMath(op, op1, op2):
    if op == &#39;*&#39;:
        return op1 * op2
    elif op == &#39;/&#39;:
        return op1 / op2
    elif op == &#39;+&#39;:
        return op1 + op2
    elif op == &#39;-&#39;:
        return op1 - op2
</code></pre>
<h3 id='队列queue'>队列Queue</h3>
<p>队列是一种有次序的数据集合，其特征是：新数据项添加总发生在一端（尾端rear），现存数据项的移除总发生在另一端（首端front）</p>
<h4 id='数据特征-2'>数据特征</h4>
<p>FIFO：first in first out 先进先出</p>
<p>是一个有次序的数据集合</p>
<h4 id='队列queue的操作'>队列Queue的操作</h4>
<pre><code class='language-python' lang='python'>enqueue() #在队尾加入数据项
dequeue() #移除队首的数据项
size()    #返回队列的长度
isEmpty() #返回队列是否为空
</code></pre>
<h4 id='用python实现adt-queue'>用python实现ADT Queue</h4>
<p>将List首端作为队列尾端，末端作为队列首端。则enqueue()复杂度为O(n)，dequeue()复杂度为O(1)</p>
<p>若将List首端作为队列首端，末端作为队列尾端，则操作复杂度相反</p>
<pre><code class='language-python' lang='python'>class Queue:
    def __init__(self):self.items = []
    def isEmpty(self):return self.items == []
    def enqueue(self,item):self.items.insert(0,item)
    def dequeue(self):return self.items.pop()
    def size(self):return len(self.items)

#from pythonds.basic.queue import Queue
</code></pre>
<h4 id='队列示例约瑟夫问题热土豆问题）'>队列示例：约瑟夫问题（热土豆问题）</h4>
<p>模拟程序采用队列来存放所有参加游戏的人名，按照传递土豆方向从队首排到队尾（默认队首的人持有土豆）</p>
<p>模拟游戏开始，只需将队首的人出队，随即再到队尾入队，算是土豆的一次传递</p>
<p>传递了num次之后，将队首的人移除不再入队，如此反复直到队列中剩余一人</p>
<pre><code class='language-python' lang='python'>from pythonds.basic.queue import Queue

def hotPotato(namelist,num):
    simqueue = Queue()
    for nume in namelist:
        simqueue.enqueue(nume)

    while simqueue.size()&gt;1:
        for i in range(num):
            simqueue.enqueue(simqueue.dequeue())
        simqueue.dequeue()

    return simqueue.dequeue()

print(hotPotato([&#39;Bill&#39;,&#39;David&#39;,&#39;Susan&#39;,&#39;Jane&#39;,&#39;Kent&#39;,&#39;Brad&#39;],7))
</code></pre>
<h4 id='队列示例打印任务问题'>队列示例：打印任务问题</h4>
<p>多人共享同一台打印机，采取”先到先服务“的队列策略来执行打印任务</p>
<p>考虑：1）这种打印系统的容量有多大；2）在能够接受的等待时间内，系统能容纳多少用户以多高频率提交多少打印任务？</p>
<p>示例：</p>
<p>1）实验室内任意一小时内，大约有10名学生在场，在这一小时内，每人会发起2次左右的打印，每次1～20页</p>
<p>2）打印机性能：草稿模式（每分钟10页），正常模式（打印质量好，每分钟5页）</p>
<p>问题：怎样设定打印机和模式，让大家都不会等太久的前提下尽量提高打印质量？</p>
<p><strong>如何建模？（问题抽象化）</strong></p>
<p>对象：打印任务（提交时间、打印页数），打印队列的属性（FIFO），打印机的属性（打印速度、是否在工作）</p>
<p>过程：生成和提交打印任务（概率<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="3.395ex" height="2.773ex" role="img" focusable="false" viewBox="0 -864.9 1500.7 1225.5" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.816ex;"><defs><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-1-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-1-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mfrac"><g data-mml-node="mn" transform="translate(573.6,394) scale(0.707)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use></g><g data-mml-node="mn" transform="translate(220,-345) scale(0.707)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use><use data-c="38" xlink:href="#MJX-1-TEX-N-38" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(1000,0)"></use></g><rect width="1260.7" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container><script type="math/tex">\frac{1}{180}</script>每秒，打印页数1～20页等概率）</p>
<p>模拟时间：时间框架（秒为单位），同步所有过程（在一个时间单位里，对生成打印任务和实施打印两个过程各执行一次）</p>
<p><strong>模拟流程：</strong></p>
<p>创建打印队列对象</p>
<p>时间按照秒的单位流逝</p>
<p>——按照概率生成打印作业，加入打印队列</p>
<p>——如果打印机空闲，且队列不空，则取出队首作业打印，记录此作业等待时间（同时记录打印机状态&quot;忙&quot;）</p>
<p>——如果打印机忙，则按照打印速度以1秒进行打印</p>
<p>——如果当前作业打印完成，则打印机进入空闲</p>
<p>时间用尽，开始统计平均等待时间</p>
<p><strong>考虑变量</strong></p>
<p>作业的等待时间（生成作业时，记录生成的时间戳；开始打印时，当前时间减去生成时间即可）</p>
<p>作业的打印时间（生成作业时，记录作业的页数；开始打印时，页数除以打印速度即可）</p>
<pre><code class='language-python' lang='python'>class Queue:
    def __init__(self):self.items = []
    def isEmpty(self):return self.items == []
    def enqueue(self,item):self.items.insert(0,item)
    def dequeue(self):return self.items.pop()
    def size(self):return len(self.items)
import random

class Printer:
    def __init__(self,ppm):
        self.pagerate = ppm     #打印速度
        self.currentTask = None #打印任务
        self.timeRemaining = 0  #任务倒计时

    def tick(self):      #打印一秒
        if self.currentTask != None:
            self.timeRemaining = self.timeRemaining - 1
            if self.timeRemaining &lt;=0:
                self.currentTask = None

    def busy(self):      #是否打印忙
        if self.currentTask != None:return True
        else:return False

    def startNext(self,newtask): #打印新作业
        self.currentTask = newtask
        self.timeRemaining = newtask.getPages()*60/self.pagerate

class Task:
    def __init__(self,time):
        self.timestamp = time
        self.pages = random.randrange(1,21)

    def getStamp(self):
        return self.timestamp

    def getPages(self):
        return self.pages

    def waitTime(self,currenttime):
        return currenttime - self.timestamp

def newPrintTask():
    num = random.randrange(1,181)
    if num == 180:return True
    else:return False

def simulation(numSeconds,pagesPerMinute):#模拟
    labprinter = Printer(pagesPerMinute)
    printQueue = Queue()
    waitingtimes = []

    for currentSecond in range(numSeconds):
        if newPrintTask():
            task = Task(currentSecond)
            printQueue.enqueue(task)

        if (not labprinter.busy()) and (not printQueue.isEmpty()):
            nexttask = printQueue.dequeue()
            waitingtimes.append(nexttask.waitTime(currentSecond))
            labprinter.startNext(nexttask)

        labprinter.tick()

    averageWait=sum(waitingtimes)/len(waitingtimes)
    print(&quot;Average Wait %6.2f secs %3d tasks remaining.&quot;\
          %(averageWait,printQueue.size()))

for i in range(10):
    simulation(3600,5)
</code></pre>
<h3 id='列表list链表实现）'>列表List（链表实现）</h3>
<p>列表List是数据项能够维持相对位置的数据集</p>
<h4 id='无序表unorderedlist'>无序表UnorderedList</h4>
<p>是一种数据项按照其相对位置存放的数据集（数据项只按照存放位置来索引）</p>
<h4 id='无序表unorderedlist的操作'>无序表UnorderedList的操作</h4>
<pre><code class='language-python' lang='python'>List()           #创建一个空列表
add(item)         #添加一个数据项到列表中，假设item原本不存在于列表中
remove(item)      #从列表中移除item，列表被修改，item原本应存储于列表中
search(item)     #在列表中查找item，返回bool类型值
isEmpty()         #返回列表是否为空
size()            #返回列表包含了哪些数据项
append(item)     #添加一个数据项到末尾，假设item原先不存在于列表中
index(item)      #返回数据项在表中的位置
insert(pos,item) #将数据项插入到位置pos，假设item原先不存在于列表当中，同时原列表足够长使item能占据pos
pop()             #从列表末尾移除数据项，假设原列表具有至少一个数据项
pop(pos)          #移除位置为pos的数据项，假设原列表存在位置pos
</code></pre>
<h4 id='用python通过链表实现unorderedlist'>用python通过链表实现UnorderedList</h4>
<p>为了实现无序表数据结构，可以采用链接表的方案。</p>
<p>虽然列表数据结构要求保持数据项的前后相对位置，但这种前后位置的保持，并不要求数据项依次存放连续的存储空间。</p>
<p>在数据项之间建立连接指向，就可以保持其相对位置（对于链首和链尾需要特殊标记）</p>
<p><strong>节点node</strong>：每个节点至少要包含2个信息：数据项本身，以及指向下一个节点的引用信息（next为none指没有下一个节点了）</p>
<pre><code class='language-python' lang='python'>class Node:
    def __init__(self,initdata):
        self.data = initdata
        self.next = None

    def getData(self):
        return self.data

    def getNext(self):
        return self.next

    def setData(self,newdata):
        self.data = newdata

    def setNext(self,newnext):
        self.next = newnext
</code></pre>
<p>可以采取链接节点的方式创建数据集来实现无序表</p>
<p>其中，链表的第一个和最后一个节点最重要（访问无序表中对象必须通过第一个节点）</p>
<p>所以无序表必须要有对第一个节点的引用（第一个节点为none表示为空表，无序表的head始终指向链表中的第一个节点）</p>
<p>注意，无序表对象本身不包含数据项，数据项存在节点中</p>
<p><strong>add算法实现</strong>：由链表结构可知，添加数据项最快捷的位置是在表头（所有后续数据项都必须沿着next链逐项查找）<img src="img/截屏2022-03-17 上午8.27.00.png" referrerpolicy="no-referrer" alt="截屏2022-03-17 上午8.27.00"></p>
<p><strong>size算法实现</strong>：从链表头head开始遍历到表尾，同时用变量累加经过的数据个数</p>
<p><strong>search算法实现</strong>：从链表头head开始遍历到表尾，同时判断当前节点的数据项是否为目标</p>
<p><strong>remove算法实现</strong>：首先找到item，删除节点时，这时需要将前一个节点的next指向下一个节点，所以链表remove需要包含对于上一个节点的维护（需要区分删除第一个节点和其他节点）</p>
<pre><code class='language-python' lang='python'>class UnorderedList:
    def __init__(self):
        self.head = None

    def isEmpty(self):
        return self.head == None

    def add(self,item):
        temp = Node(item)
        temp.setNext(self.head)
        self.head = temp

    def size(self):
        current = self.head
        count = 0
        while current != None:
            count = count + 1
            current = current.getNext()
        return count

    def search(self,item):
        current = self.head
        found = False
        while current != None and not found:
            if current.getData() == item:
                found = True
            else:
                current = current.getNext()
        return found

    def remove(self,item):
        current = self.head
        previous = None
        found = False
        while not found:
            if current.getData() == item:
                found = True
            else:
                previous = current
                current = current.getNext()

        if previous == None:
            self.head = current.getNext()
        else:
            previous.setNext(current.getNext())
</code></pre>
<h4 id='有序表orderedlist'>有序表OrderedList</h4>
<p>有序表是一种数据项依照其可比性质（如整数大小、字母表先后）来决定在列表中的位置</p>
<p>越“小”的数据项越靠近表头，越“大”的数据项越靠近表尾</p>
<p>实现有序表时，数据的“大小”适应于所有定义了<code>__gt__</code>（即“&gt;”操作符）的数据类型</p>
<h4 id='有序表orderedlist的操作'>有序表OrderedList的操作</h4>
<pre><code class='language-python' lang='python'>orderedList()   #创建一个空的有序表
add(item)       #在表中添加一个数据项，并保持整体顺序
remove(item)    #从有序表中移除一个数据项，此项应存在，有序表被修改
search(item)    #在有序表中查找数据项，返回是否存在
isEmpty()       #是否为空表
size()          #返回表中数据项的个数
index(item)     #返回数据项在表中的位置，此项应存在
pop()           #移除有序表中最后一项，表中应至少存在一项
pop(pos)        #移除并返回有序表中指定位置的数据项，此位置应存在
</code></pre>
<h4 id='用python通过链表实现orderedlist'>用python通过链表实现OrderedList</h4>
<p>对于isEmpty/size/remove这些方法，与节点的次序无关，所以其实现跟UnorderedList是一样的，但search/add算法需稍作修改</p>
<p><strong>search算法</strong>：可以利用链表节点有序排列的属性，来为search节省不存在的数据项的查找时间。（但对存在的元素的search速度会变慢）</p>
<p><strong>add算法</strong>：add算法需要保持链表的有序性，需要找到第一个大于插入项的node，再将插入项插入当前节点（于是也需要previous的数据项保证对前序节点的维护）</p>
<pre><code class='language-python' lang='python'>class OrderedList(UnorderedList):
    def __init__(self):
        self.head = None

    def search(self,item):
        current = self.head
        found = False
        stop = False
        while current != None and not found and not stop:
            if current.get_data() == item:
                found = True
            else:
                if current.get_data() &gt; item:
                    stop = True
                else:
                    current = current.get_next()
        return found

    def add(self, item):
        current = self.head
        previous = None
        stop = False
        while current != None and not stop:
            if current.get_data() &gt; item:
                stop = True
            else:
                previous = current
                current = current.get_next()
        temp = Node(item)
        if previous == None:
            temp.set_next(self.head)
            self.head = temp
        else:
            temp.set_next(current)
            previous.set_next(temp)
</code></pre>
<h4 id='链表实现的算法分析'>链表实现的算法分析</h4>
<p>对于链表复杂度的分析，主要是看相应的方法是否涉及到到链表的遍历</p>
<p><code>isEmpty</code>和无序表的<code>add</code>算法是O(1)的，因为只涉及对表头head的维护</p>
<p><code>size/search/remove</code>和有序表的<code>add</code>算法是O(n)的，因为涉及到链表的遍历，其中size需必须要全部遍历，其余的操作按照概率平均将遍历n/2的节点</p>
<p>链表实现的List与python内置的列表数据类型，在某些相同方法的实现上时间复杂度不同，区别主要在python内置的列表数据类型是基于顺序存储来实现的，并进行了优化</p>
<h3 id='小结'>小结</h3>
<p><strong>线性结构Linear DS</strong>将数据项以某种线性的次序组织起来</p>
<p><strong>栈Stack</strong>维持了数据项后进先出LIFO的次序（push，pop，isEmpty）</p>
<p><strong>队列Queue</strong>维持了数据项先进先出FIFO的次序（enqueue，dequeue，isEmpty）</p>
<p><strong>书写表达式的方法有前缀prefix、中缀infix和后缀postfix三种</strong>：由于栈结构具有反转次序的特性，适合用于开发表达式求值和转换的算法</p>
<p><strong>“模拟系统“可以通过对一个现实世界问题进行抽象建模，并加入随机数动态进行，为复杂问题的决策提供各种情况的参考</strong>：队列可以用于进行模拟系统来开发</p>
<p><strong>双端队列Deque可以同时具备栈和队列的功能</strong>（addFront，addRear，removeFront，removeRear，isEmpty）</p>
<p><strong>列表List是数据项能维持相对位置的数据集</strong>：链表的实现，可以保持列表维持相对位置的特点，而不需要连续的存储空间。链表实现时，其各种方法，对链表表头都需要特别的处理。</p>
<h2 id='递归recursion'>递归Recursion</h2>
<p><strong>递归是一种解决问题的方法，其精髓在于</strong></p>
<p>将问题分解为<strong>规模更小的相同问题</strong>，持续分解直到问题规模小到可以用<strong>非常简单直接的方法</strong>来解决。</p>
<p>递归的问题分解方式非常独特，其算法方面的明显特征就是在算法流程中<strong>调用自身</strong>。</p>
<h3 id='基础递归'>基础递归</h3>
<h4 id='初识递归数列求和'>初识递归：数列求和</h4>
<p>给定一个列表，返回所有数的和（列表长度不确定，不允许用for等循环）</p>
<p>认识到求和实际上最终是由一次次的加法实现的，而加法有两个操作数，这是固定的。</p>
<p>需要将问题规模较大的列表求和分解为规模较小而且固定的两个数求和</p>
<p>用全括号表达式求数列求和，例如：(1+(3+(5+(7+9))))</p>
<p>观察重复模式，可以把求和问题归纳为：“数列”的和=“首个数”+“余下数列”的和</p>
<p><code>listSum(numList)=first(numList)+listSum(rest(numList))</code></p>
<p>数列包含的数小到只有一个时，数列的和即为这个数</p>
<pre><code class='language-python' lang='python'>def listsum(numList):
    if len(numList) == 1:
        return numList[0]
    else:
        return numList[0] + listsum(numList[1:])
print(listsum([1,3,5,7,9]))
</code></pre>
<h4 id='递归三定律'>递归“三定律”</h4>
<p>递归算法必须有一个基本结束条件（最小规模问题的直接解决）</p>
<p>递归算法必须能改变状态向基本结束条件演进（减小问题规模）</p>
<p>递归算法必须调用自身（解决减小了规模的相同问题）</p>
<h4 id='递归的应用任意进制转换'>递归的应用：任意进制转换</h4>
<p><strong>如果是十进制？</strong></p>
<p>十进制的十个不同符号：<code>convString = &#39;0123456789&#39;</code></p>
<p>比十小的整数，转换为十进制，直接查表即可：<code>convString[n]</code></p>
<p><strong>基本结束条件：小于10的整数</strong></p>
<p><strong>向基本结束条件演进：拆解整数</strong>（除以进制基<code>// base</code>和求进制基的余数<code>% base</code>）</p>
<p><strong>原问题分解为：</strong></p>
<p><strong>余数</strong>总小于“<strong>进制基base</strong>”，是“<strong>基本结束条件</strong>”，可以直接查表转换</p>
<p><strong>整数商</strong>成为“<strong>更小规模问题</strong>”，通过递归调用自身解决</p>
<pre><code class='language-python' lang='python'>def toStr(n,base):
    convertString = &#39;0123456789ABCDEF&#39;
    if n&lt;base:
        return convertString[n]
    else:
        return toStr(n//base,base)+convertString[n%base]
print(toStr(1453,16))
</code></pre>
<h4 id='递归调用的实现'>递归调用的实现</h4>
<p>当一个函数被调用的时候，系统会把调用时的<strong>现场数据</strong>压入<strong>系统调用栈</strong></p>
<p>每次调用，压入栈的现场数据被称为栈帧</p>
<p>当函数返回时，要从调用栈的顶端取得返回地址，回复现场，返回栈帧，按地址返回</p>
<center class="half">    <img src="img/截屏2022-03-28 下午7.16.44.png" width="300">    <img src="img/截屏2022-03-28 下午7.16.04.png" width="300" height="250"> </center>
<p><strong>递归算法程序的时候会经常会碰到这样的错误：递归层数太多，系统调用栈有限</strong></p>
<p><code>RecursionError : maximum recursion depth exceeded while...</code></p>
<p>这时要检查程序中是否忘记设置<strong>基本结束条件</strong>，导致无限递归</p>
<p>或者<strong>向基本结束条件演进太慢</strong>，导致递归层数太多，调用栈溢出</p>
<p>在Python内置的sys模块可以获取和调整最大递归深度</p>
<pre><code class='language-python' lang='python'>&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.getrecursionlimit()
1000
&gt;&gt;&gt; sys.getrecursionlimit(3000)
&gt;&gt;&gt; sys.getrecursionlimit()
3000
</code></pre>
<h4 id='递归可视化分形树'>递归可视化：分形树</h4>
<p><strong><code>Python</code>的海龟作图<code>turtle module</code></strong></p>
<pre><code class='language-python' lang='python'>forward(n) backward(n) #爬行（前进/后退）
left(a) right(a)       #转向
penup() pendown()      #抬笔放笔
pensize(s) pencolor(c) #笔的属性
</code></pre>
<p><strong>示例（循环，画五角星）：</strong></p>
<pre><code class='language-python' lang='python'>import turtle
t= turtle.Turtle()

#作图开始
t.pencolor(&#39;red&#39;)
t.pensize(3)
for i in range(5)
    t.forward(100)
    t.right(144)
t.hideturtle()  #隐藏turtle

#作图结束
turtle.done()
</code></pre>
<p><strong>示例（递归，画螺旋）：</strong></p>
<pre><code class='language-python' lang='python'>import turtle
t= turtle.Turtle()

def drawSpiral(t,lineLen):
    if lineLen &gt; 0:
        t.forward(lineLen)
        t.right(90)
        drawSpiral(t, lineLen - 5)

drawSpiral(t, 100)

turtle.done()
</code></pre>
<p><strong>分形Fractal（1975）</strong></p>
<p>一个粗糙或零碎的几何形状，可以分成数个部分，且每一部分都（至少近似地）是整体缩小后的形状，即具有<strong>自相似</strong>的性质。（or 分形是在不同尺度上都具有相似性的事物）</p>
<p>自然现象中所具备的分形特性，使得计算机可以通过分形算法生成非常逼真的自然场景。</p>
<p><strong>分形树</strong></p>
<pre><code class='language-python' lang='python'>import turtle

def tree(branch_len):
    if branch_len &gt; 5: #树干太短不画，即递归结束条件
        t.forward(branch_len)
        t.right(20)
        tree(branch_len - 15)
        t.left(40)
        tree(branch_len - 15)
        t.right(20)
        t.backward(branch_len)

t = turtle.Turtle()
t.left(90)
t.penup()
t.backward(100)
t.pendown()
t.pencolor(&#39;green&#39;)
t.pensize(2)
tree(75)
t.hideturtle()
turtle.done()
</code></pre>
<h4 id='递归可视化谢尔宾斯基三角形'><strong>递归可视化：谢尔宾斯基三角形</strong></h4>
<p>分形构造，平面称谢尔宾斯基三角形，立体称谢尔宾斯基金字塔</p>
<p>实际上，真正的谢尔宾斯基三角形是完全不可见的，其面积为0，但周长无穷，是一个介于一维和二维之间的分数维构造（约1.585维构造）</p>
<p>根据自相似特性，谢尔宾斯基三角形是由三个尺寸减半的谢尔宾斯基三角形按照品字形拼叠而成</p>
<p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="10.813ex" height="2.034ex" role="img" focusable="false" viewBox="0 -694 4779.6 899" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.464ex;"><defs><path id="MJX-2-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path><path id="MJX-2-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-2-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-2-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-2-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-2-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-2-TEX-I-1D451"></use></g><g data-mml-node="mi" transform="translate(520,0)"><use data-c="1D452" xlink:href="#MJX-2-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(986,0)"><use data-c="1D454" xlink:href="#MJX-2-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(1463,0)"><use data-c="1D45F" xlink:href="#MJX-2-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(1914,0)"><use data-c="1D452" xlink:href="#MJX-2-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(2380,0)"><use data-c="1D452" xlink:href="#MJX-2-TEX-I-1D452"></use></g><g data-mml-node="mo" transform="translate(3123.8,0)"><use data-c="3D" xlink:href="#MJX-2-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(4179.6,0)"><use data-c="1D45B" xlink:href="#MJX-2-TEX-I-1D45B"></use></g></g></g></svg></mjx-container><script type="math/tex">degree=n</script>的三角形是由三个<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="14.71ex" height="2.034ex" role="img" focusable="false" viewBox="0 -694 6502 899" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.464ex;"><defs><path id="MJX-3-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path><path id="MJX-3-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-3-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-3-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-3-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-3-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-3-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-3-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-3-TEX-I-1D451"></use></g><g data-mml-node="mi" transform="translate(520,0)"><use data-c="1D452" xlink:href="#MJX-3-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(986,0)"><use data-c="1D454" xlink:href="#MJX-3-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(1463,0)"><use data-c="1D45F" xlink:href="#MJX-3-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(1914,0)"><use data-c="1D452" xlink:href="#MJX-3-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(2380,0)"><use data-c="1D452" xlink:href="#MJX-3-TEX-I-1D452"></use></g><g data-mml-node="mo" transform="translate(3123.8,0)"><use data-c="3D" xlink:href="#MJX-3-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(4179.6,0)"><use data-c="1D45B" xlink:href="#MJX-3-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(5001.8,0)"><use data-c="2212" xlink:href="#MJX-3-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(6002,0)"><use data-c="31" xlink:href="#MJX-3-TEX-N-31"></use></g></g></g></svg></mjx-container><script type="math/tex">degree=n-1</script>的三个尺寸减半的三角形构成的</p>
<pre><code class='language-python' lang='python'>import turtle

def sierpinski(degree,point):
    colormap = [&#39;blue&#39;,&#39;red&#39;,&#39;green&#39;,&#39;white&#39;,&#39;yellow&#39;,&#39;orange&#39;]
    drawTriangle(points,colormap[degree])
    if degree&gt;0:
        sierpinski(degree -1,
                  {&#39;left&#39;:points[&#39;left&#39;],
                  &#39;top&#39;:getMid(points[&#39;left&#39;],points[&#39;top&#39;]),
                  &#39;right&#39;:getMid(points[&#39;left&#39;],points[&#39;right&#39;])})
        sierpinski(degree -1,
                  {&#39;left&#39;:getMid(points[&#39;left&#39;],points[&#39;top&#39;]),
                  &#39;top&#39;:points[&#39;top&#39;],
                  &#39;right&#39;:getMid(points[&#39;top&#39;],points[&#39;right&#39;])})
        sierpinski(degree -1,
                  {&#39;left&#39;:getMid(points[&#39;left&#39;],points[&#39;right&#39;]),
                  &#39;top&#39;:getMid(points[&#39;top&#39;],points[&#39;right&#39;]),
                  &#39;right&#39;:points[&#39;right&#39;]})
def drawTrangle(point,color):
    t.fillcolor(color)
    t.penup()
    t.goto(points[&#39;top&#39;])
    t.pendown()
    t.begin_fill()
    t.goto(points[&#39;left&#39;])
    t.goto(points[&#39;right&#39;])
    t.goto(points[&#39;top&#39;])
    t.end_fill()

def getMid(p1,p2):
    return ((p1[0]+p2[0])/2,(p1[1]+p2[1])/2)

t = turtle.Turtle()

points = {&#39;left&#39;:(-200,-100),
         &#39;top&#39;:(0,200),
         &#39;right&#39;:(200,-100)}
sierpinski(5,points)
turtle.done()
</code></pre>
<h4 id='递归的应用汉诺塔'>递归的应用：汉诺塔</h4>
<p>将盘片塔从<strong>开始柱</strong>，经由<strong>中间柱</strong>，移动到<strong>目标柱</strong></p>
<p>首先将上层N-1个盘片的盘片塔，从开始柱，经由目标柱，移动到中间柱</p>
<p>然后将第N个最大的盘片，从开始柱，移动到目标柱</p>
<p>最后将放置在中间柱的N-1个盘片的盘片塔，由开始柱，移动到目标柱</p>
<p><strong>基本结束条件：1个盘片的移动问题</strong></p>
<p>程序实现：</p>
<pre><code class='language-python' lang='python'>def moveTower(height,fromPole,withPole,toPole):
    if height &gt;= 1:
        moveTower(height-1,fromPole,toPole,withPole)
        moveDisk(height,fromPole,toPole)
        moveTower(height-1,withPole,fromPole,toPole)
def moveDisk(disk,fromPole,toPole):
    print(f&quot;Moving disk[{disk}] from {fromPole} to {toPole}&quot;)
moveTower(3,&#39;#1&#39;,&#39;#2&#39;,&#39;#3&#39;)
</code></pre>
<h4 id='递归的应用探索迷宫'>递归的应用：探索迷宫</h4>
<p>将海龟放在迷宫中间，如何能找到出口</p>
<p>首先，将整个迷宫的空间（矩形）分成行列整齐的方格，区分出墙壁和通道。</p>
<p>给每个方格属性：行列位置，“墙壁”/“通道”</p>
<p><strong>考虑用矩阵方式来实现迷宫数据结构</strong>：</p>
<p>采用“数据项为字符列表的列表”这种二级列表来存储方格内容</p>
<p>采用不同字符来分别代表“墙壁+”、“通道 ”、”海龟投放点S“</p>
<p>从一个文本文件逐行读入数据</p>
<pre><code class='language-python' lang='python'>class Maze:
    def __init__(self,mazeFileName):
        rowsInMaze = 0
        columnsInMaze = 0
        self.mazelist = []
        mazeFile = open(mazeFileName,&#39;r&#39;)
        rowsInMaze = 0
        for line in mazeFile:
            rowList = []
            col = 0
            for ch in line[:-1]:
                rowList.append(ch)
                if ch == &#39;S&#39;:
                    self.startRow = rowsInMaze
                    self.startCol = col
                col = col + 1
            rowsInMaze = rowsInMaze + 1
            self.mazelist.append(rowList)
            colomnsInMaze = len(rowList)
</code></pre>
<p><strong>确定了迷宫数据结构之后，我们知道，对于海龟来说，其身处某一个方格之中</strong></p>
<p>这样，探索迷宫的递归算法思路如下：</p>
<p>将海龟从原位置向北移动一步，以新位置递归调用探索迷宫寻找出口</p>
<p>如果找不到出口，那么将海龟从原位置向南移动一步，以新位置递归调用探索迷宫寻找出口</p>
<p>如果找不到出口，那么将海龟从原位置西南移动一步，以新位置递归调用探索迷宫寻找出口</p>
<p>如果找不到出口，那么将海龟从原位置向东移动一步，以新位置递归调用探索迷宫寻找出口</p>
<p>如果上述四个方向都找不到出口，那么这个迷宫没有出口</p>
<p><strong>细节：不能返回原位置之后不能再重走原来的路，所以需要有个机制记录海龟走过的路径</strong></p>
<p>沿途洒”面包屑“，一旦发现前进方向有“面包屑”，就不能再踩上去，必须换下一个方向进行尝试</p>
<p>对于递归调用来说，就是某方向的方格上若发现“面包屑”，就立即从递归调用返回上一级</p>
<p>递归调用的<strong>基本结束条件</strong>：</p>
<p>海龟碰到“墙壁方格”，递归调用结束，返回失败</p>
<p>海龟碰到“面包屑”方格，表示此方格已访问过，递归调用结束，返回失败</p>
<p>海龟碰到“出口方格“，即“位于边缘的通道”方格，递归调用结束，返回成功</p>
<p>海龟在四个方向上都探索失败，递归调用结束，返回失败</p>
<pre><code class='language-python' lang='python'>def searchFrom(maze,startRow,startColumn):
    #1.碰到墙壁，返回失败
    maze.updatePositiom(startRow,startColume)
    if maze[startRow][startColumn] == OBSTACLE:
        return False

    #2.碰到面包屑，或者死胡同，返回失败
    if maze[startRow][startColumn] == TRIED or \
       maze[startRow][startColumn] == DEAD_END:
            return False

    #3.碰到出口，返回成功
    if maze.isExit(startRow,startColumn):
        maze.updatePosition(startRow,startColumn,PART_OF_PATH)
        return True

    #4.洒下面包屑，继续探索
    maze.updatePosition(startRow,startColumn,TRIED)

    #从东南西北4个方向依次探索，or操作符具有短路效应(顺序计算)
    found = searchFrom(maze,startRow-1,startColumn) or \
            searchFrom(maze,startRow+1,startColumn) or \
            searchFrom(maze,startRow,startColumn-1) or \
            searchFrom(maze,startRow,startColumn+1)

    #如果探索成功，标记当前点，失败则标记为“死胡同”
    if found:
        maze.updatePosition(startRow,startColume,PART_OF_PATH)
    else:
        maze.updatePosition(startRow,startColume,DEAD_END)
    return found
</code></pre>
<h3 id='分治贪心和动态规划'>分治，贪心和动态规划</h3>
<h4 id='分治策略'>分治策略</h4>
<p>将问题分为若干更小规模的部分</p>
<p>通过解决每一个小规模部分的问题，将结果汇总得到原问题的解</p>
<p><strong>递归三定律</strong>（基本结束条件，缩小规模，调用自身）也体现了分治策略</p>
<p>应用相当广泛：排序、查找、遍历、求值</p>
<h4 id='优化问题和贪心策略'>优化问题和贪心策略</h4>
<p><strong>优化问题：找到某些问题的最优解</strong></p>
<p>经典问题：找零数量最少</p>
<p><strong>贪心策略</strong>：每次都试图解决问题的尽量大的一部分：对应到兑换硬币问题，就是每次以最多数量的最大面值硬币来迅速减少找零面值</p>
<p>贪心策略可能失效：如 如果有21‘的硬币，63’的最优解应当是3*21‘！</p>
<p>（贪心策略是否有效依赖于具体的硬币体系）</p>
<h4 id='找零兑换递归方法'>找零兑换：递归方法</h4>
<p><strong>基本结束条件</strong>：需要兑换的找零，其<strong>面值</strong>正好<strong>等于</strong>某种<strong>硬币</strong></p>
<p><strong>减小问题的规模</strong>：对每种硬币尝试一次最大兑换，剩下的问题规模就缩小了；从所有枚举中选择最少的一个</p>
<pre><code class='language-python' lang='python'>def recMC(coinValueList,change):
    minCoins = change
    if change in coinValueList:
        return 1
    else:
        for i in [c for c in coinValueList if c &lt;= change]:
            numCoins = 1 + recMC(coinValueList,change-i)
            if numCoins &lt; minCoins:
                minCoins = numCoins
    return minCoins
print(recDC([1,5,10,25],63))
</code></pre>
<p>递归解法虽然能解决问题，但其最大的问题是极其低效</p>
<p>因为直接进行递归调用中重复计算过多</p>
<p>对这个递归解法进行改进的关键就在于<strong>消除重复计算</strong>：可以用一个表将计算过的中间过程保存起来，在计算之前查表看看是否已经计算过</p>
<p>这个算法的中间结果就是部分找零的最优解，在递归调用的过程中已经得到的最优解被记录下来，在递归调用之前先查找表中是否已经有结果</p>
<pre><code class='language-python' lang='python'>def recMC(coinValueList,change,knownResults):
    minCoins = change
    if change in coinValueList:
        knownResults[change]=1
        return 1
    elif knownResults[change]&gt;0:
        return knownResults[change]
    else:
        for i in [c for c in coinValueList if c &lt;= change]:
            numCoins = 1 + recMC(coinValueList,change-i,knownResults)
            if numCoins &lt; minCoins:
                minCoins = numCoins
                knownResults[change] = minCoins
    return minCoins
print(recDC([1,5,10,25],63,[0]*64))
</code></pre>
<h4 id='找零兑换动态规划'>找零兑换：动态规划</h4>
<p>动态规划算法采用了一种<strong>更有条理</strong>的方式来得到问题的解</p>
<p>找零兑换的动态规划算法从最简单的“1分钱找零”开始，逐步递加上去，直到我们需要的找零钱数</p>
<p>在找零递加的过程中，设法保证每一分钱的递加都是最优解，一直加到求解找零钱数，自然找到最优解</p>
<pre><code class='language-python' lang='python'>def dpMakeChange(coinValueList,change,minCoins):
    for cents in range(1,change+1):
        coinCount = cents
        for j in [c for c in coinValueList if c &lt;= cents]:
            if minCoins[cents-j]+1&lt;coinCount:
                coinCount = minCoins[cents-j]+1
        minCoins[cents] = coinCount
    return minCoins[change]
print(dpMakeChange([1,5,10,25],63,[0]*64))
</code></pre>
<p>注意到动态规划算法<code>dpMakeChange</code>并不是递归函数</p>
<p>动态规划算法中最主要的思想是：从最简单情况开始找到所需找零的循环；其每一步都依靠以前的最优解来得到本步骤的最优解，直到得到答案</p>
<h4 id='找零兑换动态规划扩展'>找零兑换：动态规划扩展</h4>
<p>前面的算法已经得到了最少硬币的数量，但并没有返回硬币如何组合</p>
<p>扩展算法的思路很简单，只需要在生成最优解列表同时跟踪记录所选择的那个硬币币值即可</p>
<p>在得到最后的解后，减去选择的硬币币值，回溯到表格之前的部分找零，就能逐步得到每一步所选择的硬币币值</p>
<pre><code class='language-python' lang='python'>def dpMakeChange(coinValueList,change,minCoins,coinsUsed):
    for cents in range(1,change+1):
        coinCount = cents
        newCoin = 1
        for j in [c for c in coinValueList if c &lt;= cents]:
            if minCoins[cents-j]+1&lt;coinCount:
                coinCount = minCoins[cents-j]+1
                newCoin = j
        minCoins[cents] = coinCount
        coinsUsed[cents] = newCoin
    return minCoins[change]

def printCoins(coinUsed,change):
    coin = change
    while coin&gt;0:
        thisCoin = coinUsed[coin]
        print(thisCoin)
        coin = coin - thisCoin

amnt = 63
clist = [1,5,10,21,25]
coinsUsed = [0]*(amnt+1)
coinCount = [0]*(amnt+1)

print(&quot;Makeing change for&quot;, amnt, &quot;requires&quot;)
print(dpMakeChange(clist,amnt,coinCount,coinsUsed),&quot;coins&quot;)
print(&quot;They are&quot;)
printCoins(coinsUsed,amnt)
print(&quot;The used list is as follows:&quot;)
print(coinsUsed)
</code></pre>
<h4 id='博物馆大盗问题动态规划'>博物馆大盗问题：动态规划</h4>
<p>一大盗潜入博物馆，面前有5件宝物，分别有重量和价值，大盗的背包仅能负重20公斤，请问如何选择宝物，总价值最高</p>
<p>我们把<code>m(i,W)</code>记为前<code>i</code>个宝物中，组合<strong>不超过</strong><code>W</code>重量，得到的最大价值</p>
<p>递推：<code>m(i,W)</code>应该是<code>m(i-1,W)</code>和<code>m(i-1,W-Wi)+vi</code>两者最大值，我们从<code>m(1,1)</code>计算到<code>m(5,20)</code></p>
<pre><code class='language-python' lang='python'>#宝物重量与价值
tr = [None,{&#39;w&#39;:2,&#39;v&#39;:3},{&#39;w&#39;:3,&#39;v&#39;:4},
             {&#39;w&#39;:4,&#39;v&#39;:8},{&#39;w&#39;:5,&#39;v&#39;:8},
           {&#39;w&#39;:9,&#39;v&#39;:10}]
#大盗最大承重
max_w = 20

#初始化二维表格m[(i,w)]
#表示前i个宝物中，最大重量w的组合，所得到的最大价值
#当i什么都不取，或w上限为0，价值均为0
m = {(i,w):0 for i in range(len(tr))
               for w in range(max_w+1)}

#逐个填写二维表格
for i in range(1,len(tr)):
    for w in range(1,max_w+1):
        if tr[i][&#39;w&#39;]&gt;w:#装不下第i个宝物
            m[(i,w)]=m[(i-1,w)]
        else:#不装第i个宝物，装第i个宝物，两种情况下最大价值
            m[(i,w)]=max(
                m[(i-1,w)],
                m[(i-1,w-tr[i][&#39;w&#39;])]+tr[i][&#39;v&#39;])
#输出结果
print(m[((len(tr)-1),max_w)])
</code></pre>
<h4 id='博物馆大盗问题递归方法'>博物馆大盗问题：递归方法</h4>
<pre><code class='language-python' lang='python'>#宝物的重量和价值
tr = {(2,3),(3,4),(4,8),(5,8),(9,10)}

#大盗最大承重
max_w = 20

#初始化记忆化表格m
#key是(宝物组合，最大重量),value是最大价值
m={}

def thief(tr,w):
    if tr == set() or w == 0:
        m[(tuple(tr),w)] = 0 #tuple是key的要求
        return 0
    elif (tuple(tr),w) in m:
        return m[(tuple(tr),w)]
    else:
        vmax = 0
        for t in tr:
            if t[0] &lt;= w:
                #逐个从集合中去掉某个宝物，递归调用
                #选出所有价值中的最大值
                v = thief(tr-{t},w-t[0])+t[1]
                vmax = max(vmax,v)
            m[(tuple(tr),w)] = vmax
            return vmax
#输出结果
print(thief(tr,max_w))
</code></pre>
<h3 id='递归小结'>递归小结</h3>
<p>递归是解决某些具有自相似性的复杂问题的有效技术</p>
<p>递归算法“三定律”：基本结束条件，减小规模，调用自身</p>
<p>某些情况下，递归可以代替迭代循环</p>
<p>递归算法通常能够和问题的表达自然契合</p>
<p>有时候递归算法会引发巨量的重复计算（通过“记忆化/函数值缓存”有效减少重复计算）</p>
<p>如果一个问题最优解包括<strong>规模更小</strong>相同问题的最优解，就可以用动态规划来解决</p>
<h2 id='排序与查找'>排序与查找</h2>
<h3 id='排序算法-1'>排序算法</h3>
<h4 id='冒泡排序bubble-sort'>冒泡排序Bubble Sort</h4>
<p>冒泡排序的算法思路在于对无序表进行多趟比较变换，每趟包括了多次两两相邻比较，并将逆序的数据项交换位置，最终能将本趟的最大项就位，经过n-1次比较变换，所有数据项就位</p>
<p>对于第一趟：进过最大项后，最大项会一直比对到最后一项，共需n-1次比对</p>
<p>对于第i趟：由于已经有i-1项排完了，共需n-i次比对</p>
<pre><code class='language-python' lang='python'>def bubbleSort(alist):
    for passnum in range(len(alist) - 1, 0, -1):
        for i in range(passnum):
            if alist[i] &gt; alist[i + 1]:
                alist[i],alist[i+1]=alist[i+1],alist[i]


alist = [54, 26, 93, 17, 77, 31, 44, 55, 20]
bubbleSort(alist)
print(alist)
</code></pre>
<p>算法必定发生比对次数<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="10.059ex" height="2.737ex" role="img" focusable="false" viewBox="0 -864.9 4446.1 1209.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.781ex;"><defs><path id="MJX-4-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-4-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-4-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-4-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mfrac"><g data-mml-node="mn" transform="translate(220,394) scale(0.707)"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use></g><g data-mml-node="mn" transform="translate(220,-345) scale(0.707)"><use data-c="32" xlink:href="#MJX-4-TEX-N-32"></use></g><rect width="553.6" height="60" x="120" y="220"></rect></g><g data-mml-node="msup" transform="translate(793.6,0)"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-4-TEX-I-1D45B"></use></g><g data-mml-node="mn" transform="translate(633,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-4-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(2052.3,0)"><use data-c="2212" xlink:href="#MJX-4-TEX-N-2212"></use></g><g data-mml-node="mfrac" transform="translate(3052.6,0)"><g data-mml-node="mn" transform="translate(220,394) scale(0.707)"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use></g><g data-mml-node="mn" transform="translate(220,-345) scale(0.707)"><use data-c="32" xlink:href="#MJX-4-TEX-N-32"></use></g><rect width="553.6" height="60" x="120" y="220"></rect></g><g data-mml-node="mi" transform="translate(3846.1,0)"><use data-c="1D45B" xlink:href="#MJX-4-TEX-I-1D45B"></use></g></g></g></svg></mjx-container><script type="math/tex">\frac{1}{2}n^2-\frac{1}{2}n</script>，比对的时间复杂度是O(n^2)</p>
<p>对于交换次数，时间复杂度也是O(n^2)，且通常每次交换包含3次赋值，最好的情况是列表已经有序，交换次数为0，最坏的情况是每次比对都需要交换，平均来说交换的时间复杂度与比对的时间复杂度数量级一致</p>
<p>冒泡排序：<strong>算法分析</strong></p>
<p>冒泡排序通常作为<strong>时间效率较差</strong>的排序算法，来作为其他算法的基准。</p>
<p>其效率主要差在每个数据项在找到其最终位置之前，必须要经过<strong>多次比对和交换</strong>，其中<strong>大部分操作都是无效的</strong>。</p>
<p>但有两点优势，就是<strong>无需任何额外的存储空间开销</strong>，且只涉及相邻数据项的比对，在多种数据结构中都可以使用。</p>
<p>冒泡排序：<strong>性能改进</strong></p>
<p>如果某次比对未发生过交换，可以提前确定排序是否完成（这也是多数其他排序算法无法实现的）</p>
<pre><code class='language-python' lang='python'>def shortbubbleSort(alist):
    exchanges = True
    passnum = len(alist) - 1
    while passnum &gt; 0 and exchanges:
        exchanges = False
        for i in range(passnum):
            if alist[i] &gt; alist[i + 1]:
                exchanges = True
                alist[i], alist[i + 1] = alist[i + 1], alist[i]
        passnum = passnum - 1


alist = [54, 26, 93, 17, 77, 31, 44, 55, 20]
shortbubbleSort(alist)
print(alist)
</code></pre>
<p>但它不改变冒泡排序的基本复杂度O(n^2)</p>
<h4 id='选择排序selection-sort'>选择排序Selection Sort</h4>
<p>选择排序对冒泡排序进行了改进，保留了基本的多趟对比思路，每趟都使当前最大项就位。</p>
<p>但选择排序对交换进行了削减，相比于冒泡排序进行多次交换，选择排序记录最大项的所在位置，最后再跟本趟最后一项交换</p>
<p>选择排序的时间复杂度比冒泡排序稍优（对比次数O(n^2)，交换次数O(n)）</p>
<pre><code class='language-python' lang='python'>def selectionSort(alist):
    for fillslot in range(len(alist) - 1, 0, -1):
        positionOfMax = 0
        for location in range(1, fillslot + 1):
            if alist[location] &gt; alist[positionOfMax]:
                positionOfMax = location
        alist[fillslot], alist[positionOfMax] = alist[positionOfMax], alist[fillslot]


alist = [54, 26, 93, 17, 77, 31, 44, 55, 20]
selectionSort(alist)
print(alist)
</code></pre>
<h4 id='插入排序insertion-sort'>插入排序Insertion Sort</h4>
<p>插入排序时间复杂度依旧是O(n^2)，但算法思路与冒泡排序不同</p>
<p>插入排序维持一个已排好序的子列表，其位置始终在列表的前部，然后逐步扩大这个子列表直至全表</p>
<p>插入排序的比对主要用来寻找<strong>新项的插入位置</strong></p>
<p>最差情况是每趟都与子列表中所有项进行比对，总比对次数与冒泡排序相同，数量级仍是O(n^2)</p>
<p>最好情况，列表已经排好序的时候，每趟仅需一次比对，总次数是O(n)</p>
<p>插入的实现：比对并<strong>移动所有比新项大的数据项</strong></p>
<pre><code class='language-python' lang='python'>def insertionSort(alist):
    for index in range(1, len(alist)):
        currentvalue = alist[index]
        position = index

        while position &gt; 0 and alist[position - 1] &gt; currentvalue:
            alist[position] = alist[position - 1]
            position = position - 1
        alist[position] = currentvalue


alist = [54, 26, 93, 17, 77, 31, 44, 55, 20]
insertionSort(alist)
print(alist)
</code></pre>
<p>由于此时移动操作仅包含一次赋值，是交换操作的1/3，所以插入排序性能（比冒泡排序）会较好一些</p>
<h4 id='谢尔排序shell-sort'>谢尔排序Shell Sort</h4>
<p>列表越接近有序，插入排序的比对次数就越少</p>
<p>谢尔排序以插入排序作为基础，对无序表进行<strong>间隔划分子列表</strong>，对每个子列表执行插入排序</p>
<p>随着子列表的数量越来越少，无序表的整体越来越接近有序，从而减少整体排序的比对次数</p>
<p>最后一趟是标准的插入排序，但由于前面几趟已经将列表处理到接近有序，这一趟只需少数几次移动即可完成</p>
<p>子列表的间隔一般从n/2开始，每趟倍减n/4，n/8...直到1</p>
<pre><code class='language-python' lang='python'>def shellSort(alist):
    sublistcount = len(alist) // 2  # 间隔设定
    while sublistcount &gt; 0:
        for startposition in range(sublistcount):  # 子列表排序
            gapInsertionSort(alist, startposition, sublistcount)
        #print(&#39;After increments of size&#39;, sublistcount, &#39;the list is&#39;, alist)
        sublistcount = sublistcount // 2  # 间隔缩小


def gapInsertionSort(alist, start, gap):
    for i in range(start + gap, len(alist), gap):
        currentvalue = alist[i]
        position = i
        while position &gt;= gap and alist[position - gap] &gt; currentvalue:
            alist[position] = alist[position - gap]
            position = position - gap
        alist[position] = currentvalue


alist = [54, 26, 93, 17, 77, 31, 44, 55, 20]
shellSort(alist)
print(alist)
</code></pre>
<p>插入排序每趟都使得列表更加接近有序，这个过程会减少很多原先需要的<strong>无效</strong>比对</p>
<p>对谢尔排序的详尽分析比较复杂，大致说是介于O(n)和O(n^2)之间</p>
<p>如果将间隔保持在<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="22.781ex" height="2.497ex" role="img" focusable="false" viewBox="0 -853.7 10069.2 1103.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-5-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-5-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path><path id="MJX-5-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-5-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-5-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-5-TEX-N-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path id="MJX-5-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-5-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-5-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-5-TEX-N-2026" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60ZM525 60Q525 84 542 102T585 120Q609 120 627 104T646 61Q646 36 629 18T586 0T543 17T525 60ZM972 60Q972 84 989 102T1032 120Q1056 120 1074 104T1093 61Q1093 36 1076 18T1033 0T990 17T972 60Z"></path><path id="MJX-5-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-5-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(533,363) scale(0.707)"><use data-c="1D458" xlink:href="#MJX-5-TEX-I-1D458"></use></g></g><g data-mml-node="mo" transform="translate(1173.6,0)"><use data-c="2212" xlink:href="#MJX-5-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2173.8,0)"><use data-c="31" xlink:href="#MJX-5-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(2673.8,0)"><use data-c="28" xlink:href="#MJX-5-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(3062.8,0)"><use data-c="31" xlink:href="#MJX-5-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(3562.8,0)"><use data-c="2C" xlink:href="#MJX-5-TEX-N-2C"></use></g><g data-mml-node="mn" transform="translate(4007.5,0)"><use data-c="33" xlink:href="#MJX-5-TEX-N-33"></use></g><g data-mml-node="mo" transform="translate(4507.5,0)"><use data-c="2C" xlink:href="#MJX-5-TEX-N-2C"></use></g><g data-mml-node="mn" transform="translate(4952.2,0)"><use data-c="37" xlink:href="#MJX-5-TEX-N-37"></use></g><g data-mml-node="mo" transform="translate(5452.2,0)"><use data-c="2C" xlink:href="#MJX-5-TEX-N-2C"></use></g><g data-mml-node="mn" transform="translate(5896.8,0)"><use data-c="31" xlink:href="#MJX-5-TEX-N-31"></use><use data-c="35" xlink:href="#MJX-5-TEX-N-35" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(6896.8,0)"><use data-c="2C" xlink:href="#MJX-5-TEX-N-2C"></use></g><g data-mml-node="mn" transform="translate(7341.5,0)"><use data-c="33" xlink:href="#MJX-5-TEX-N-33"></use><use data-c="31" xlink:href="#MJX-5-TEX-N-31" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(8508.2,0)"><use data-c="2026" xlink:href="#MJX-5-TEX-N-2026"></use></g><g data-mml-node="mo" transform="translate(9680.2,0)"><use data-c="29" xlink:href="#MJX-5-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">2^k-1(1,3,7,15,31\dots)</script>，谢尔排序的时间复杂度约为<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.301ex" height="2.769ex" role="img" focusable="false" viewBox="0 -974.1 2785.1 1224.1" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-6-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-6-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-6-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-6-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-6-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-6-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-6-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-6-TEX-N-28"></use></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-6-TEX-I-1D45B"></use></g><g data-mml-node="TeXAtom" transform="translate(633,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mfrac"><g data-mml-node="mn" transform="translate(220,394) scale(0.707)"><use data-c="33" xlink:href="#MJX-6-TEX-N-33"></use></g><g data-mml-node="mn" transform="translate(220,-345) scale(0.707)"><use data-c="32" xlink:href="#MJX-6-TEX-N-32"></use></g><rect width="553.6" height="60" x="120" y="220"></rect></g></g></g><g data-mml-node="mo" transform="translate(2396.1,0)"><use data-c="29" xlink:href="#MJX-6-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(n^{\frac{3}{2}})</script></p>
<h4 id='归并排序merge-sort'>归并排序Merge Sort</h4>
<p><strong>归并排序</strong>是<strong>分治策略</strong>在排序中的应用</p>
<p><strong>基本结束条件</strong>：数据表中仅有一个数据项</p>
<p><strong>缩小规模</strong>：将数据表分裂为相等的两半</p>
<p><strong>调用自身</strong>：将两半分别调用自身排序，然后将分别排好序的两半合并</p>
<pre><code class='language-python' lang='python'>def mergeSort(alist):
    if len(alist) &gt; 1:  # 基本结束条件
        mid = len(alist) // 2
        lefthalf = alist[:mid]
        righthalf = alist[mid:]

        # 递归调用
        mergeSort(lefthalf)
        mergeSort(righthalf)

        # 归并
        i = j = k = 0

        while i &lt; len(lefthalf) and j &lt; len(righthalf):
            if lefthalf[i] &lt; righthalf[j]:
                alist[k] = lefthalf[i]
                i = i + 1
            else:
                alist[k] = righthalf[j]
                j = j + 1
            k = k + 1

        while i &lt; len(lefthalf):#归并左半部剩余项
            alist[k] = lefthalf[i]
            i = i + 1
            k = k + 1

        while j &lt; len(righthalf):#归并右半部剩余项
            alist[k] = righthalf[j]
            j = j + 1
            k = k + 1


alist = [54, 26, 93, 17, 77, 31, 44, 55, 20]
mergeSort(alist)
print(alist)
</code></pre>
<p>另一个归并排序算法（更Pythonic）</p>
<pre><code class='language-python' lang='python'>def merge_sort(lst):
    # 递归结束条件
    if len(lst) &lt;= 1:
        return lst

    # 分解问题，递归调用
    middle = len(lst) // 2
    left = merge_sort(lst[:middle])
    right = merge_sort(lst[middle:])

    # 合并左右半部，完成排序
    merged = []
    while left and right:
        if left[0] &lt;= right[0]:
            merged.append(left.pop(0))
        else:
            merged.append(right.pop(0))
    merged.extend(right if right else left)

    return merged


alist = [54, 26, 93, 17, 77, 31, 44, 55, 20]
print(merge_sort(alist))
</code></pre>
<p>归并排序：<strong>算法分析</strong></p>
<p>分裂过程：时间复杂度O(log n)</p>
<p>归并过程：相对于每个数据项都会被放置一次，每次放置前比较一次，所以是线性复杂度，时间复杂度是O(log n)</p>
<p>综合考虑：每次分裂的部分进行一次O(n)的数据项归并，总时间复杂度O(nlog n)</p>
<p>但是注意到：归并排序算法使用了<strong>额外一倍的存储空间</strong>用于归并，这个特性在处理特大数据集进行排序时</p>
<h4 id='快速排序quick-sort'>快速排序Quick Sort</h4>
<p>快速排序的思路是依据一个中值数据项来把数据表分为两半：然后对每部分分别进行快速排序（递归）</p>
<p>如果希望这两半有相同数量的数据项，则应该找到数据表的”中位数“</p>
<p>但找中位数需要计算开销：要想没有开销，只能随意找一个数来充当中值</p>
<p><strong>基本结束条件</strong>：数据表中仅有一个数据项</p>
<p><strong>缩小规模</strong>：根据<strong>中值</strong>，将数据表分为两半，最好的情况是相等规模的两半</p>
<p><strong>调用自身</strong>：将两半分别调用自身进行排序</p>
<p>分裂数据表的目标：<strong>找到中值的位置</strong></p>
<p>分裂数据表的手段：设置左右标（left/rightmark）</p>
<p>    左标向右移动，碰到比中值大的就停止</p>
<p>    右标向左移动，碰到比中值小的就停止</p>
<p>    然后将左右标所指数据项交换</p>
<p>    移动直到左标移动到右标的右侧，停止移动</p>
<p>    此时右标所指的位置就是中值应处的位置</p>
<p>    将中值和这个位置交换</p>
<p>    分裂完成，左半部比中值小，右半部比中值大</p>
<pre><code class='language-python' lang='python'>def quickSort(alist):
    quickSortHelper(alist, 0, len(alist) - 1)


def quickSortHelper(alist, first, last):
    if first &lt; last:
        splitpoint = partition(alist, first, last)
        quickSortHelper(alist, first, splitpoint - 1)
        quickSortHelper(alist, splitpoint + 1, last)


def partition(alist, first, last):
    # 选定中值
    pivotvalue = alist[first]

    # 左右标初值
    leftmark = first + 1
    rightmark = last

    done = False
    while not done:
        while leftmark &lt;= rightmark and \
                alist[leftmark] &lt;= pivotvalue:
            leftmark = leftmark + 1
        while rightmark &gt;= leftmark and \
                alist[rightmark] &gt;= pivotvalue:
            rightmark = rightmark - 1
        if rightmark &lt; leftmark:  # 两标交错即结束移动
            done = True
        else:  # 交换左右标
            alist[rightmark], alist[leftmark] = \
                alist[leftmark], alist[rightmark]

    alist[first], alist[rightmark] = \
        alist[rightmark], alist[first]  # 中值就位
    return rightmark  # 中值点，也就是分裂点


alist = [54, 26, 93, 17, 77, 31, 44, 55, 20]
quickSort(alist)
print(alist)
</code></pre>
<p>快速排序：<strong>算法分析</strong></p>
<p>快速排序过程分为两部分：<strong>分裂和移动</strong></p>
<p><strong>如果分裂总能把数据表分为相等的两部分</strong>，那么复杂度为O(log n)</p>
<p>而移动需要将每项都与中值进行比对，还是O(n)</p>
<p><strong>综合起来就是O(nlog n)，且算法运行过程中不需要额外的存储空间。</strong></p>
<p>但是如果中值所在的分裂点过于偏离中部，造成左右两部分数量不平衡，对于极端情况，时间复杂度就退化到O(n^2)，加上递归调用的开销，时间复杂度可能比冒泡排序还差</p>
<p>可以适当改进<strong>中值</strong>的选取算法，让中值更具有代表性：比如三点取样，从数据表的头尾中间选出中值，但这样的选取方法会产生额外开销，且仍然不能排除极端情况。</p>
<h3 id='基础查找顺序与二分查找'>基础查找：顺序与二分查找</h3>
<h4 id='顺序查找sequential-search'>顺序查找Sequential Search</h4>
<pre><code class='language-python' lang='python'>def sequentialSearch(alist, item):
    pos = 0
    found = False

    while pos &lt; len(alist) and not found:
        if alist[pos] == item:
            found = True
        else:
            pos = pos + 1

    return found


testlist = [1, 2, 32, 8, 17, 19, 42, 13, 0]
print(sequentialSearch(testlist, 3))
print(sequentialSearch(testlist, 13))
</code></pre>
<p>要对查找算法进行分析，首先要确定其中的<strong>基本计算步骤：数据项比对</strong></p>
<p>基本计算步骤必须要<strong>足够简单</strong>，且在算法中<strong>反复执行</strong></p>
<p>比对：当前数据项等于还是不等于要查找的数据项。比对的次数决定了<strong>算法复杂度</strong></p>
<p><strong>如果假定列表中的数据项随机出现：</strong></p>
<p>如果数据项在列表中：比对次数是n</p>
<p>如果数据项不在列表中：最好的情况1次比对，最差的情况n次比对，平均情况下比对次数是n/2</p>
<p><strong>如果再假定列表是有序表：</strong></p>
<p>可以在中间提前退出查找</p>
<pre><code class='language-python' lang='python'>def ordersequentialSearch(alist, item):
    pos = 0
    found = False
    stop = False

    while pos &lt; len(alist) and not found and not stop:
        if alist[pos] == item:
            found = True
        else:
            if alist[pos] &gt; item:
                stop = True
            else:
                pos = pos + 1

    return found


testlist = [0, 1, 2, 8, 13, 17, 19, 32, 42]
print(ordersequentialSearch(testlist, 3))
print(ordersequentialSearch(testlist, 13))
</code></pre>
<p>这样在数据项不存在时，有序表的查找能节省一些比对次数，但并不改变其数量级</p>
<h4 id='二分查找binary-search'>二分查找Binary Search</h4>
<p>对于有序表，利用其特性，可以迅速缩短待比对数据项的范围</p>
<p>从列表中间开始比对，如果匹配即结束，如果不匹配则通过比较大小确定数据项可能出现在此项之前或此项之后</p>
<p>这样每次比对，都会把比对范围缩小一半</p>
<pre><code class='language-python' lang='python'>def binarySearch(alist, item):
    first = 0
    last = len(alist) - 1
    found = False

    while first &lt;= last and not found:
        midpoint = (first + last) // 2
        if alist[midpoint] == item:
            found = True
        else:
            if item &lt; alist[midpoint]:
                last = midpoint - 1
            else:
                first = midpoint + 1

    return found


testlist = [0, 1, 2, 8, 13, 17, 19, 32, 42]
print(binarySearch(testlist, 3))
print(binarySearch(testlist, 13))
</code></pre>
<p>二分查找：<strong>分治策略</strong></p>
<p>将问题分为规模更小的部分，再将小规模的问题解决后合并</p>
<p>于是可以用递归重新实现二分查找</p>
<pre><code class='language-python' lang='python'>def binarySearch(alist, item):
    if len(alist) == 0:
        return False
    else:
        midpoint = len(alist) // 2
        if alist[midpoint] == item:
            return True
        else:
            if item &lt; alist[midpoint]:
                return binarySearch(alist[:midpoint], item)
            else:
                return binarySearch(alist[midpoint + 1:], item)


testlist = [0, 1, 2, 8, 13, 17, 19, 32, 42]
print(binarySearch(testlist, 3))
print(binarySearch(testlist, 13))
</code></pre>
<p>简单的计算可知：二分查找的复杂度是O(log n)</p>
<p>但是二分查找的前提：有序列表。对于无序表，需要排序，对于一般的无序表最好的排序算法的平均复杂度是O(nlog n)。</p>
<p><strong>如果一次排序后可以进行多次查找，那么排序的开销就可以摊薄</strong></p>
<p><strong>但如果数据集经常变动，查找次数相对较少，那么还是直接用无序表加上顺序查找来得经济</strong></p>
<h3 id='散列hashing'>散列Hashing</h3>
<p>如果数据项之间是<strong>按照大小排好序</strong>的话，就可以利用<strong>二分查找来降低算法复杂度</strong></p>
<p>现在我们进一步构造一个新的数据结构，能够使得查找算法的复杂度降到<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.652ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2056 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-10-TEX-N-4F" d="M56 340Q56 423 86 494T164 610T270 680T388 705Q521 705 621 601T722 341Q722 260 693 191T617 75T510 4T388 -22T267 3T160 74T85 189T56 340ZM467 647Q426 665 388 665Q360 665 331 654T269 620T213 549T179 439Q174 411 174 354Q174 144 277 61Q327 20 385 20H389H391Q474 20 537 99Q603 188 603 354Q603 411 598 439Q577 592 467 647Z"></path><path id="MJX-10-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-10-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-10-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="4F" xlink:href="#MJX-10-TEX-N-4F"></use></g></g><g data-mml-node="mo" transform="translate(778,0)"><use data-c="28" xlink:href="#MJX-10-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(1167,0)"><use data-c="31" xlink:href="#MJX-10-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(1667,0)"><use data-c="29" xlink:href="#MJX-10-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">\mathrm{O}(1)</script>，这种概念称为<strong>散列Hashing</strong></p>
<p>散列表（hash table，又称哈希表）是一种数据集，其中数据项的存储方式尤其有利于快速的查找定位</p>
<p>散列表中每一个存储位置，称为槽（slot），可以用于保存数据项，每个槽有一个唯一的名称。</p>
<p><strong>实现从数据项到存储槽名称的转换的，称为散列函数（hash function）</strong></p>
<p>下面示例中，散列函数接受数据项作为参数，返回整数值0～10，表示数据项存储的槽号（名称）</p>
<hr />
<p>为了将数据项保存到散列表中，我们设计第一个散列函数：</p>
<p>数据项：54，26，93，17，77，31</p>
<p><strong>一种常用的散列方法是“求余数”，将数据项除以散列表的大小，得到的余数作为槽号</strong></p>
<p>实际上“求余数”方法会以不同形式出现在所有散列函数里</p>
<p>因为散列函数返回的槽号必须在散列表大小范围之内，所以一般会对散列表大小求余</p>
<p>本例中，我们的散列函数是最简单的求余 <mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="18.979ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 8388.6 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-8-TEX-N-68" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 124T102 167T103 217T103 272T103 329Q103 366 103 407T103 482T102 542T102 586T102 603Q99 622 88 628T43 637H25V660Q25 683 27 683L37 684Q47 685 66 686T103 688Q120 689 140 690T170 693T181 694H184V367Q244 442 328 442Q451 442 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-8-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-8-TEX-N-69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z"></path><path id="MJX-8-TEX-N-74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z"></path><path id="MJX-8-TEX-N-65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z"></path><path id="MJX-8-TEX-N-6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-8-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-8-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-8-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path><path id="MJX-8-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="68" xlink:href="#MJX-8-TEX-N-68"></use></g></g><g data-mml-node="mo" transform="translate(556,0)"><use data-c="28" xlink:href="#MJX-8-TEX-N-28"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(945,0)"><g data-mml-node="mi"><use data-c="69" xlink:href="#MJX-8-TEX-N-69"></use><use data-c="74" xlink:href="#MJX-8-TEX-N-74" transform="translate(278,0)"></use><use data-c="65" xlink:href="#MJX-8-TEX-N-65" transform="translate(667,0)"></use><use data-c="6D" xlink:href="#MJX-8-TEX-N-6D" transform="translate(1111,0)"></use></g></g><g data-mml-node="mo" transform="translate(2889,0)"><use data-c="29" xlink:href="#MJX-8-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(3555.8,0)"><use data-c="3D" xlink:href="#MJX-8-TEX-N-3D"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(4611.6,0)"><g data-mml-node="mi"><use data-c="69" xlink:href="#MJX-8-TEX-N-69"></use><use data-c="74" xlink:href="#MJX-8-TEX-N-74" transform="translate(278,0)"></use><use data-c="65" xlink:href="#MJX-8-TEX-N-65" transform="translate(667,0)"></use><use data-c="6D" xlink:href="#MJX-8-TEX-N-6D" transform="translate(1111,0)"></use></g></g><g data-mml-node="mi" transform="translate(6555.6,0)"><use data-c="25" xlink:href="#MJX-8-TEX-N-25"></use></g><g data-mml-node="mn" transform="translate(7388.6,0)"><use data-c="31" xlink:href="#MJX-8-TEX-N-31"></use><use data-c="31" xlink:href="#MJX-8-TEX-N-31" transform="translate(500,0)"></use></g></g></g></svg></mjx-container><script type="math/tex">\mathrm{h}(\mathrm{item})=\mathrm{item}\%11</script>，按照散列函数即可将六个数据项入驻到散列表中</p>
<p>槽被数据项占据的比例称为散列表的<strong>负载因子</strong>，此例中负载因子为<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.525ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2000 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-9-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-9-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-9-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="36" xlink:href="#MJX-9-TEX-N-36"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(500,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-9-TEX-N-2F"></use></g></g><g data-mml-node="mn" transform="translate(1000,0)"><use data-c="31" xlink:href="#MJX-9-TEX-N-31"></use><use data-c="31" xlink:href="#MJX-9-TEX-N-31" transform="translate(500,0)"></use></g></g></g></svg></mjx-container><script type="math/tex">6/11</script></p>
<p>数据项都保存在散列表之后，查找就十分简单，对要查找的数据项使用同一个散列函数，对查找项进行计算，测试下返回的槽号所对应的槽中是否有数据项即可（这就实现了<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.652ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2056 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-10-TEX-N-4F" d="M56 340Q56 423 86 494T164 610T270 680T388 705Q521 705 621 601T722 341Q722 260 693 191T617 75T510 4T388 -22T267 3T160 74T85 189T56 340ZM467 647Q426 665 388 665Q360 665 331 654T269 620T213 549T179 439Q174 411 174 354Q174 144 277 61Q327 20 385 20H389H391Q474 20 537 99Q603 188 603 354Q603 411 598 439Q577 592 467 647Z"></path><path id="MJX-10-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-10-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-10-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="4F" xlink:href="#MJX-10-TEX-N-4F"></use></g></g><g data-mml-node="mo" transform="translate(778,0)"><use data-c="28" xlink:href="#MJX-10-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(1167,0)"><use data-c="31" xlink:href="#MJX-10-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(1667,0)"><use data-c="29" xlink:href="#MJX-10-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">\mathrm{O}(1)</script>的查找）</p>
<hr />
<p>当前这个方案的问题在于，若再加入44，<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="17.726ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 7835.1 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-11-TEX-N-68" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 124T102 167T103 217T103 272T103 329Q103 366 103 407T103 482T102 542T102 586T102 603Q99 622 88 628T43 637H25V660Q25 683 27 683L37 684Q47 685 66 686T103 688Q120 689 140 690T170 693T181 694H184V367Q244 442 328 442Q451 442 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-11-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-11-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-11-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-11-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-11-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-11-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="68" xlink:href="#MJX-11-TEX-N-68"></use></g></g><g data-mml-node="mo" transform="translate(556,0)"><use data-c="28" xlink:href="#MJX-11-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(945,0)"><use data-c="34" xlink:href="#MJX-11-TEX-N-34"></use><use data-c="34" xlink:href="#MJX-11-TEX-N-34" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(1945,0)"><use data-c="29" xlink:href="#MJX-11-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(2611.8,0)"><use data-c="3D" xlink:href="#MJX-11-TEX-N-3D"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(3667.6,0)"><g data-mml-node="mi"><use data-c="68" xlink:href="#MJX-11-TEX-N-68"></use></g></g><g data-mml-node="mo" transform="translate(4223.6,0)"><use data-c="28" xlink:href="#MJX-11-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(4612.6,0)"><use data-c="37" xlink:href="#MJX-11-TEX-N-37"></use><use data-c="37" xlink:href="#MJX-11-TEX-N-37" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(5612.6,0)"><use data-c="29" xlink:href="#MJX-11-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(6279.3,0)"><use data-c="3D" xlink:href="#MJX-11-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(7335.1,0)"><use data-c="30" xlink:href="#MJX-11-TEX-N-30"></use></g></g></g></svg></mjx-container><script type="math/tex">\mathrm{h}(44)=\mathrm{h}(77)=0</script>，两个数据项被分配到同一个0#槽中，这种情况被称为“冲突Collision”，后面会讨论它的解决方案。</p>
<h4 id='完美散列函数'>完美散列函数</h4>
<p>给定一组数据，如果一个散列函数能把每个数据项映射到不同的槽中，那么这个散列函数就可以称为<strong>完美散列函数</strong></p>
<p>对于固定的一组数据，总是能想办法设计出完美散列函数</p>
<p>但是<strong>如果数据项经常的变动，很难有一个系统性的方法来设计对应的完美散列函数（来完美的避免冲突）</strong></p>
<p>当然，冲突也不是一种致命性的错误，后面也有办法来处理</p>
<p>实现完美散列函数的一种方法是扩大散列表，大到所有可能出现的数据项都能占据不同的槽（但空间可能过大）</p>
<p>好的散列表需要具备特性：<strong>冲突最少（近似完美），计算难度低（额外开销小），充分分散数据项（节约空间）</strong></p>
<p>由于完美散列函数能够对任何不同的数据生成不同的散列值，如果把散列值当作数据的“指纹”或者“摘要”，这种特性广泛地应用在数据的一致性校验上。（完美散列函数：由任意长度的数据生成长度固定的“指纹”，还要求唯一性。这在数学上是无法做到的，但设计巧妙的“准完美“散列函数却能在实用范围内做到这一点。）</p>
<p><strong>作为一致性校验的数据“指纹”函数需要具备如下的特性：</strong></p>
<p><strong>压缩性</strong>：任意长度的数据，得到的“指纹”长度是固定的。</p>
<p><strong>易计算性</strong>：从原数据计算“指纹”非常容易</p>
<p><strong>抗修改性</strong>：对原数据的微小变动，都会引起“指纹”的大改变</p>
<p><strong>抗冲突性</strong>：已知原数据和“指纹”，要找到相同指纹的数据（伪造）是非常困难的</p>
<p>最著名的近似完美散列函数是MD5和SHA系列函数</p>
<p><strong>MD5（Message Digest）</strong>将任何长度的数据变换为固定长为128位（16字节）的“摘要”</p>
<p><strong>SHA（Secure Hash Algorithm）</strong>是另一组散列函数</p>
<hr />
<p>SHA-0/SHA-1输出散列值160位（20字节）</p>
<p>SHA-256/SHA-224分别输出256位、224位</p>
<p>SHA-512/SHA-384分别输出512位、384位</p>
<hr />
<p>虽然近年来发现MD5/SHA-0/SHA-1三种散列函数能够以极特殊的情况构造个别散列冲突，但在实用中从未有实际的威胁。</p>
<p>Python中自带散列函数库hashlab：包含md5/sha1/sha224/sha256/sha384/sha512六种散列函数</p>
<pre><code class='language-python' lang='python'>&gt;&gt;&gt; import hashlib
&gt;&gt;&gt; hashlib.md5(&quot;hello world!&quot;.encode(&#39;utf8&#39;)).hexdigest()
&#39;fc3ff98e8c6a0d3087d515c0473f8677&#39;
&gt;&gt;&gt; hashlib.sha1(&quot;hello world!&quot;.encode(&#39;utf8&#39;)).hexdigest()
&#39;430ce34d020724ed75a196dfc2ad67c77772d169&#39;
</code></pre>
<p>除了对单个字符串进行散列计算之外，还可以用update方法来对任意长的数据分部分来计算，这样不管多大的数据都不会有内存不足的问题。</p>
<pre><code class='language-python' lang='python'>&gt;&gt;&gt; import hashlib
&gt;&gt;&gt; m = hashlib.md5()
&gt;&gt;&gt; m.update(&quot;hello world!&quot;.encode(&#39;utf8&#39;))
&gt;&gt;&gt; m.update(&quot;this is part #2&quot;.encode(&#39;utf8&#39;))
&gt;&gt;&gt; m.update(&quot;this is part #3&quot;.encode(&#39;utf8&#39;))
&gt;&gt;&gt; m.hexdigest()
&#39;a12edc8332947a3e02e5668c6484b93a&#39;
</code></pre>
<p><strong>完美散列函数用于数据一致性校验</strong>：</p>
<p>为每个文件计算其散列值，仅对比其散列值即可得知是否文件内容相同</p>
<p>用于网络上文件下载完整性校验，用于文件分享系统（网盘中相同的文件可以无需存储多次）</p>
<p>加密形式保存密码：仅保存密码的散列值，用户输入密码后。计算散列值并比对，无需保存密码的明文即可判断用户是否输入了正确的密码。</p>
<p>防止文件篡改：原理同数据文件一致性判断（当然还有更多密码学机制来保护数据文件）</p>
<p>彩票投注应用：开奖后彩民通过开奖前公布的散列值和开奖后公布的结果对比来检验机构是否作弊</p>
<h4 id='区块链技术'>区块链技术</h4>
<p><strong>区块链是一种分布式的数据库：</strong></p>
<p>通过网络连接的节点，每个节点都保存着整个数据库所有数据，任何地点存入的数据都会完成同步</p>
<p>区块链最本质的特征是<strong>去中心化</strong>：不存在任何控制中心，所有节点都是平等的，无法被控制</p>
<p><strong>但如何做到不需要相互信任和权威，即可防止篡改和破坏？</strong></p>
<h5 id='区块链的数据结构'>区块链的数据结构</h5>
<p>区块链由一个个区块（block）组成，区块分为头（head）和体（body）</p>
<p><strong>区块头</strong>记录了一些元数据和连接到前一个区块的信息（生成时间、前一个区块head+body的散列值）</p>
<p><strong>区块体</strong>记录了实际数据</p>
<p>由于散列值具有抗修改性，任何对某个区块数据的改动必然引起散列值的变化：为了不导致这个区块脱离链条，就需要修改所有后续的区块，由于有“工作量证明”的机制，这种大规模修改是不可能实现的，除非掌握了全网51%以上的计算力。</p>
<h5 id='工作量证明proof-of-workpow）'><strong>工作量证明（Proof of work，POW）</strong></h5>
<p>由于区块链是大规模的分布式数据库，同步较慢，新区块的添加速度需要得到控制：目前最大规模区块链BItcoin采用的速度是平均每10分钟生成一个区块。于是大家不惜付出海量的计算，去抢着算出一个区块的<strong>有效</strong>散列值。最先算出的那位“矿工”才有资格把区块挂到区块链中。</p>
<p><strong>提问：散列不是非常容易计算吗？为什么要付出海量计算？为什么要抢先？</strong></p>
<p>因为很难算出，所以<strong>控制</strong>了新区块生成的<strong>速度</strong>，便于在整个分布式网络中进行同步</p>
<p>每个区块设置一个难度系数Difficulty，用常数targetmax除以它，得到一个target，难度系数越高，target就越小</p>
<p>矿工的工作是找到一个数值Nonce，把它和整个区块数据一起计算散列，这个散列值必须小于target，才是有效的散列值</p>
<p>由于散列值无法回推原值，这个Nonce的寻找只能靠暴力枚举，计算工作量+运气是唯一的方法</p>
<h5 id='bitcoin区块查询网站'><strong>Bitcoin区块查询网站</strong></h5>
<p><a href='https://blockexplorer.com/' target='_blank' class='url'>https://blockexplorer.com/</a></p>
<h5 id='为什么矿工抢着生成区块'><strong>为什么矿工抢着生成区块？</strong></h5>
<p>因为有利益：在加密货币Bitcoin中，区块内包含的数据是“交易记录”，也就是“账本”，这对货币体系至关重要</p>
<p>Bitcoin的每个区块中包含一定数量的比特币作为“记账奖励”，这样就鼓励了更多人加入到抢先记账的行列</p>
<p>由于硬件摩尔定律的存在，计算力将持续递增，为了维持每10分钟生成一个区块的速度，难度系数Dificulty也将持续递增</p>
<p>另外，为了保持货币总量不会无限增加，每四年奖励的比特币减半（2008年是50个，2019年是12.5个）</p>
<h4 id='散列函数设计折叠法'>散列函数设计：折叠法</h4>
<p>折叠法设计散列函数的基本步骤是：<strong>将数据项按照位数分为若干段，再将几段数据相加，最后对散列表大小求余，得到散列值</strong></p>
<hr />
<p>例如，对电话号码62767255</p>
<p>可以两位两位分为4段（62、76、71、55）相加为265</p>
<p>如果散列表包括11个槽，那么就是<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="11.689ex" height="1.882ex" role="img" focusable="false" viewBox="0 -750 5166.6 832" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-12-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-12-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-12-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-12-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path><path id="MJX-12-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-12-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-12-TEX-N-32"></use><use data-c="36" xlink:href="#MJX-12-TEX-N-36" transform="translate(500,0)"></use><use data-c="35" xlink:href="#MJX-12-TEX-N-35" transform="translate(1000,0)"></use></g><g data-mml-node="mi" transform="translate(1500,0)"><use data-c="25" xlink:href="#MJX-12-TEX-N-25"></use></g><g data-mml-node="mn" transform="translate(2333,0)"><use data-c="31" xlink:href="#MJX-12-TEX-N-31"></use><use data-c="31" xlink:href="#MJX-12-TEX-N-31" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(3610.8,0)"><use data-c="3D" xlink:href="#MJX-12-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(4666.6,0)"><use data-c="31" xlink:href="#MJX-12-TEX-N-31"></use></g></g></g></svg></mjx-container><script type="math/tex">265\%11=1</script>，所以<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="16.216ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 7167.6 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-13-TEX-N-68" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 124T102 167T103 217T103 272T103 329Q103 366 103 407T103 482T102 542T102 586T102 603Q99 622 88 628T43 637H25V660Q25 683 27 683L37 684Q47 685 66 686T103 688Q120 689 140 690T170 693T181 694H184V367Q244 442 328 442Q451 442 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-13-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-13-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-13-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-13-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-13-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-13-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-13-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-13-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="68" xlink:href="#MJX-13-TEX-N-68"></use></g></g><g data-mml-node="mo" transform="translate(556,0)"><use data-c="28" xlink:href="#MJX-13-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(945,0)"><use data-c="36" xlink:href="#MJX-13-TEX-N-36"></use><use data-c="32" xlink:href="#MJX-13-TEX-N-32" transform="translate(500,0)"></use><use data-c="37" xlink:href="#MJX-13-TEX-N-37" transform="translate(1000,0)"></use><use data-c="36" xlink:href="#MJX-13-TEX-N-36" transform="translate(1500,0)"></use><use data-c="37" xlink:href="#MJX-13-TEX-N-37" transform="translate(2000,0)"></use><use data-c="32" xlink:href="#MJX-13-TEX-N-32" transform="translate(2500,0)"></use><use data-c="35" xlink:href="#MJX-13-TEX-N-35" transform="translate(3000,0)"></use><use data-c="35" xlink:href="#MJX-13-TEX-N-35" transform="translate(3500,0)"></use></g><g data-mml-node="mo" transform="translate(4945,0)"><use data-c="29" xlink:href="#MJX-13-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(5611.8,0)"><use data-c="3D" xlink:href="#MJX-13-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(6667.6,0)"><use data-c="31" xlink:href="#MJX-13-TEX-N-31"></use></g></g></g></svg></mjx-container><script type="math/tex">\mathrm{h}(62767255)=1</script></p>
<p>有时折叠法还会包括一个<strong>隔数反转</strong>的步骤</p>
<p>比如（62、76、72、55）隔数反转为（62、67、72、55）相加为256</p>
<p>对11求余就是<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="11.689ex" height="1.882ex" role="img" focusable="false" viewBox="0 -750 5166.6 832" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-14-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-14-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-14-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-14-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path><path id="MJX-14-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-14-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-14-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-14-TEX-N-32"></use><use data-c="35" xlink:href="#MJX-14-TEX-N-35" transform="translate(500,0)"></use><use data-c="36" xlink:href="#MJX-14-TEX-N-36" transform="translate(1000,0)"></use></g><g data-mml-node="mi" transform="translate(1500,0)"><use data-c="25" xlink:href="#MJX-14-TEX-N-25"></use></g><g data-mml-node="mn" transform="translate(2333,0)"><use data-c="31" xlink:href="#MJX-14-TEX-N-31"></use><use data-c="31" xlink:href="#MJX-14-TEX-N-31" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(3610.8,0)"><use data-c="3D" xlink:href="#MJX-14-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(4666.6,0)"><use data-c="33" xlink:href="#MJX-14-TEX-N-33"></use></g></g></g></svg></mjx-container><script type="math/tex">256\%11=3</script>，所以<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="16.844ex" height="2.283ex" role="img" focusable="false" viewBox="0 -759 7445 1009" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-15-TEX-N-68" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 124T102 167T103 217T103 272T103 329Q103 366 103 407T103 482T102 542T102 586T102 603Q99 622 88 628T43 637H25V660Q25 683 27 683L37 684Q47 685 66 686T103 688Q120 689 140 690T170 693T181 694H184V367Q244 442 328 442Q451 442 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-15-TEX-V-2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path><path id="MJX-15-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-15-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-15-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-15-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-15-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-15-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-15-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-15-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="68" xlink:href="#MJX-15-TEX-N-68"></use></g></g><g data-mml-node="mo" transform="translate(589,363) scale(0.707)"><use data-c="2032" xlink:href="#MJX-15-TEX-V-2032"></use></g></g><g data-mml-node="mo" transform="translate(833.5,0)"><use data-c="28" xlink:href="#MJX-15-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(1222.5,0)"><use data-c="36" xlink:href="#MJX-15-TEX-N-36"></use><use data-c="32" xlink:href="#MJX-15-TEX-N-32" transform="translate(500,0)"></use><use data-c="37" xlink:href="#MJX-15-TEX-N-37" transform="translate(1000,0)"></use><use data-c="36" xlink:href="#MJX-15-TEX-N-36" transform="translate(1500,0)"></use><use data-c="37" xlink:href="#MJX-15-TEX-N-37" transform="translate(2000,0)"></use><use data-c="32" xlink:href="#MJX-15-TEX-N-32" transform="translate(2500,0)"></use><use data-c="35" xlink:href="#MJX-15-TEX-N-35" transform="translate(3000,0)"></use><use data-c="35" xlink:href="#MJX-15-TEX-N-35" transform="translate(3500,0)"></use></g><g data-mml-node="mo" transform="translate(5222.5,0)"><use data-c="29" xlink:href="#MJX-15-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(5889.2,0)"><use data-c="3D" xlink:href="#MJX-15-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(6945,0)"><use data-c="33" xlink:href="#MJX-15-TEX-N-33"></use></g></g></g></svg></mjx-container><script type="math/tex">\mathrm{h}’(62767255)=3</script></p>
<hr />
<p>虽然隔数反转从理论上看来毫无必要，但这个步骤确实为折叠法得到散列函数提供了一种<strong>微调</strong>手段，以便更好符合散列特性</p>
<h4 id='散列函数设计平方取中法'>散列函数设计：平方取中法</h4>
<p>首先将数据项做平方运算，然后取平方数中间的两位，再对散列表的大小求余</p>
<hr />
<p>例如对44进行散列</p>
<p>首先44*44=1936，然后取中间的93，对散列表大小11求余，得到<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="10.558ex" height="1.882ex" role="img" focusable="false" viewBox="0 -750 4666.6 832" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-16-TEX-N-39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path><path id="MJX-16-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-16-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path><path id="MJX-16-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-16-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-16-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="39" xlink:href="#MJX-16-TEX-N-39"></use><use data-c="33" xlink:href="#MJX-16-TEX-N-33" transform="translate(500,0)"></use></g><g data-mml-node="mi" transform="translate(1000,0)"><use data-c="25" xlink:href="#MJX-16-TEX-N-25"></use></g><g data-mml-node="mn" transform="translate(1833,0)"><use data-c="31" xlink:href="#MJX-16-TEX-N-31"></use><use data-c="31" xlink:href="#MJX-16-TEX-N-31" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(3110.8,0)"><use data-c="3D" xlink:href="#MJX-16-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(4166.6,0)"><use data-c="35" xlink:href="#MJX-16-TEX-N-35"></use></g></g></g></svg></mjx-container><script type="math/tex">93\%11=5</script></p>
<hr />
<h4 id='散列函数对比折叠法与平方取中法'>散列函数对比：折叠法与平方取中法</h4>
<p>对于数据集：54、26、93、17、77、31</p>
<p>简单演算知两个都是完美散列函数，分散度都很好，平方取中法计算量稍大</p>
<h4 id='散列函数设计非数项'>散列函数设计：非数项</h4>
<p>我们可以对非数字的数据项进行散列，把字符串中每个字符看作ASCII码即可</p>
<hr />
<p>如cat，<code>ord(&#39;c&#39;)==99，ord(&#39;a&#39;)==96，ord(&#39;t&#39;)==116</code>，再对这些整数累加，对散列表大小（11）求余得到4</p>
<pre><code class='language-python' lang='python'>def hash(astring, tablesize):
    sum = 0
    for pos in range(len(astring)):
        sum = sum + ord(astring[pos])
    return sum % tablesize
</code></pre>
<hr />
<p>但是，这样的散列函数对<strong>所有的变位词</strong>都返回相同的散列值</p>
<p>在需要处理变位词的体系中，可以将字符串所在的位置作为<strong>权重因子</strong>，乘以ord值</p>
<h4 id='散列函数设计评价'>散列函数设计：评价</h4>
<p>我们还可以设计出更多的散列函数方法，但要坚持的基本出发点是，散列函数不能成为存储和查找过程的计算负担</p>
<p>如果散列函数设计太过复杂，去花费大量的计算资源计算槽号，可能还不如简单地进行顺序查找或者二分查找，这也就失去了散列本身的意义。</p>
<h3 id='散列冲突解决方案'>散列冲突解决方案</h3>
<p>如果两个数据项被散列映射到同一个槽，需要一个系统化的方法在散列表中保存第二个数据项，称为“解决冲突”</p>
<p>如果散列函数是完美的，那就不会有散列冲突，但完美散列函数常常是不现实的</p>
<h4 id='开放定址open-addressing'>开放定址open addressing</h4>
<p>“<strong>开放定址open addressing</strong>”：为冲突的数据项<strong>再找一个</strong>开放的空槽来保存</p>
<p>开放定址技术中的“<strong>线性探测linear probing</strong>”：从冲突的槽开始往后扫描，直到碰到一个空槽。如果到散列表尾部还未找到，则从首部接着扫描</p>
<p>显然，如果用线性探测方法来解决冲特的话，则散列表的查找也遵循同样的规则：如果在散列位置没有找到查找项的话，就必须向后做顺序查找直到找到查找项，或者碰到空槽（查找失败）</p>
<p>线性探测法的一个缺点是有<strong>聚集（clustering）</strong>的趋势：如果同一个槽冲突的数据项较多的话，这些数据项会在槽附近聚集起来，从而影响到其他数据项的插入（解决方案：将线性探测的逐个探测改为跳跃式探测）</p>
<h4 id='再散列rehashing'>再散列<strong>rehashing</strong></h4>
<p>重新寻找空巢的过程可以用一个更加通用的说法&quot;再散列&quot;来概括<code>newhashvalue=rehash(oldhashvalue)</code></p>
<p>当正常的散列函数对应槽已被占据，则通过对槽编号进行rehashing计算插入位置（新槽编号）</p>
<p>对于线性探测来说<code>rehash(pos)=(pos+1)%sizeoftable</code></p>
<p>‘+3’的跳跃式探测则是<code>rehash(pos)=(pos+3)%sizeoftable</code></p>
<p>跳跃式探测的通式是<code>rehash(pos)=(pos+skip)%sizeoftable</code></p>
<p>对于rehashing函数的选择：最重要的是rehashing函数不能形成循环，如跳跃式探测的通式中skip的取值不能被散列表大小整除（于是我们常讲散列表的大小设置为素数）。</p>
<p>还可以将线性探测变为“二次探测quadratic probing“，如不再固定skip的值，而是逐步增加skip的值，如1、3...</p>
<h4 id='数据项链chaining'>数据项链Chaining</h4>
<p>将容纳单个数据项的槽扩展为数据项集合（或者对数据项链表的引用）</p>
<p>这样，散列表中的每个槽就可以容纳多个数据项，若有散列冲突发生，只需要将数据项添加到数据项集合中</p>
<p>查找数据项时则需要查找同一个槽中的整个集合，当然，随着散列冲突的增加，对数据项的查找时间也会相应增加</p>
<h3 id='映射抽象数据类型adt-map'>映射抽象数据类型ADT map</h3>
<p>Python最有用的数据类型之一“字典”</p>
<p>字典是一种可以保存<strong>key-data键值对</strong>的数据类型：其中关键码key可用于查询关联的数据值data</p>
<p>这种键值关联的方法称为“映射Map”</p>
<p>ADT Map的结构是键值关联的无序集合：关键码具有唯一性，通过关键码可以唯一确定一个数据值</p>
<pre><code class='language-python' lang='python'>Map()        #建立一个空映射，返回一个空映射对象
put(key,val) #将key- val关联对加入到映射中，如果key已存在，将val替换旧关联值
get(key)     #给定key，返回关联的数据值，如不存在，则返回None
del          #通过del map[key]语句删除key-val关联
len()        #返回映射中key-val关联的数目
in           #通过key in map的语句形式，返回key是否存在于关联之中，bool值
</code></pre>
<p>下面用HashTable类来实现ADT map，该类包含两个列表作为成员（slot：保存key，平行的data：保存数据项）</p>
<p>在slot列表中查找到一个key的位置之后，在data列表对应相同位置的数据项即为关联数据</p>
<pre><code class='language-python' lang='python'>class HashTable:
    def __init__(self):
        self.size = 11  # 散列表的大小应该考虑数据集的大小，且选择为素数以使冲突解决算法能有效工作
        self.slots = [None] * self.size
        self.data = [None] * self.size

    def put(self, key, data):
        hashvalue = self.hashfunction(key)
        if self.slots[hashvalue] == None:  # key不存在，未冲突
            self.slots[hashvalue] = key
            self.data[hashvalue] = data
        else:
            if self.slots[hashvalue] == key:  # key已存在，替换为val
                self.data[hashvalue] = data
            else:  # 散列冲突，再散列
                nextslot = self.rehash(hashvalue)
                while self.slots[nextslot] != None and \
                        self.slots[nextslot] != key:
                    nextslot = self.rehash(nextslot)

                if self.slots[nextslot] == None:
                    self.slots[nextslot] = key
                    self.data[nextslot] = data
                else:
                    self.data[nextslot] = data

    def hashfunction(self, key):
        return key % self.size

    def rehash(self, oldhash):
        return (oldhash + 1) % self.size

    def get(self, key):
        startslot = self.hashfunction(key)  # 标记散列值为查找起点
        data = None
        stop = False
        found = False
        position = startslot
        # 找key，直到空槽或回到起点
        while self.slots[position] != None and \
                not found and not stop:
            if self.slots[position] == key:
                found = True
                data = self.data[position]
            else:  # 未找到key，再散列继续找
                position = self.rehash(position)
                if position == startslot:
                    stop = True  # 回到起点，停
        return data

    # 通过特殊方法实现[]访问
    def __getitem__(self, key):
        return self.get(key)

    def __setitem__(self, key, data):
        self.put(key, data)


H = HashTable()
H[54] = &#39;cat&#39;
H[26] = &#39;dog&#39;
H[93] = &#39;lion&#39;
H[17] = &#39;tiger&#39;
H[77] = &#39;bird&#39;
H[31] = &#39;cow&#39;
H[44] = &#39;goat&#39;
H[55] = &#39;pig&#39;
H[20] = &#39;chicken&#39;
print(H.slots)
print(H.data)
print(H[20])
print(H[17])
H[20] = &#39;duck&#39;
print(H[20])
print(H[99])

#输出
#[77, 44, 55, 20, 26, 93, 17, None, None, 31, 54]
#[&#39;bird&#39;, &#39;goat&#39;, &#39;pig&#39;, &#39;chicken&#39;, &#39;dog&#39;, &#39;lion&#39;, &#39;tiger&#39;, None, None, &#39;cow&#39;, &#39;cat&#39;]
#chicken
#tiger
#duck
#None
</code></pre>
<h4 id='散列算法分析'>散列算法分析</h4>
<p><strong>散列在最好的情况下，可以提供O(1)常数级的时间复杂度的查找性能</strong></p>
<p>但是由于散列冲突的存在，查找比较次数就没有这么简单</p>
<p>评估散列冲突的最重要信息是<strong>负载因子<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.319ex" height="1.597ex" role="img" focusable="false" viewBox="0 -694 583 706" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.027ex;"><defs><path id="MJX-26-TEX-I-1D706" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D706" xlink:href="#MJX-26-TEX-I-1D706"></use></g></g></g></svg></mjx-container><script type="math/tex">\lambda</script></strong>，一般来说：</p>
<p>如果<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.319ex" height="1.597ex" role="img" focusable="false" viewBox="0 -694 583 706" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.027ex;"><defs><path id="MJX-26-TEX-I-1D706" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D706" xlink:href="#MJX-26-TEX-I-1D706"></use></g></g></g></svg></mjx-container><script type="math/tex">\lambda</script>较小，散列冲突的几率就越小，数据项通常会保存在其所属的散列槽中</p>
<p>如果<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.319ex" height="1.597ex" role="img" focusable="false" viewBox="0 -694 583 706" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.027ex;"><defs><path id="MJX-26-TEX-I-1D706" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D706" xlink:href="#MJX-26-TEX-I-1D706"></use></g></g></g></svg></mjx-container><script type="math/tex">\lambda</script>较大，散列表填充较满，冲突会越来越多，冲突解决也越复杂，也就需要更多的比较来找到空槽，如果采用数据链的话，意味着每条链上的数据项增多</p>
<p>如果采用线性探测的开放定址法来解决冲突（<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="9.114ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 4028.2 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-20-TEX-I-1D706" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path><path id="MJX-20-TEX-N-2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"></path><path id="MJX-20-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-20-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-20-TEX-N-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path id="MJX-20-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-20-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D706" xlink:href="#MJX-20-TEX-I-1D706"></use></g><g data-mml-node="mo" transform="translate(860.8,0)"><use data-c="2208" xlink:href="#MJX-20-TEX-N-2208"></use></g><g data-mml-node="mo" transform="translate(1805.6,0)"><use data-c="28" xlink:href="#MJX-20-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(2194.6,0)"><use data-c="30" xlink:href="#MJX-20-TEX-N-30"></use></g><g data-mml-node="mo" transform="translate(2694.6,0)"><use data-c="2C" xlink:href="#MJX-20-TEX-N-2C"></use></g><g data-mml-node="mn" transform="translate(3139.2,0)"><use data-c="31" xlink:href="#MJX-20-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(3639.2,0)"><use data-c="29" xlink:href="#MJX-20-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">\lambda\in(0,1)</script>）:</p>
<p>成功查找，平均需要比对<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="11.425ex" height="2.869ex" role="img" focusable="false" viewBox="0 -864.9 5049.9 1267.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.912ex;"><defs><path id="MJX-21-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-21-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-21-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-21-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-21-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-21-TEX-I-1D706" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path><path id="MJX-21-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mfrac"><g data-mml-node="mn" transform="translate(220,394) scale(0.707)"><use data-c="31" xlink:href="#MJX-21-TEX-N-31"></use></g><g data-mml-node="mn" transform="translate(220,-345) scale(0.707)"><use data-c="32" xlink:href="#MJX-21-TEX-N-32"></use></g><rect width="553.6" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(793.6,0)"><use data-c="28" xlink:href="#MJX-21-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(1182.6,0)"><use data-c="31" xlink:href="#MJX-21-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(1904.8,0)"><use data-c="2B" xlink:href="#MJX-21-TEX-N-2B"></use></g><g data-mml-node="mfrac" transform="translate(2905,0)"><g data-mml-node="mn" transform="translate(701.2,394) scale(0.707)"><use data-c="31" xlink:href="#MJX-21-TEX-N-31"></use></g><g data-mml-node="mrow" transform="translate(220,-345) scale(0.707)"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-21-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(500,0)"><use data-c="2212" xlink:href="#MJX-21-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1278,0)"><use data-c="1D706" xlink:href="#MJX-21-TEX-I-1D706"></use></g></g><rect width="1515.9" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(4660.9,0)"><use data-c="29" xlink:href="#MJX-21-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">\frac{1}{2}(1+\frac{1}{1-\lambda})</script>次</p>
<p>不成功查找，平均需要比对<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="14.485ex" height="2.869ex" role="img" focusable="false" viewBox="0 -864.9 6402.5 1267.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.912ex;"><defs><path id="MJX-22-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-22-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-22-TEX-SO-28" d="M152 251Q152 646 388 850H416Q422 844 422 841Q422 837 403 816T357 753T302 649T255 482T236 250Q236 124 255 19T301 -147T356 -251T403 -315T422 -340Q422 -343 416 -349H388Q359 -325 332 -296T271 -213T212 -97T170 56T152 251Z"></path><path id="MJX-22-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-22-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-22-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-22-TEX-I-1D706" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path><path id="MJX-22-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-22-TEX-SO-29" d="M305 251Q305 -145 69 -349H56Q43 -349 39 -347T35 -338Q37 -333 60 -307T108 -239T160 -136T204 27T221 250T204 473T160 636T108 740T60 807T35 839Q35 850 50 850H56H69Q197 743 256 566Q305 425 305 251Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mfrac"><g data-mml-node="mn" transform="translate(220,394) scale(0.707)"><use data-c="31" xlink:href="#MJX-22-TEX-N-31"></use></g><g data-mml-node="mn" transform="translate(220,-345) scale(0.707)"><use data-c="32" xlink:href="#MJX-22-TEX-N-32"></use></g><rect width="553.6" height="60" x="120" y="220"></rect></g><g data-mml-node="mrow" transform="translate(793.6,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="28" xlink:href="#MJX-22-TEX-SO-28"></use></g><g data-mml-node="mn" transform="translate(458,0)"><use data-c="31" xlink:href="#MJX-22-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(1180.2,0)"><use data-c="2B" xlink:href="#MJX-22-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(2180.4,0)"><use data-c="28" xlink:href="#MJX-22-TEX-N-28"></use></g><g data-mml-node="mfrac" transform="translate(2569.4,0)"><g data-mml-node="mn" transform="translate(701.2,394) scale(0.707)"><use data-c="31" xlink:href="#MJX-22-TEX-N-31"></use></g><g data-mml-node="mrow" transform="translate(220,-345) scale(0.707)"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-22-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(500,0)"><use data-c="2212" xlink:href="#MJX-22-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1278,0)"><use data-c="1D706" xlink:href="#MJX-22-TEX-I-1D706"></use></g></g><rect width="1515.9" height="60" x="120" y="220"></rect></g><g data-mml-node="msup" transform="translate(4325.4,0)"><g data-mml-node="mo"><use data-c="29" xlink:href="#MJX-22-TEX-N-29"></use></g><g data-mml-node="mn" transform="translate(422,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-22-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(5150.9,0) translate(0 -0.5)"><use data-c="29" xlink:href="#MJX-22-TEX-SO-29"></use></g></g></g></g></svg></mjx-container><script type="math/tex">\frac{1}{2}\left(1+(\frac{1}{1-\lambda})^2\right)</script>次</p>
<p>如果采用数据链来解决冲突(<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.319ex" height="1.597ex" role="img" focusable="false" viewBox="0 -694 583 706" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.027ex;"><defs><path id="MJX-26-TEX-I-1D706" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D706" xlink:href="#MJX-26-TEX-I-1D706"></use></g></g></g></svg></mjx-container><script type="math/tex">\lambda</script>可大于<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: 0px;"><defs><path id="MJX-24-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-24-TEX-N-31"></use></g></g></g></svg></mjx-container><script type="math/tex">1</script>)</p>
<p>成功查找，平均需要比对<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="7.478ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3305.4 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-25-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-25-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-25-TEX-I-1D706" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path><path id="MJX-25-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-25-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-25-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(722.2,0)"><use data-c="2B" xlink:href="#MJX-25-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(1722.4,0)"><use data-c="1D706" xlink:href="#MJX-25-TEX-I-1D706"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2305.4,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-25-TEX-N-2F"></use></g></g><g data-mml-node="mn" transform="translate(2805.4,0)"><use data-c="32" xlink:href="#MJX-25-TEX-N-32"></use></g></g></g></svg></mjx-container><script type="math/tex">1+\lambda/2</script>次</p>
<p>不成功查找，平均需要比对<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.319ex" height="1.597ex" role="img" focusable="false" viewBox="0 -694 583 706" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.027ex;"><defs><path id="MJX-26-TEX-I-1D706" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D706" xlink:href="#MJX-26-TEX-I-1D706"></use></g></g></g></svg></mjx-container><script type="math/tex">\lambda</script>次</p>
<h3 id='排序与查找小结'>排序与查找小结</h3>
<h4 id='查找算法'>查找算法</h4>
<p>在无序表或者有序表上的顺序查找，时间复杂度O(n)</p>
<p>在有序表上进行二分查找，其最差复杂度为O(log n)</p>
<p>散列表可以实现常数级时间的查找</p>
<p>完美散列函数作为数据一致性的校验，应用很广</p>
<p>区块链技术作为一种去中心化的分布式数据库，通过“工作量证明”机制来维持运行</p>
<h4 id='排序算法-2'>排序算法</h4>
<p>冒泡、选择、插入排序都是O(n^2)的算法</p>
<p>谢尔排序对插入排序进行了改进，采用对递增子表排序的方法，其时间复杂度是在O(n)和O(n^2)之间的指数</p>
<p>归并排序的时间复杂度是O(nlog n)，但是归并的过程中需要额外存储空间</p>
<p>快速排序最好的时间复杂度是O(nlog n)，也不需要额外的存储空间，但如果分裂点偏离列表中心的话，最坏情况会退化到O(n^2)</p>
<h2 id='树'>树</h2>
<h3 id='树的简介'>树的简介</h3>
<p><strong>树</strong>是一种<strong>非线性</strong>的数据结构</p>
<p>数据结构的树分为三部分：根，枝，叶（但一般树的数据结构的图示把根放在上方，叶放在下方）</p>
<p><strong>节点Node</strong>：每个节点具有名称，或“键值”，节点还可以保存额外数据项，数据项根据不同的应用而变。</p>
<p><strong>边Edge</strong>：每条边恰好连接两个节点，表示节点之间具有关联，边具有出入方向。</p>
<p>每个节点（除根节点）恰有一条来自另一节点的入边；每个节点可以有多条连接到其他节点的出边。</p>
<p><strong>子节点Children</strong>：入边均来自于同一个节点的若干节点，称为这个节点的子节点。</p>
<p><strong>父节点Parent</strong>：一个节点是其所有出边所连接的父节点。</p>
<p><strong>兄弟节点Sibling</strong>：具有同一个父节点的节点之间称为兄弟节点。</p>
<p><strong>子树Subtree</strong>：一个节点和其所有子孙节点，以及相关边的集合。</p>
<p><strong>叶节点Leaf</strong>：没有子节点的节点称为叶节点。</p>
<p><strong>层级Level</strong>：从根节点开始到达一个节点的路径所包含边的数量，称为这个节点的层级。</p>
<p><strong>高度Height</strong>：树中所有节点的最大层级称为树的高度。</p>
<h3 id='树的定义'>树的定义</h3>
<h4 id='通常定义'>通常定义</h4>
<p>树由若干<strong>节点</strong>，以及两两连接节点的<strong>边</strong>组成，并有如下性质：</p>
<ol start='' >
<li>其中一个节点设定为根。</li>
<li>每个节点n（除根节点外）都恰连接<strong>一条</strong>来自节点p的边，p是n的父节点。</li>
<li>每个节点从根开始的路径是唯一的</li>
<li>如果每个节点最多有两个子节点，这样的树被称为“二叉树”</li>

</ol>
<h4 id='递归定义'>递归定义</h4>
<p><strong>树是：</strong></p>
<p>空集；或者由根节点及0或多个子树构成（其中子树也是树），每个子树的根到根节点具有边相连</p>
<h3 id='树的嵌套列表实现'>树的嵌套列表实现</h3>
<p>首先尝试用Python List来实现二叉树数据结构</p>
<p>递归的嵌套列表实现二叉树，由具有三个元素的列表实现：（根节点的值，左子树，右子树）<code>[root,left,right]</code></p>
<p>嵌套列表法的优点：子表的结构与树相同，是一种递归数据结构；很容易拓展到多叉树，只需要增加列表元素即可。</p>
<p>同时，我们需要定义一系列函数来辅助操作嵌套列表。</p>
<pre><code class='language-python' lang='python'>BinaryTree #创建仅有根节点的二叉树
insertLeft/insertRight #将新节点插入树中作为其直接的左/右节点，原来若有左/右节点则替换为新建的左/右节点的左/右节点
get/setRootVal #取得或返回根节点
getLeft/RightChild #返回左右子树
</code></pre>
<pre><code class='language-python' lang='python'>def BinaryTree(r):
    return [r,[],[]]

def insertLeft(root,newBranch):
    t=root.pop(1)
    if len(t)&gt;1:
        root.insert(1,[newBranch,t,[]])
    else:
        root.insert(1,[newBranch,[],[]])
    return root

def insertRight(root,newBranch):
    t=root.pop(2)
    if len(t)&gt;1:
        root.insert(2,[newBranch,[],t])
    else:
        root.insert(2,[newBranch,[],[]])
    return root

def getRootVal(root):
    return root[0]

def setRootVal(root,newVal):
    root[0]=newVal

def getLeftChild(root):
    return root[1]

def getRightChild(root):
    return root[2]
</code></pre>
<p>实现树：嵌套列表法例</p>
<pre><code class='language-python' lang='python'>r = BinaryTree(3)
insertLeft(r, 4)
insertLeft(r, 5)
insertRight(r, 6)
insertRight(r, 7)
l = getLeftChild(r)
print(l)

setRootVal(l, 9)
print(r)
insertLeft(l, 11)
print(r)
print(getRightChild(getRightChild(r)))

#output:
#[5, [4, [], []], []]
#[3, [9, [4, [], []], []], [7, [], [6, [], []]]]
#[3, [9, [11, [4, [], []], []], []], [7, [], [6, [], []]]]
#[6, [], []]
</code></pre>
<h3 id='树的链表实现'>树的链表实现</h3>
<p>用节点链接法来实现树：每个节点保存根节点的数据项，以及指向左右子树的链接。</p>
<p>实现方式：定义一个Binary Tree类</p>
<p>成员key保存根节点数据项</p>
<p>成员left/rightChild则保存指向左右子树的引用（同样是BinaryTree对象）</p>
<pre><code class='language-python' lang='python'>class BinaryTree:
    def __init__(self, rootObj):
        self.key = rootObj
        self.leftChild = None
        self.rightChild = None

    def insertLeft(self, newNode):
        if self.leftChild==None:
            self.leftChild = BinaryTree(newNode)
        else:
            t = BinaryTree(newNode)
            t.leftChild = self.leftChild
            self.leftChild = t

    def insertRight(self, newNode):
        if self.rightChild==None:
            self.rightChild = BinaryTree(newNode)
        else:
            t = BinaryTree(newNode)
            t.rightChild = self.rightChild
            self.rightChild = t

    def getRightChild(self):
        return self.rightChild

    def getLeftChild(self):
        return self.leftChild

    def setRootVal(self, obj):
        self.key = obj

    def getRootVal(self):
        return self.key
</code></pre>
<h3 id='树的应用表达式解析'>树的应用：表达式解析</h3>
<p>将树用于表示语言中的句子，可以分析句子的各种语法成分，对于句子的各种成分进行处理。</p>
<p>我们还可以将表达式表示为树结构：叶节点保存操作数，内部节点保存操作符</p>
<p>对于全括号表达式<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="15.713ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6945.3 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-27-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-27-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-27-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-27-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-27-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-27-TEX-N-2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path><path id="MJX-27-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-27-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-27-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="28" xlink:href="#MJX-27-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(389,0)"><use data-c="37" xlink:href="#MJX-27-TEX-N-37"></use></g><g data-mml-node="mo" transform="translate(1111.2,0)"><use data-c="2B" xlink:href="#MJX-27-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(2111.4,0)"><use data-c="33" xlink:href="#MJX-27-TEX-N-33"></use></g><g data-mml-node="mo" transform="translate(2611.4,0)"><use data-c="29" xlink:href="#MJX-27-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(3222.7,0)"><use data-c="2217" xlink:href="#MJX-27-TEX-N-2217"></use></g><g data-mml-node="mo" transform="translate(3944.9,0)"><use data-c="28" xlink:href="#MJX-27-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(4333.9,0)"><use data-c="35" xlink:href="#MJX-27-TEX-N-35"></use></g><g data-mml-node="mo" transform="translate(5056.1,0)"><use data-c="2212" xlink:href="#MJX-27-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(6056.3,0)"><use data-c="32" xlink:href="#MJX-27-TEX-N-32"></use></g><g data-mml-node="mo" transform="translate(6556.3,0)"><use data-c="29" xlink:href="#MJX-27-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">(7+3)*(5-2)</script>：由于括号的存在，需要计算*的话，就必须先计算<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="5.028ex" height="1.715ex" role="img" focusable="false" viewBox="0 -676 2222.4 758" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-28-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-28-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-28-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="37" xlink:href="#MJX-28-TEX-N-37"></use></g><g data-mml-node="mo" transform="translate(722.2,0)"><use data-c="2B" xlink:href="#MJX-28-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(1722.4,0)"><use data-c="33" xlink:href="#MJX-28-TEX-N-33"></use></g></g></g></svg></mjx-container><script type="math/tex">7+3</script>和<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="5.028ex" height="1.692ex" role="img" focusable="false" viewBox="0 -666 2222.4 748" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-29-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-29-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-29-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="35" xlink:href="#MJX-29-TEX-N-35"></use></g><g data-mml-node="mo" transform="translate(722.2,0)"><use data-c="2212" xlink:href="#MJX-29-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1722.4,0)"><use data-c="32" xlink:href="#MJX-29-TEX-N-32"></use></g></g></g></svg></mjx-container><script type="math/tex">5-2</script>，表达式层次决定计算的优先级。越底层的表达式，优先级越高。</p>
<p>树中的每一个子树都表示一个子表达式：将子树替换为子表达式的节点（树-&gt;叶），即可实现求值。</p>
<h4 id='表达式解析树'>表达式解析树</h4>
<ol start='' >
<li>从全括号表达式构建表达式解析树</li>
<li>利用表达式解析树对表达式求值</li>
<li>从表达式解析树恢复原表达式的字符串形式</li>

</ol>
<h4 id='表达式解析树的构建'>表达式解析树的构建</h4>
<p>首先，全括号表达式要分解为单词Token和列表</p>
<ol start='' >
<li>单词区分为括号&quot;()&quot;、操作符&quot;+-*/&quot;和操作数&quot;0~9&quot;这几类</li>
<li>左括号是表达式的开始，右括号是表达式的结束</li>

</ol>
<p><strong>示例：3+(4*5)</strong></p>
<ol start='' >
<li>分解为单词表<code>[&#39;(&#39;,&#39;3&#39;,&#39;+&#39;,&#39;(&#39;,&#39;4&#39;,&#39;*&#39;,&#39;5&#39;,&#39;)&#39;,&#39;)&#39;]</code></li>
<li>创建空树，当前节点为根节点</li>
<li>左括号：<strong>创建</strong>左子节点，当前节点<strong>下降</strong>
数字：将当前节点<strong>设置</strong>为该数字，并<strong>上升</strong>至父节点
操作符：将当前节点<strong>设置</strong>为该操作符，<strong>创建</strong>右子节点，当前节点下降</li>

</ol>
<p>从示例中可以看到，创建树过程中关键是对当前节点的跟踪：</p>
<ol start='' >
<li>创建左右子树可以调用insertLeft/Right</li>
<li>当前节点设置值，可以调用setRootVal</li>
<li>下降到左右子树可以调用getLeft/RightChild</li>
<li><strong>上升到父节点，没有现有方法支持</strong>：类比网站的路径，可以用一个栈来记录跟踪父节点
当前节点下降时，将下降的节点push入栈
当前节点需要上升到父节点时，上升到pop出栈的节点即可</li>

</ol>
<pre><code class='language-python' lang='python'>def buildParseTree(fpexp):
    fplist = fpexp.split()
    pStack = Stack()
    eTree = BinaryTree(&#39;&#39;)
    pStack.push(eTree)  # 入栈下降
    currentTree = eTree
    for i in fplist:  # 表达式处理
        if i == &#39;(&#39;:  # 左括号
            currentTree.insertLeft(&#39;&#39;)
            pStack.push(currentTree)
            currentTree = currentTree.getLeftChild()
        elif i not in [&#39;+&#39;, &#39;-&#39;, &#39;*&#39;, &#39;/&#39;, &#39;)&#39;]:  # 操作数
            currentTree.setRootVal(int(i))
            parent = pStack.pop()
            currentTree = parent
        elif i in [&#39;+&#39;, &#39;-&#39;, &#39;*&#39;, &#39;/&#39;]:
            currentTree.setRootVal(i)
            currentTree.insertRight(&#39;&#39;)
            pStack.push(currentTree)
            currentTree=currentTree.getRightChild()
        elif i == &#39;)&#39;:
            currentTree=pStack.pop()
        else:
            raise ValueError
    return eTree
</code></pre>
<h4 id='表达式解析树的求值'>表达式解析树的求值</h4>
<p>由于二叉树BinaryTree是一个递归数据结构，自然可以用递归算法来处理</p>
<p>求值递归函数<code>evaluate</code>：由前述对子表达式的描述，可从树的底层子树开始，逐步向上层求值，最终得到整个表达式的值。</p>
<p><strong>基本结束条件</strong>：叶节点是最简单的子树，没有左右子节点，其根节点的数据项即为子表达式树的值</p>
<p><strong>缩小规模</strong>：将表达式分为左子树、右子树，即为缩小规模</p>
<p><strong>调用自身</strong>：分别调用evaluate计算左右子树的值，然后将左右子树的值依据根节点的操作符进行计算，从而得到表达式的值。</p>
<h5 id='一个增加程序可读性的技巧函数引用'>一个增加程序可读性的技巧：函数引用</h5>
<pre><code class='language-python' lang='python'>import operator

print(operator.add(1, 2))
op = operator.add
print(op(1, 2))
</code></pre>
<p>于是可以定义</p>
<pre><code class='language-python' lang='python'>opers = {&#39;+&#39;: operator.add, &#39;-&#39;: operator.sub, \
         &#39;*&#39;: operator.mul, &#39;/&#39;: operator.truediv}
</code></pre>
<p>求值函数代码</p>
<pre><code class='language-python' lang='python'>def evaluate(parseTree):
    opers = {&#39;+&#39;: operator.add, &#39;-&#39;: operator.sub, \
             &#39;*&#39;: operator.mul, &#39;/&#39;: operator.truediv}

    leftC = parseTree.getLeftChild()
    rightC = parseTree.getRightChild()

    if leftC and rightC:
        fn = opers[parseTree.getRootVal()]
        return fn(evaluate(leftC), evaluate(rightC))
    else:
        return parseTree.getRootVal()
</code></pre>
<h3 id='树的遍历'>树的遍历</h3>
<p>对一个数据集中的所有数据项进行访问的操作称为“遍历Traversal”</p>
<p>线性数据结构中，其对所有数据项的访问比较简单直接，按照顺序依次访问即可</p>
<p>树的非线性特点，使得遍历操作较为复杂</p>
<p>我们按照对节点访问次序的不同来区分三种遍历</p>
<ol start='' >
<li>前序遍历preorder：先访问根节点，再递归地前序访问左子树，最后前序访问右子树
前序遍历的例子：书的阅读Book-&gt;Ch1-&gt;S1.1-&gt;S1.2-&gt;Ch2-&gt;...</li>
<li>中序遍历inorder：先递归地中序访问左子树，再访问根节点，最后中序访问右子树</li>
<li>后序遍历postorder：先递归地后序访问左子树，再后序访问右子树，最后访问根节点</li>

</ol>
<h4 id='遍历代码'>遍历代码</h4>
<pre><code class='language-python' lang='python'>def preorder(tree):  # 前序遍历
    if tree != None:
        print(tree.getRootVal())
        preorder(tree.getLeftChild())
        preorder(tree.getRightChild())


def postorder(tree):  # 后序遍历
    if tree != None:
        postorder(tree.getLeftChild())
        postorder(tree.getRightChild())
        print(tree.getRootVal())


def inorder(tree):  # 中序遍历
    if tree != None:
        inorder(tree.getLeftChild())
        print(tree.getRootVal())
        inorder(tree.getRightChild())
</code></pre>
<p>也可以在BinaryTree类中实现前序遍历（需要加入子树是否为空的判断）</p>
<pre><code class='language-python' lang='python'>def preorder(self):
    print(self.key)
    if self.leftChild:
        self.leftChild.preorder()
    if self.rightChild:
        self.rightChild.preorder()
</code></pre>
<h4 id='后序遍历表达式求值'>后序遍历：表达式求值</h4>
<pre><code class='language-python' lang='python'>def postordereval(tree):
    opers = {&#39;+&#39;: operator.add, &#39;-&#39;: operator.sub, \
             &#39;*&#39;: operator.mul, &#39;/&#39;: operator.truediv}
    res1 = None
    res2 = None
    if tree:
        res1 = postordereval(tree.getLeftChild())
        res2 = postordereval(tree.getRightChild())
        if res1 and res2:
            return opers[tree.getRootVal()](res1, res2)
        else:
            return tree.getRootVal()
</code></pre>
<h4 id='中序遍历生成全括号中缀表达式'>中序遍历：生成全括号中缀表达式</h4>
<pre><code class='language-python' lang='python'>def printexp(tree):
    sVal = &#39;&#39;
    if tree:
        if tree.getRootVal not in [&#39;+&#39;, &#39;-&#39;, &#39;*&#39;, &#39;/&#39;]:
            sVal = &#39;(&#39; + printexp(tree.getLeftChild())
            sVal = sVal + str(tree.getRootVal())
            sVal = sVal + printexp(tree.getRightChild()) + &#39;)&#39;
        else:
            sVal = sVal + str(tree.getRootVal())
    return sVal
</code></pre>
<h3 id='二叉堆binary-heap'>二叉堆Binary Heap</h3>
<p>前面我们学习了一种FIFO数据结构队列，队列有一种变体称为“优先队列”</p>
<p>优先队列的出队跟队列一样从对首出队，但是在优先队列内部，数据项的次序却是由“优先级”决定（<strong>高优先级的数据项排在对首</strong>，这样，优先队列的入队操作就比较复杂。）</p>
<p><strong>实现优先队列的经典方案是采用二叉堆Binary Heap数据结构</strong>：它能将优先队列的入队和出队复杂度都保持在O(log n)</p>
<p>二叉堆的有趣之处在于，其逻辑结构上像二叉树，却是用非嵌套的列表来实现的。</p>
<p>最小Key排在对首的称为最小堆min Heap，最大key排在对首的称为最大堆max Heap</p>
<h4 id='adt-binaryheap'>ADT BinaryHeap</h4>
<pre><code class='language-python' lang='python'>BinaryHeap() #创建一个空二叉堆表
insert(k)    #将新key加入堆中
findMin()    #返回堆中的最小项，最小项仍保留在堆中
delMin()     #返回堆中的最小项，同时从堆中删除
isEmpty()    #返回堆是否为空
size()       #返回堆中key的个数
buildHeap(list) #从一个key列表创建新堆
#from pythonds.trees.binheap import BinHeap
</code></pre>
<p>为了使堆操作能保持在对数水平上，就必须采用二叉树结构；</p>
<p>同时，如果要使操作始终保持在对数数量级上，就必须始终保持二叉树的平衡（树根左右子树拥有相同数量的节点）</p>
<p>我们采用<strong>“完全二叉树“</strong>的结构来<strong>近似</strong>实现平衡</p>
<p>完全二叉树：叶节点最多只出现在最底层和次底层，而且最底层的叶节点都连续集中在最左边，每个内部节点都有两个子节点，<strong>最多可有一个节点例外</strong></p>
<p>完全二叉树由于其特殊性，可以用非嵌套列表以简单的方式来实现，且具有很好的性质。</p>
<p>如果节点的下标为p，那么其左子节点下标为2p，右子节点的下标为2p+1，其父节点的下标为p//2</p>
<h4 id='堆次序heap-order'>堆次序Heap Order</h4>
<p>任何一个节点x，其父节点p中的key均小于x中的key</p>
<p>这样，符合“堆”性质的二叉树，其中<strong>任何一条路径，均是一个已排序序列</strong>，且<strong>根节点的key最小</strong></p>
<h4 id='二叉堆python实现'>二叉堆python实现</h4>
<pre><code class='language-python' lang='python'>#二叉堆初始化（采用列表保存堆数据，其中队首下标0无用，为了使根节点的下标为1，以使节点下标关系简单化）
class BinHeap:
    def __init__(self):
        self.heapList = [0]
        self.currentSize = 0

    # insert(key)细节：新key直接加在列表末尾，可能无法维持&quot;堆&quot;次序
    # 虽然对其他路径的次序没有影响，但是对于其到根节点的路径可能会破坏次序
    # 需要将新key上浮到正确位置，注意稍加分析就知道新key的上浮不会影响其他路径节点的堆次序
    def percUp(self, i):
        while i // 2 &gt; 0:
            if self.heapList[i] &lt; self.heapList[i // 2]:  # 与父节点比较并交换
                self.heapList[i], self.heapList[i // 2] = \
                    self.heapList[i // 2], self.heapList[i]
            else:
                break
            i = i // 2

    def insert(self, k):
        self.heapList.append(k)  # 添加到末尾
        self.currentSize = self.currentSize + 1
        self.percUp(self.currentSize)  # 新key上浮

    # delMin()细节：移走整个堆中最小的key,即根节点heapList[1]
    # 为了保持完全二叉树的性质，变动最小的方案是用最后一个节点来代替根节点
    # 类似的通过下沉来解决替换过程对堆次序的破坏，下沉直到这个节点比两个子节点都小时停止
    # 下沉路径的选择？应当选择较小的子节点交换下沉

    def percDown(self, i):
        while (i * 2) &lt;= self.currentSize:
            mc = self.minChild(i)
            if self.heapList[i] &gt; self.heapList[mc]:
                self.heapList[i], self.heapList[mc] = self.heapList[mc] , self.heapList[i]
            else:
                break
            i = mc

    def minChild(self, i):
        if i * 2 + 1 &gt; self.currentSize:  # 唯一子节点
            return i * 2
        else:
            if self.heapList[i * 2] &lt; self.heapList[i * 2 + 1]:
                return i * 2
            else:
                return i * 2 + 1

    def delMin(self):
        retval = self.heapList[1]  # 移走堆顶
        self.heapList[1] = self.heapList[self.currentSize]
        self.currentSize = self.currentSize - 1
        self.heapList.pop()
        self.percDown(1)
        return retval

    # buildHeap(lst)细节：最自然的想法是用insert(key)方法逐个插入，但这样的时间复杂度是O(nlog n)
    # 其实用&quot;下沉&quot;法,能够将总代价控制在O(n)，直接把原来的lst看成堆再进行调整
    def buildHeap(self, alist):
        i = len(alist) // 2 #从最后节点的父节点开始，因为叶节点都不需要下沉
        self.currentSize = len(alist)
        self.heapList = [0] + alist[:]
        #print(len(self.heapList), i)
        while i &gt; 0:
            #print(self.heapList, i)
            self.percDown(i)
            i = i - 1
        #print(self.heapList, i)
</code></pre>
<p>堆排序算法的复杂度O(nlog n)</p>
<h3 id='二叉查找树binary-search-tree'>二叉查找树Binary Search Tree</h3>
<p>在<strong>ADT Map</strong>的实现方案中，可以采用不同的数据结构和搜索算法来保存和查找key（如有序表+二分搜索；散列表+散列&amp;冲突处理）</p>
<p>下面尝试使用二叉查找树保存key，实现key的快速检索</p>
<p>复习一下ADT map的操作</p>
<pre><code class='language-python' lang='python'>Map()        #建立一个空映射，返回一个空映射对象
put(key,val) #将key- val关联对加入到映射中，如果key已存在，将val替换旧关联值
get(key)     #给定key，返回关联的数据值，如不存在，则返回None
del          #通过del map[key]语句删除key-val关联
len()        #返回映射中key-val关联的数目
in           #通过key in map的语句形式，返回key是否存在于关联之中，bool值
</code></pre>
<p><strong>二叉查找树BST</strong>的性质（目标要实现的树）：<strong>比父节点小的key都出现在左子树，比父节点大的key都出现在右子树</strong></p>
<p>构造二叉查找树的过程：从根节点开始选择下沉路径产生新的叶节点（这样生成的BST将与插入数据的顺序有关）</p>
<p><strong>二叉查找树的实现：节点和链接结构</strong>(需要用到<strong>BST和TreeNode两个类</strong>，BST的root成员引用根节点TreeNode)</p>
<p>以下为这两个类的基础定义，下节将补充二叉查找树的特殊方法</p>
<pre><code class='language-python' lang='python'>class BinarySearchTree:
    def __init__(self):
        self.root = None
        self.size = 0

    def length(self):
        return self.size

    def __len__(self):
        return self.size

    def __iter__(self):  # 迭代for node in BST
        return self.root.__iter__()


class TreeNode:
    def __init__(self, key, val, left=None, \
                 right=None, parent=None):
        self.key = key
        self.payload = val
        self.leftChild = left
        self.rightChild = right
        self.parent = parent

    def hasLeftChild(self):
        return self.leftChild

    def hasRightChild(self):
        return self.rightChild

    def isLeftChild(self):
        return self.parent and \
               self.parent.leftChild == self

    def isRightChild(self):
        return self.parent and \
               self.parent.rightChild == self

    def isRoot(self):
        return not self.parent

    def isLeaf(self):
        return not (self.rightChild or self.leftChild)

    def hasAnyChildren(self):
        return self.rightChild or self.leftChild

    def hasBothChildren(self):
        return self.rightChild and self.leftChild

    def replaceNodeData(self,key,value,lc,rc):
        self.key=key
        self.payload=value
        self.leftChild=lc
        self.rightChild=rc
        if self.hasLeftChild():
            self.leftChild.parent=self
        if self.hasRightChild():
            self.rightChild.parent=self
</code></pre>
<h4 id='二叉查找树的实现'><strong>二叉查找树的实现</strong></h4>
<p>已经引用了上节的BST和TreeNode两个类，以下为对BST类的补充方法</p>
<pre><code class='language-python' lang='python'>class BinarySearchTree:
    def __init__(self):
        self.root = None
        self.size = 0

    def length(self):
        return self.size

    def __len__(self):
        return self.size

    def __iter__(self):  # 迭代for node in BST
        return self.root.__iter__()

    def put(self, key, val):  # 向树中加入值
        if self.root:  # 如果BST不为空，则调用递归_put方法来放置key
            self._put(key, val, self.root)
        else:  # 如果BST为空，新加入数据作为根节点
            self.root = TreeNode(key, val)
        self.size = self.size + 1

    def _put(self, key, val, currentNode):  # put的辅助方法
        if key &lt; currentNode.key:  # 递归左子树
            if currentNode.hasLeftChild():  # 有左子树：对左子树继续递归
                self._put(key, val, currentNode.leftChild)
            else:  # 没有左子树：成为左子树(递归结束条件)
                currentNode.leftChild = TreeNode(key, val, parent=currentNode)
        else:  # 递归右子树
            if currentNode.hasRightChild():
                self._put(key, val, currentNode.RightChild)
            else:
                currentNode.RightChild = TreeNode(key, val, parent=currentNode)

    def __setitem__(self, key, value):  # 索引赋值实现如：myTree[3]=&#39;red&#39;
        self.put(key, value)

    def get(self, key):
        if self.root:
            res = self._get(key, self.root)
            if res:
                return res.payload
            else:
                return None
        else:
            return None

    def _get(self, key, currentNode):
        if not currentNode:
            return None
        elif currentNode.key == key:
            return currentNode
        elif key &lt; currentNode.key:
            return self._get(key, currentNode.leftChild)
        else:
            return self._get(key, currentNode.rightChild)

    def __getitem__(self, key):  # 索引取值myTree[3]
        return self.get(key)

    def __contains__(self, key):  # in运算符归属判断：key in map
        if self._get(key, self.root):
            return True
        else:
            return False

    def delete(self, key):
        if self.size &gt; 1:
            nodeToRemove = self._get(key, self.root)
            if nodeToRemove:
                self.remove(nodeToRemove)
                self.size = self.size - 1
            else:
                raise KeyError(&#39;Error, key not in tree&#39;)
        elif self.size == 1 and self.root.key == key:
            self.root = None
            self.size = self.size - 1
        else:
            raise KeyError(&#39;Error, key not in tree&#39;)

    def __delitem__(self, key):  # 实现del方法：del mytree[3]
        self.delete(key)

    def remove(self, currentNode):
        if currentNode.isLeaf():  # 没有子节点:直接删除,即从父节点处删除引用
            if currentNode == currentNode.parent.leftChild:
                currentNode.parent.leftChild = None
            else:
                currentNode.parent.rightChild = None
        elif not currentNode.hasBothChildren():  # 有单个子节点，将子节点上升
            if currentNode.hasLeftChild():  # 有左子节点,将子节点作为父节点的子节点
                if currentNode.isLeftChild():  # 是左子节点：将自己的左子节点上移为左子节点
                    currentNode.leftChild.parent = currentNode.parent
                    currentNode.parent.leftChild = currentNode.leftChild
                elif currentNode.isRightChild():  # 是右子节点：将自己的左子节点上移为右子节点
                    currentNode.leftChild.parent = currentNode.parent
                    currentNode.parent.rightChild = currentNode.leftChild
                else:  # 是根节点：将自己的左子节点替换为根节点,或者说将自己换为左子节点
                    currentNode.replaceNodeData(currentNode.leftChild.key, \
                                                currentNode.leftChild.payload, \
                                                currentNode.leftChild.leftChild, \
                                                currentNode.leftChild.rightChild)
            else:  # 有右子节点
                if currentNode.isLeftChild():  # 是左子节点：将自己的右子节点上移为左子节点
                    currentNode.rightChild.parent = currentNode.parent
                    currentNode.parent.leftChild = currentNode.rightChild
                elif currentNode.isRightChild():  # 是右子节点：将自己的右子节点上移为右子节点
                    currentNode.rightChild.parent = currentNode.parent
                    currentNode.parent.rightChild = currentNode.rightChild
                else:  # 是根节点：将自己的右子节点替换为根节点,或者说将自己换为右子节点
                    currentNode.replaceNodeData(currentNode.rightChild.key, \
                                                currentNode.rightChild.payload, \
                                                currentNode.rightChild.leftChild, \
                                                currentNode.rightChild.rightChild)
        else:  # 有两个子节点：找到合适的节点来替换被删节点，它应当是：
            # 被删的节点的下一个key值节点：右子树中最小的一个
            # 后继的节点要么是叶节点，要么仅有右子树（右子树中没有比它小的：即没有左子树）
            succ = currentNode.findSuccessor()  # 找到后继节点
            succ.spliceOut()  # 摘出此节点
            currentNode.key = succ.key  # 替换
            currentNode.payload = succ.payload


class TreeNode:
    def __init__(self, key, val, left=None, \
                 right=None, parent=None):
        self.key = key
        self.payload = val
        self.leftChild = left
        self.rightChild = right
        self.parent = parent

    def hasLeftChild(self):
        return self.leftChild

    def hasRightChild(self):
        return self.rightChild

    def isLeftChild(self):
        return self.parent and \
               self.parent.leftChild == self

    def isRightChild(self):
        return self.parent and \
               self.parent.rightChild == self

    def isRoot(self):
        return not self.parent

    def isLeaf(self):
        return not (self.rightChild or self.leftChild)

    def hasAnyChildren(self):
        return self.rightChild or self.leftChild

    def hasBothChildren(self):
        return self.rightChild and self.leftChild

    def replaceNodeData(self, key, value, lc, rc):
        self.key = key
        self.payload = value
        self.leftChild = lc
        self.rightChild = rc
        if self.hasLeftChild():
            self.leftChild.parent = self
        if self.hasRightChild():
            self.rightChild.parent = self

    def __iter__(self):
        if self:
            if self.hasLeftChild():
                for elem in self.leftChild:  # 迭代器的递归调用
                    yield elem
            yield self.key
            if self.hasRightChild():
                for elem in self.rightChild:
                    yield elem

    def findSuccessor(self):  # 找后继节点，通用算法
        succ = None
        if self.hasRightChild():  # 找后继节点：有右子树
            succ = self.rightChild.findMin()
        else:  # 找后继节点，无右子树
            if self.parent:
                if self.isLeftChild():
                    succ = self.parent
                else:
                    self.parent.rightChild = None
                    succ = self.parent.findSuccessor()
                    self.parent.rightChild = self
        return succ

    def findMin(self):
        current = self
        while current.hasLeftChild():
            current = current.leftChild
        return current

    def spliceOut(self):  # 摘除节点，通用算法
        if self.isLeaf():  # 摘出叶节点
            if self.isLeftChild():
                self.parent.leftChild = None
            else:
                self.parent.rightChild = None
        elif self.hasAnyChildren():  # 有子树
            if self.hasLeftChild():  # 有左子树
                if self.isLeftChild():
                    self.parent.leftChild = self.leftChild
                else:
                    self.parent.rightChild = self.leftChild
                self.leftChild.parent = self.parent
            else:  # 有右子树
                if self.isLeftChild():
                    self.parent.leftChild = self.rightChild
                else:
                    self.parent.rightChild = self.rightChild
                self.rightChild.parent = self.parent
</code></pre>
<h4 id='二叉查找树算法分析'>二叉查找树：算法分析</h4>
<p>二叉查找树的性能的决定因素在于二叉搜索树的<strong>高度（最大层次）</strong>，而其高度又受数据项key插入<strong>顺序</strong>的影响。</p>
<p><strong>如果key的列表是随机分布的话，那么大于根节点和小于根节点key的键值大致相等</strong></p>
<p>此时BST的高度就是log2n（n是节点的个数），而且，这样的树就是平衡树，put算法最差的性能就是O(log2n)</p>
<p>但key列表分布极端情况就完全不同：按照从小到大顺序插入的话，put方法的性能即为O(n)</p>
<h3 id='平衡二叉查找树以avl树为例）'>平衡二叉查找树（以AVL树为例）</h3>
<h4 id='avl树的定义'>AVL树的定义</h4>
<p>AVL树的实现中，需要对每个节点跟踪“平衡因子balance factor”参数</p>
<p>平衡因子是根据节点的左右子树的高度来定义的，确切的说，是<strong>左右子树的高度差</strong></p>
<p>如果平衡因子<strong>大于0称为左重left-heavy，小于0称为右重right-heavy，等于0称为平衡</strong></p>
<p>如果一个二叉树中每个节点的平衡因子都在-1,0,1之间，则把这个二叉查找树称为<strong>平衡树</strong></p>
<p>在平衡树操作的过程中，有节点的平衡因子超出此范围，则需要一个重新平衡的过程</p>
<h4 id='avl树的分析'>AVL树的分析</h4>
<p>我们来分析AVL树<strong>最差情形</strong>下的性能：即平衡因子为1或者-1</p>
<p>如果一个“左重”AVL树的非叶节点的平衡因子只可取1，问题规模（总节点数N）和比对次数（树的高度h）之间的关系是：</p>
<figure><table>
<thead>
<tr><th>h</th><th>1</th><th>2</th><th>3</th><th>4</th></tr></thead>
<tbody><tr><td>N</td><td>1</td><td>2</td><td>4</td><td>7</td></tr></tbody>
</table></figure>
<p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="22.547ex" height="2.016ex" role="img" focusable="false" viewBox="0 -683 9965.7 891" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.471ex;"><defs><path id="MJX-30-TEX-I-1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path><path id="MJX-30-TEX-I-210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path><path id="MJX-30-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-30-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-30-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-30-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-30-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D441" xlink:href="#MJX-30-TEX-I-1D441"></use></g><g data-mml-node="mi" transform="translate(836,-150) scale(0.707)"><use data-c="210E" xlink:href="#MJX-30-TEX-I-210E"></use></g></g><g data-mml-node="mo" transform="translate(1571.1,0)"><use data-c="3D" xlink:href="#MJX-30-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(2626.8,0)"><use data-c="31" xlink:href="#MJX-30-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(3349.1,0)"><use data-c="2B" xlink:href="#MJX-30-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(4349.3,0)"><g data-mml-node="mi"><use data-c="1D441" xlink:href="#MJX-30-TEX-I-1D441"></use></g><g data-mml-node="TeXAtom" transform="translate(836,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="210E" xlink:href="#MJX-30-TEX-I-210E"></use></g><g data-mml-node="mo" transform="translate(576,0)"><use data-c="2212" xlink:href="#MJX-30-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1354,0)"><use data-c="31" xlink:href="#MJX-30-TEX-N-31"></use></g></g></g><g data-mml-node="mo" transform="translate(6768.5,0)"><use data-c="2B" xlink:href="#MJX-30-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(7768.7,0)"><g data-mml-node="mi"><use data-c="1D441" xlink:href="#MJX-30-TEX-I-1D441"></use></g><g data-mml-node="TeXAtom" transform="translate(836,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="210E" xlink:href="#MJX-30-TEX-I-210E"></use></g><g data-mml-node="mo" transform="translate(576,0)"><use data-c="2212" xlink:href="#MJX-30-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1354,0)"><use data-c="32" xlink:href="#MJX-30-TEX-N-32"></use></g></g></g></g></g></svg></mjx-container><script type="math/tex">N_h=1+N_{h-1}+N_{h-2}</script>，这个通式十分接近斐波那契数列，可改写为<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="33.861ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 14966.6 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-31-TEX-I-1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path><path id="MJX-31-TEX-I-210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path><path id="MJX-31-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-31-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-31-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-31-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-31-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-31-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-31-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D441" xlink:href="#MJX-31-TEX-I-1D441"></use></g><g data-mml-node="mi" transform="translate(836,-150) scale(0.707)"><use data-c="210E" xlink:href="#MJX-31-TEX-I-210E"></use></g></g><g data-mml-node="mo" transform="translate(1515.5,0)"><use data-c="2B" xlink:href="#MJX-31-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(2515.7,0)"><use data-c="31" xlink:href="#MJX-31-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(3293.5,0)"><use data-c="3D" xlink:href="#MJX-31-TEX-N-3D"></use></g><g data-mml-node="mo" transform="translate(4349.3,0)"><use data-c="28" xlink:href="#MJX-31-TEX-N-28"></use></g><g data-mml-node="msub" transform="translate(4738.3,0)"><g data-mml-node="mi"><use data-c="1D441" xlink:href="#MJX-31-TEX-I-1D441"></use></g><g data-mml-node="TeXAtom" transform="translate(836,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="210E" xlink:href="#MJX-31-TEX-I-210E"></use></g><g data-mml-node="mo" transform="translate(576,0)"><use data-c="2212" xlink:href="#MJX-31-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1354,0)"><use data-c="31" xlink:href="#MJX-31-TEX-N-31"></use></g></g></g><g data-mml-node="mo" transform="translate(7157.5,0)"><use data-c="2B" xlink:href="#MJX-31-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(8157.7,0)"><use data-c="31" xlink:href="#MJX-31-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(8657.7,0)"><use data-c="29" xlink:href="#MJX-31-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(9268.9,0)"><use data-c="2B" xlink:href="#MJX-31-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(10269.2,0)"><use data-c="28" xlink:href="#MJX-31-TEX-N-28"></use></g><g data-mml-node="msub" transform="translate(10658.2,0)"><g data-mml-node="mi"><use data-c="1D441" xlink:href="#MJX-31-TEX-I-1D441"></use></g><g data-mml-node="TeXAtom" transform="translate(836,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="210E" xlink:href="#MJX-31-TEX-I-210E"></use></g><g data-mml-node="mo" transform="translate(576,0)"><use data-c="2212" xlink:href="#MJX-31-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1354,0)"><use data-c="32" xlink:href="#MJX-31-TEX-N-32"></use></g></g></g><g data-mml-node="mo" transform="translate(13077.4,0)"><use data-c="2B" xlink:href="#MJX-31-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(14077.6,0)"><use data-c="31" xlink:href="#MJX-31-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(14577.6,0)"><use data-c="29" xlink:href="#MJX-31-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">N_h+1=(N_{h-1}+1)+(N_{h-2}+1)</script></p>
<p>根据计算得到<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="14.001ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6188.5 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-32-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-32-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-32-TEX-I-210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path><path id="MJX-32-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-32-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-32-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-32-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-32-TEX-N-67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z"></path><path id="MJX-32-TEX-N-2061" d=""></path><path id="MJX-32-TEX-I-1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-32-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-32-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(1152,0)"><use data-c="210E" xlink:href="#MJX-32-TEX-I-210E"></use></g><g data-mml-node="mo" transform="translate(1728,0)"><use data-c="29" xlink:href="#MJX-32-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(2394.8,0)"><use data-c="3D" xlink:href="#MJX-32-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(3450.6,0)"><use data-c="6C" xlink:href="#MJX-32-TEX-N-6C"></use><use data-c="6F" xlink:href="#MJX-32-TEX-N-6F" transform="translate(278,0)"></use><use data-c="67" xlink:href="#MJX-32-TEX-N-67" transform="translate(778,0)"></use></g><g data-mml-node="mo" transform="translate(4728.6,0)"><use data-c="2061" xlink:href="#MJX-32-TEX-N-2061"></use></g><g data-mml-node="msub" transform="translate(4895.2,0)"><g data-mml-node="mi"><use data-c="1D441" xlink:href="#MJX-32-TEX-I-1D441"></use></g><g data-mml-node="mi" transform="translate(836,-150) scale(0.707)"><use data-c="210E" xlink:href="#MJX-32-TEX-I-210E"></use></g></g></g></g></svg></mjx-container><script type="math/tex">O(h)=\log N_h</script>,可以说AVL树的搜索时间复杂度是O(logN)</p>
<h4 id='avl树的python实现'>AVL树的python实现</h4>
<p>向AVL树中插入一个新key，如何才能保持AVL树的平衡性质？</p>
<p>首先，作为BST的改进，AVL树插入的节点必定是以叶节点的形式插入</p>
<p>叶节点的平衡因子始终是0，本身无需重平衡，但是它会影响其父节点的平衡因子</p>
<p>如果作为左子节点插入，则父子节点的平衡因子会增加1，作为右子节点插入，父子节点的平衡因子会减少1，且这种影响会随着其父节点到根节点的路径一直传递下去，直到：1.传递到根节点；2.某个父节点从非0被调节到0，不再影响上层节点的平衡因子。</p>
<h5 id='put方法'>_put方法</h5>
<pre><code class='language-python' lang='python'>    def _put(self, key, val, currentNode):
        if key &lt; currentNode.key:
            if currentNode.hasLeftChild():
                self._put(key, val, currentNode.leftChild)
            else:
                currentNode.leftChild = TreeNode(key, val, parent=currentNode)
                self.updateBalance(currentNode.leftChild) #重新平衡：调整平衡因子+重新平衡
        else:
            if currentNode.hasRightChild():
                self._put(key, val, currentNode.RightChild)
            else:
                currentNode.RightChild = TreeNode(key, val, parent=currentNode)
                self.updateBalance(currentNode.rightChild) #重新平衡：调整平衡因子+重新平衡

    def updateBalance(self, node):
        if node.balanceFactor &gt; 1 or node.balanceFactor &lt; -1: #节点平衡因子超出可控范围，重新平衡
            self.rebalance(node)
            return
        if node.parent != None:  # 调节父节点因子
            if node.isLeftChild():
                node.parent.balanceFactor += 1
            elif node.isRightChild():
                node.parent.balanceFactor -= 1

            if node.parent.balanceFactor != 0:
                self.updateBalance(node.parent)
</code></pre>
<h5 id='rebalance重新平衡方法'>rebalance重新平衡方法</h5>
<p>主要手段：将不平衡的子树进行<strong>旋转rotation</strong></p>
<p>视左重和右重两种情况进行不同的旋转，同时更新相关父节点引用，更新旋转后被影响节点的平衡因子</p>
<p>以左旋转为例：将右子节点B提升为子树的根，将旧根节点A作为新根节点B的左子节点，如果新根节点B原来有左子节点C，则将此子节点设置为A的右子节点（原来B所在的位置）</p>
<pre><code class='language-python' lang='python'>    def rotateLeft(self, rotRoot):
        newRoot = rotRoot.rightChild  # 调整根节点
        # 将新根节点的左子节点移动到原根节点的右子节点
        rotRoot.rightChild = newRoot.leftChild
        if newRoot.leftChild != None:
            newRoot.leftChild.parent = rotRoot
        newRoot.parent = rotRoot.parent
        # 维护树中此子树与其父节点的关系
        if rotRoot.isRoot():
            self.root = newRoot
        else:
            if rotRoot.isLeftChild():
                rotRoot.parent.leftChild = newRoot
            else:
                rotRoot.parent.rightChild = newRoot
        # 将原根节点作为新根节点的左子节点（携带新根节点原来的左子节点，如果有的话）
        newRoot.leftChild = rotRoot
        rotRoot.parent = newRoot
        # 调整平衡因子，这里只需调整两个节点，具体的调整方案可以自己画图理解
        rotRoot.balanceFactor = rotRoot.balanceFactor + \
                                1 - min(newRoot.balanceFactor, 0)
        newRoot.balanceFactor = newRoot.balanceFactor + \
                                1 + max(rotRoot.balanceFactor, 0)

    def rotateRight(self, rotRoot):
        newRoot = rotRoot.leftChild
        rotRoot.leftChild = newRoot.rightChild
        if newRoot.rightChild != None:
            newRoot.rightChild.parent = rotRoot
        newRoot.parent = rotRoot.parent
        if rotRoot.isRoot():
            self.root = newRoot
        else:
            if rotRoot.isRightChild():
                rotRoot.parent.rightChild = newRoot
            else:
                rotRoot.parent.leftChild = newRoot
        newRoot.rightChild = rotRoot
        rotRoot.parent = newRoot
        rotRoot.balanceFactor = rotRoot.balanceFactor + \
                                1 - min(newRoot.balanceFactor, 0)
        newRoot.balanceFactor = newRoot.balanceFactor + \
                                1 + max(rotRoot.balanceFactor, 0)
</code></pre>
<p>但是，为了防止如下情形：直接左旋和右旋将导致这样的树在左右重间变化而无法解决问题</p>
<p><img title="" src="img/截屏2022-05-15 19.41.44.png" alt="截屏2022-05-15 19.41.44" style="zoom:30%;" width="233"><img title="" src="img/截屏2022-05-15 19.43.24.png" alt="截屏2022-05-15 19.43.24" style="zoom:30%;" width="271"></p>
<p>在左旋之前要先检查右子节点的因子，如果右子节点左重的话，要先对它右旋</p>
<p>在右旋之前要先检查左子节点的因子，如果左子节点右重的话，要先对它左旋</p>
<pre><code class='language-python' lang='python'>    def rebalance(self, node):
        if node.balanceFactor &lt; 0:
            if node.rightChild.balanceFactor &gt; 0:  # 检查右子节点是否需要右旋
                self.rotateRight(node.rightChild)
            self.rotateLeft(node)
        else:
            if node.leftChild.balanceFactor &lt; 0:  # 检查左子节点是否需要左旋
                self.rotateLeft(node.leftChild)
            self.rotateRight(node)
</code></pre>
<h4 id='avl树的实现结语'>AVL树的实现：结语</h4>
<p>经过了复杂的put方法，AVL树始终维持平衡，get方法也始终保持O(log n)高性能</p>
<p>对put方法的更新，加入的旋转算法与问题的规模无关，是常数O(1)，所以整个put方法的时间复杂度还是O(log n)</p>
<h3 id='树结构小结'>树结构小结</h3>
<p>本章主要算法：</p>
<ol start='' >
<li>用于表达式求值和解析的<strong>二叉树</strong></li>
<li>用于实现ADT map的<strong>二叉查找树BST树</strong></li>
<li>改进性能的<strong>平衡二叉查找树AVL树</strong></li>
<li>实现了“最小堆”的完全二叉树：<strong>二叉堆</strong></li>

</ol>
<h4 id='adt-map的实现方法小结'>ADT-map的实现方法小结</h4>
<figure><table>
<thead>
<tr><th>&nbsp;</th><th>有序表</th><th>散列表</th><th>二叉查找树</th><th>AVL树</th></tr></thead>
<tbody><tr><td>put</td><td>O(n)</td><td>O(1) -&gt; O(n)</td><td>O(log2 n) -&gt; O(n)</td><td>O(log2 n)</td></tr><tr><td>get</td><td>O(log2 n)</td><td>O(1) -&gt; O(n)</td><td>O(log2 n) -&gt; O(n)</td><td>O(log2 n)</td></tr><tr><td>in</td><td>O(log2 n)</td><td>O(1) -&gt; O(n)</td><td>O(log2 n) -&gt; O(n)</td><td>O(log2 n)</td></tr><tr><td>del</td><td>O(n)</td><td>O(1) -&gt; O(n)</td><td>O(log2 n) -&gt; O(n)</td><td>O(log2 n)</td></tr></tbody>
</table></figure>
<h2 id='图'>图</h2>
<h3 id='图graph的概念'>图Graph的概念</h3>
<p>图Graph是比树更为一般的结构，也是由节点和边组成（实际上树也是一种具有特殊性质的图）。</p>
<p>图可以用来表示现实世界中很多事物，如道路交通等。</p>
<p><strong>图G可以定义为G=(V,E)，其中V是顶点的集合，E是边的集合，E中的每条边e=(v,w)，其中v,w都是V中的顶点。</strong></p>
<p>子图：V,E的子集</p>
<p>有向图：边有方向性</p>
<p>赋权图：边上有赋权</p>
<p>路径：图中的路径，是由边依次连接起来的顶点序列</p>
<p>路径的长度：无权路径的长度为边的数量，带权路径的长度为所有边的权重之和</p>
<p>圈Cycle：首尾顶点相同的路径（如果图中不存在圈：有向图DAG）</p>
<h3 id='图抽象数据类型adt-graph'>图抽象数据类型ADT Graph</h3>
<p>需要实现的方法如下</p>
<pre><code class='language-python' lang='python'>Graph() #创建空图
addVertex(vert) #将顶点vert加入到图中
addEdge(fromVert,toVert) #添加有向边
addEdge(fromVert,toVert,weight) #添加带权的有向边
getVertex(vKey) #查找名称为vKey的顶点
getVertices() #返回图中所有顶点的列表
in # 按照vert in graph的语句形式，返回顶点是否存在图中的bool值
</code></pre>
<p>ADT Graph的实现主要有两种形式：</p>
<ol start='' >
<li>邻接矩阵adjacency matrix</li>
<li>邻接表adjacency list</li>

</ol>
<p>两种方法各有优劣，需要在不同应用中加以选择</p>
<h4 id='adt-graph的邻接矩阵实现'>ADT Graph的邻接矩阵实现</h4>
<p>矩阵的每行的每列都代表图中顶点，如果两个顶点之间有边相连，则设定行列值</p>
<p>无权边则将矩阵分量标注为1(有边)，或者0(无边)；带权边则将权重保存为矩阵分量值</p>
<p><strong>优点：很容易得到顶点是如何相连</strong></p>
<p><strong>缺点：如果图中边数很少，则效率低下，成为稀疏矩阵（而大多数问题对应的图都是稀疏的）</strong></p>
<h4 id='adt-graph的邻接列表实现'>ADT Graph的邻接列表实现</h4>
<p>邻接列表adjacency list可以成为稀疏图的更高效实现方案。</p>
<p>维护一个包含所有顶点的主列表（master list）</p>
<p>主列表的每个顶点，再关联一个与自身有边连接的所有顶点的列表</p>
<p><strong>优点：邻接列表的存储空间紧凑高效，很容易获得顶点所连接的所有顶点，以及连接边的信息</strong></p>
<h3 id='adt-graph的python实现'>ADT Graph的python实现</h3>
<h4 id='实例'>实例</h4>
<pre><code class='language-python' lang='python'>&gt;&gt;&gt; g= Graph()
&gt;&gt;&gt; for i in range(6):
        g.addVertex(i)


0 connectedTo: []
1 connectedTo: []
2 connectedTo: []
3 connectedTo: []
4 connectedTo: []
5 connectedTo: []
&gt;&gt;&gt; print g.vertList
{0:0 connectedTo: [],1:1 connectedTo: [],2:2 connectedTo: [],
3:3 connectedTo: [],4:4 connectedTo: [],5:5 connectedTo: []}
&gt;&gt;&gt; g.addEdge(0,1,5)
&gt;&gt;&gt; g.addEdge(0,5,2)
&gt;&gt;&gt; g.addEdge(1,2,4)
&gt;&gt;&gt; g.addEdge(2,3,9)
&gt;&gt;&gt; g.addEdge(3,4,7)
&gt;&gt;&gt; g.addEdge(3,5,3)
&gt;&gt;&gt; g.addEdge(4,0,1)
&gt;&gt;&gt; g.addEdge(5,4,8)
&gt;&gt;&gt; g.addEdge(5,2,1)
&gt;&gt;&gt; for v in g:
        for w in v.getConnections():
            print &quot;(%s, %s)&quot; % (v.getId(), w.getId())


(0,5)
(0,1)
(1,2)
(2,3)
(3,4)
(3,5)
(4,0)
(5,4)
(5,2)
</code></pre>
<h4 id='adt-graph的实现顶点vertex类'>ADT Graph的实现：顶点Vertex类</h4>
<p>Vertex包含了顶点信息，以及顶点连接边信息</p>
<pre><code class='language-python' lang='python'>class Vertex:
    def __init__(self, key):
        self.id = key
        self.connectedTo = {}

    def addNeighbor(self, nbr, weight=0):  # nbr是顶点对象
        self.connectedTo[nbr] = weight

    def __str__(self):
        return str(self.id) + &#39; connectedTo: &#39; \
               + str([x.id for x in self.connectedTo])

    __repr__ = __str__

    def getConnections(self):
        return self.connectedTo.keys()

    def getId(self):
        return self.id

    def getWeight(self, nbr):
        return self.connectedTo[nbr]
</code></pre>
<h4 id='adt-graph的实现图graph类'>ADT Graph的实现：图Graph类</h4>
<p>Graph保存了包含所有顶点的主表</p>
<pre><code class='language-python' lang='python'>class Graph:
    def __init__(self):
        self.vertList = {}
        self.numVertices = 0

    def addVertex(self, key):  # 新加顶点
        self.numVertices = self.numVertices + 1
        newVertex = Vertex(key)
        self.vertList[key] = newVertex
        return newVertex

    def getVertex(self, n):  # 搜索顶点
        if n in self.vertList:
            return self.vertList[n]
        else:
            return None

    def __contains__(self, n):
        return n in self.vertList

    def addEdge(self, f, t, cost):  # 加入边：如果边中有不存在的顶点需先添加
        if f not in self.vertList:
            self.addVertex(f)
        if t not in self.vertList:
            self.addVertex(t)
        self.vertList[f].addNeighbor(self.vertList[t], cost)

    def getVertices(self):  # 返回所有顶点的key
        return self.vertList.keys()

    def __iter__(self):  # 可迭代
        return iter(self.vertList.values())
</code></pre>
<h3 id='图的应用词梯word-ladder问题单词关系图构建）'>图的应用：词梯Word Ladder问题（单词关系图构建）</h3>
<p>目标是找到<strong>最短</strong>的单词变换序列</p>
<p><strong>采用图来解决这个问题的步骤如下：</strong></p>
<ol start='' >
<li>将可能的单词之间的<strong>演变关系</strong>表达为图</li>
<li>采用“广度优先搜索BFS”，来搜寻从开始单词到结束单词之间的所有有效路径</li>
<li>选择其中最快到达目标单词的路径</li>

</ol>
<h4 id='词梯问题构建单词关系图'>词梯问题：构建单词关系图</h4>
<ol start='' >
<li>将大量的单词集放置在图中（将单词作为顶点的标识Key，如果两个单词之间仅相差1个字母，就在它们之间设一条边）</li>
<li>采用边没有权重的无向图：图中的每条路径都是一个词梯的解</li>

</ol>
<p><strong>单词关系图可以通过不同的算法来构建（以四个字母的单词表为例）</strong></p>
<ol start='' >
<li>将所有单词作为顶点加入图中，再设法建立顶点之间的边</li>
<li>建立边的最直接算法，是对每个顶点（单词），与其他所有单词进行比较，如果相差仅1个字母，则建立一条边（这样，时间复杂度为<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="5.832ex" height="2.452ex" role="img" focusable="false" viewBox="0 -833.9 2577.6 1083.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-33-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-33-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-33-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-33-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-33-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-33-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-33-TEX-N-28"></use></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-33-TEX-I-1D45B"></use></g><g data-mml-node="mn" transform="translate(633,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-33-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(2188.6,0)"><use data-c="29" xlink:href="#MJX-33-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(n^2)</script>，对于四个字母的5110个单词，需要超过2600万次的比较）</li>

</ol>
<p><strong>改进算法是创建大量的桶</strong></p>
<ol start='' >
<li>每个桶通过通配符放置满足条件的若干单词，桶标记是去掉1个字母，通配符“_”占空的单词</li>
<li>对每个桶，所有匹配标记的单词都放到这个桶里</li>
<li>所有单词就位后，再在同一个桶的单词之间建立边即可（同一个桶中所有单词只差一个字母）</li>

</ol>
<pre><code class='language-python' lang='python'>def buildGraph(wordFile):
    d = {}
    g = Graph()
    wfile = open(wordFile, &#39;r&#39;)
    # create buckets of words that differ by one letter
    for line in wfile:
        word = line[:-1]
        for i in range(len(word)):
            bucket = word[:i] + &#39;_&#39; + word[i + 1:]
            if bucket in d:
                d[bucket].append(word)
            else:
                d[bucket] = [word]

    # add vertices and edges for words in the same bucket
    for bucket in d.keys():
        for word1 in d[bucket]:
            for word2 in d[bucket]:
                if word1 != word2:
                    g.addEdge(word1, word2)
    return g
</code></pre>
<p><strong>讨论：统计发现，如果采用邻接矩阵表示这个单词关系图，则需要2600万个矩阵单元（这也是前面第一种构造单词关系图的思路来源），但单词关系图总计有53286条边，仅仅达到矩阵单元数量的0.2%</strong></p>
<h3 id='广度优先搜索bfs的实现以词梯问题序列寻找为例'>广度优先搜索BFS的实现：以词梯问题序列寻找为例</h3>
<p><strong>广度优先搜索Breadth First Search</strong></p>
<ol start='' >
<li>给定<strong>图G</strong>，以及开始搜索的<strong>起始顶点s</strong></li>
<li>BFS搜索所有从s可到达顶点的边，而且在达到更远的距离k+1的顶点之前，BFS必然会找到全部距离为k的顶点</li>

</ol>
<p>对于搜索过程：可以想象为以s为根，构建一棵树的过程，从顶点向下逐步增加层次</p>
<p>广度优先搜索能保证在增加层次之前，添加了所有兄弟节点到树中</p>
<p><strong>细节：为了跟踪顶点的加入过程，并避免重复顶点，要为顶点增加3个属性</strong></p>
<ol start='' >
<li>距离distance：从起始顶点到此顶点<strong>路径长度</strong></li>
<li>前驱顶点predecessor：可<strong>反向追溯</strong>到起点</li>
<li>颜色color：标识该顶点是<strong>尚未发现（白色）、已经发现（灰色）、已经完成探索（黑色）</strong></li>

</ol>
<p>还要用一个队列Queue来对已发现的顶点进行排列：决定下一个要探索的顶点（逐个处理队首顶点）</p>
<h4 id='bfs算法过程'>BFS算法过程</h4>
<p>从起始顶点s开始，作为刚发现的顶点，标注为灰色，距离为0，前驱为None，加入队列，接下来是个循环迭代过程：</p>
<ol start='' >
<li>从队首取出一个顶点作为当前顶点</li>
<li>遍历当前顶点的邻接顶点，如果是尚未发现的白色顶点，则将其颜色改为灰色（已发现），距离增加1，前驱顶点为当前顶点，加入到队列中</li>
<li>遍历完成后，将当前顶点设置为黑色（已探索过），循环回到步骤1的队首取当前顶点</li>

</ol>
<h4 id='bfs算法实例运行词梯问题'>BFS算法实例运行：词梯问题</h4>
<pre><code class='language-python' lang='python'>def bfs(g, start):
    start.setDistance(0)
    start.setPred(None)
    vertQueue = Queue()
    vertQueue.enqueue(start)
    while (vertQueue.size() &gt; 0):
        currentVert = vertQueue.dequeue()
        for nbr in currentVert.getConnections():
            if (nbr.getcolor() == &#39;white&#39;):
                nbr.setColor(&#39;gray&#39;)
                nbr.setDistance(currentVert.getDistance() + 1)
                nbr.setPred(currentVert)
                vertQueue.enqueue(nbr)
        currentVert.setColor(&#39;black&#39;)
</code></pre>
<p>在以FOOL为起始顶点，遍历了所有顶点，并为每个顶点着色、赋距离和前驱之后</p>
<p>即可以通过一个回途追溯函数来确定FOOL到任意单词顶点的最短词梯</p>
<pre><code class='language-python' lang='python'>def traverse(y):
    x = y
    while (x.getPred()):
        print(x.getId())
        x = x.getPred()
    print(x.getId())
</code></pre>
<pre><code class='language-python' lang='python'>wordgraph = buildGraph(&#39;fourletterwords.txt&#39;)
bfs(wordgraph,wordgraph.getVertex(&#39;FOOL&#39;))
traverse(wordgraph.getVertex(&#39;SAGE&#39;))
</code></pre>
<h4 id='bfs算法分析'>BFS算法分析</h4>
<p><strong>BFS算法主体是两个循环的嵌套</strong></p>
<p>while循环对每个顶点访问一次，所以是<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.484ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2866 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-54-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-54-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-54-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-54-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-54-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-54-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-54-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1152,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-54-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(1430,0)"><use data-c="1D449" xlink:href="#MJX-54-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(2199,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-54-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(2477,0)"><use data-c="29" xlink:href="#MJX-54-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(|V|)</script></p>
<p>嵌套在while循环中的for循环，由于每条边只会在其起始顶点u出队时才会被检查一次，而每个顶点最多出队一次，所以边的总计检查次数为<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.473ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2861 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-49-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-49-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-49-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-49-TEX-I-1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path><path id="MJX-49-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-49-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-49-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1152,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-49-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(1430,0)"><use data-c="1D438" xlink:href="#MJX-49-TEX-I-1D438"></use></g><g data-mml-node="mo" transform="translate(2194,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-49-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(2472,0)"><use data-c="29" xlink:href="#MJX-49-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(|E|)</script></p>
<p>综上，BFS的时间复杂度为<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="12.236ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 5408.4 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-50-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-50-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-50-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-50-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-50-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-50-TEX-I-1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path><path id="MJX-50-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-50-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-50-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1152,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-50-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(1430,0)"><use data-c="1D449" xlink:href="#MJX-50-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(2199,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-50-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(2699.2,0)"><use data-c="2B" xlink:href="#MJX-50-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(3699.4,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-50-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(3977.4,0)"><use data-c="1D438" xlink:href="#MJX-50-TEX-I-1D438"></use></g><g data-mml-node="mo" transform="translate(4741.4,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-50-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(5019.4,0)"><use data-c="29" xlink:href="#MJX-50-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(|V|+|E|)</script></p>
<p><strong>对于词梯问题：还包括以下两个算法</strong></p>
<p>创建单词关系图也需要时间，最多是<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="7.472ex" height="2.452ex" role="img" focusable="false" viewBox="0 -833.9 3302.6 1083.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-37-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-37-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-37-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-37-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-37-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-37-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-37-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-37-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1152,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-37-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(1430,0)"><use data-c="1D449" xlink:href="#MJX-37-TEX-I-1D449"></use></g><g data-mml-node="msup" transform="translate(2199,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-37-TEX-N-7C"></use></g><g data-mml-node="mn" transform="translate(311,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-37-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(2913.6,0)"><use data-c="29" xlink:href="#MJX-37-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(|V|^2)</script></p>
<p>建立BFS树后，回溯顶点到起始顶点的过程，最多为<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.484ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2866 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-54-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-54-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-54-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-54-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-54-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-54-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-54-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1152,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-54-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(1430,0)"><use data-c="1D449" xlink:href="#MJX-54-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(2199,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-54-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(2477,0)"><use data-c="29" xlink:href="#MJX-54-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(|V|)</script></p>
<h3 id='图的应用骑士周游问题'>图的应用：骑士周游问题</h3>
<p>在一个国际象棋棋盘上，一个棋子“马”，按照“马走日”的规则，从一个棋子出发，要走遍所有的棋盘格<strong>恰好一次</strong>，把这样的一个走棋序列称为一次“周游”</p>
<p>在<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="5.028ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 2222.4 688" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.05ex;"><defs><path id="MJX-47-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-47-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="38" xlink:href="#MJX-47-TEX-N-38"></use></g><g data-mml-node="mo" transform="translate(722.2,0)"><use data-c="D7" xlink:href="#MJX-47-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(1722.4,0)"><use data-c="38" xlink:href="#MJX-47-TEX-N-38"></use></g></g></g></svg></mjx-container><script type="math/tex">8\times8</script>的国际象棋棋盘上，合格的“周游“数量有<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="11.97ex" height="2.005ex" role="img" focusable="false" viewBox="0 -864 5290.6 886" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.05ex;"><defs><path id="MJX-40-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-40-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-40-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-40-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-40-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-40-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-40-TEX-N-31"></use><use data-c="2E" xlink:href="#MJX-40-TEX-N-2E" transform="translate(500,0)"></use><use data-c="33" xlink:href="#MJX-40-TEX-N-33" transform="translate(778,0)"></use><use data-c="30" xlink:href="#MJX-40-TEX-N-30" transform="translate(1278,0)"></use><use data-c="35" xlink:href="#MJX-40-TEX-N-35" transform="translate(1778,0)"></use></g><g data-mml-node="mo" transform="translate(2500.2,0)"><use data-c="D7" xlink:href="#MJX-40-TEX-N-D7"></use></g><g data-mml-node="msup" transform="translate(3500.4,0)"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-40-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-40-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="TeXAtom" transform="translate(1033,393.1) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-40-TEX-N-33"></use><use data-c="35" xlink:href="#MJX-40-TEX-N-35" transform="translate(500,0)"></use></g></g></g></g></g></svg></mjx-container><script type="math/tex">1.305\times10^{35}</script>这么多，失败的周游就更多了</p>
<p>采用图搜索算法，是解决骑士周游问题最容易理解和编程的方案之一</p>
<p>问题的解决分两步：</p>
<ol start='' >
<li>将合法走棋次序表示为一个图</li>
<li>采用图搜索算法搜寻一个长度为<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="10.634ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 4700 950" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.452ex;"><defs><path id="MJX-41-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-41-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-41-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">行</text></g><g data-mml-node="mo" transform="translate(1099.8,0)"><use data-c="D7" xlink:href="#MJX-41-TEX-N-D7"></use></g><g data-mml-node="mtext" transform="translate(2100,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">列</text></g><g data-mml-node="mo" transform="translate(3199.8,0)"><use data-c="2212" xlink:href="#MJX-41-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(4200,0)"><use data-c="31" xlink:href="#MJX-41-TEX-N-31"></use></g></g></g></svg></mjx-container><script type="math/tex">行\times列-1</script>的路径，路径上包含每个顶点恰一次</li>

</ol>
<h4 id='合法走棋函数'>合法走棋函数</h4>
<pre><code class='language-python' lang='python'>def genLegalMoves(x, y, bdSize): # 马可走的位置列表
    newMoves = []
    moveOffsets = [(-1, -2), (-1, 2), (-2, -1), (-2, 1), \
                   (1, -2), (1, 2), (2, -1), (2, 1)]
    for i in moveOffsets:
        newX = x + i[0]
        newY = y + i[1]
        if legalCoord(newX, bdSize) and legalCoord(newY, bdSize):
            newMoves.append((newX, newY))
    return newMoves


def legalCoord(x, bdSize): # 确认不会走出棋盘
    if x &gt;= 0 and x &lt; bdSize:
        return True
    else:
        return False
</code></pre>
<h4 id='构建走棋关系图'>构建走棋关系图</h4>
<pre><code class='language-python' lang='python'>def knightGraph(bdSize):
    ktGraph = Graph()
    for row in range(bdSize):
        for col in range(bdSize):
            nodeId = posToNodeId(row, col, bdSize)
            newPositions = genLegalMoves(row, col, bdSize)
            for e in newPositions:
                nid = posToNodeId(e[0], e[1], bdSize)
                ktGraph.addEdge(nodeId, nid)
    return ktGraph


def posToNodeId(row, col, bdSize):
    return row * bdSize + col
</code></pre>
<p>对于一个<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="5.028ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 2222.4 688" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.05ex;"><defs><path id="MJX-47-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-47-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="38" xlink:href="#MJX-47-TEX-N-38"></use></g><g data-mml-node="mo" transform="translate(722.2,0)"><use data-c="D7" xlink:href="#MJX-47-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(1722.4,0)"><use data-c="38" xlink:href="#MJX-47-TEX-N-38"></use></g></g></g></svg></mjx-container><script type="math/tex">8\times8</script>的棋盘生成的图，具有336条边，相比于全连接的4096条边，仅<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.776ex" height="1.824ex" role="img" focusable="false" viewBox="0 -750 2111 806" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.127ex;"><defs><path id="MJX-43-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-43-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-43-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-43-TEX-N-25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="38" xlink:href="#MJX-43-TEX-N-38"></use><use data-c="2E" xlink:href="#MJX-43-TEX-N-2E" transform="translate(500,0)"></use><use data-c="32" xlink:href="#MJX-43-TEX-N-32" transform="translate(778,0)"></use></g><g data-mml-node="mi" transform="translate(1278,0)"><use data-c="25" xlink:href="#MJX-43-TEX-N-25"></use></g></g></g></svg></mjx-container><script type="math/tex">8.2\%</script>，还是稀疏图</p>
<h3 id='深度优先搜索dfs的实现以骑士周游问题算法为例'>深度优先搜索DFS的实现：以骑士周游问题算法为例</h3>
<p><strong>深度优先搜索DFS</strong>：沿着树的单支尽量深入向下搜索，如果到无法继续的程度还未找到问题解，就回溯上一层再搜索下一支</p>
<p>下面介绍两个DFS算法</p>
<h4 id='骑士周游问题dfs算法每个顶点仅被访问一次'>骑士周游问题DFS算法：每个顶点仅被访问一次</h4>
<p><strong>思路：</strong>如果沿着单支深入搜索到无法继续（所有合法移动都已经被走过了）时，路径长度还没有达到预定值，则清除颜色标记，返回上一层，换一个分支继续深入搜索</p>
<p>引入一个栈记录路径，并实施返回上一层的回溯操作</p>
<pre><code class='language-python' lang='python'>def knightTour(n, path, u, limit):
    # n: 层次；path：路径；u：当前顶点；limit：搜索总深度
    u.setColor(&#39;gray&#39;) # 标记本顶点已走过
    path.append(u)  # 当前顶点加入路径
    if n &lt; limit:
        nbrList = list(u.getConnections())  # 对所有合法移动逐一深入
        i = 0
        done = False
        while i &lt; len(nbrList) and not done:
            if nbrList[i].getColor() == &#39;white&#39;:  # 选择白色未经过的顶点深入
                done = knightTour(n + 1, path, nbrList[i], limit)
            i = i + 1
        if not done:  # 都无法完成总深度，回溯试本层下一个顶点
            path.pop()
            u.setColor(&#39;white&#39;)
    else:
        done = True
    return done
</code></pre>
<h4 id='骑士周游问题算法分析和改进warnsdorff算法'>骑士周游问题算法分析和改进Warnsdorff算法</h4>
<p>上述算法的性能高度依赖于棋盘大小（<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="5.028ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 2222.4 688" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.05ex;"><defs><path id="MJX-44-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-44-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="35" xlink:href="#MJX-44-TEX-N-35"></use></g><g data-mml-node="mo" transform="translate(722.2,0)"><use data-c="D7" xlink:href="#MJX-44-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(1722.4,0)"><use data-c="35" xlink:href="#MJX-44-TEX-N-35"></use></g></g></g></svg></mjx-container><script type="math/tex">5\times5</script>棋盘，约1.5s可以得到一个周游路径；而<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="5.028ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 2222.4 688" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.05ex;"><defs><path id="MJX-47-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-47-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="38" xlink:href="#MJX-47-TEX-N-38"></use></g><g data-mml-node="mo" transform="translate(722.2,0)"><use data-c="D7" xlink:href="#MJX-47-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(1722.4,0)"><use data-c="38" xlink:href="#MJX-47-TEX-N-38"></use></g></g></g></svg></mjx-container><script type="math/tex">8\times8</script>棋盘要半个小时以上才能得到一个解）</p>
<p>目前实现的算法，其复杂度为<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="5.813ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2569.3 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-46-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-46-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-46-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path><path id="MJX-46-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-46-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-46-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-46-TEX-N-28"></use></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><use data-c="1D458" xlink:href="#MJX-46-TEX-I-1D458"></use></g><g data-mml-node="mi" transform="translate(554,363) scale(0.707)"><use data-c="1D45B" xlink:href="#MJX-46-TEX-I-1D45B"></use></g></g><g data-mml-node="mo" transform="translate(2180.3,0)"><use data-c="29" xlink:href="#MJX-46-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(k^n)</script>，其中n是棋盘格树木，这是一个指数时间复杂度的代码。其搜索过程表现为一个层次为n的树</p>
<p><strong>幸运的是，即使是指数时间复杂度的算法也可以在实际性能上加以大幅度改进（Warnsdorff算法）</strong></p>
<p>对nbrList的灵巧构造，以特定方式排列顶点访问次序，可以使<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="5.028ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 2222.4 688" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.05ex;"><defs><path id="MJX-47-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-47-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="38" xlink:href="#MJX-47-TEX-N-38"></use></g><g data-mml-node="mo" transform="translate(722.2,0)"><use data-c="D7" xlink:href="#MJX-47-TEX-N-D7"></use></g><g data-mml-node="mn" transform="translate(1722.4,0)"><use data-c="38" xlink:href="#MJX-47-TEX-N-38"></use></g></g></g></svg></mjx-container><script type="math/tex">8\times8</script>棋盘的<strong>第一个周游路径</strong>搜索时间降低到秒级</p>
<p>初始算法中nbrList，直接以原始顺序来确定深度优先搜索的分支次序</p>
<p>新的算法，仅修改了遍历下一格的次序：将u的合法移动目标棋盘格排序为，具有最少合法移动目标的格子优先搜索</p>
<pre><code class='language-python' lang='python'>def orderByAvail(n):
    resList = []
    for v in n.getConnections():
        if v.getColor() == &#39;white&#39;:
            c = 0
            for w in v.getConnections():
                if w.getColor() == &#39;white&#39;:
                    c = c + 1
            resList.append([c, v])
    resList.sort(key=lambda x: x[0])
    return [y[1] for y in resList]
</code></pre>
<p>采用先验的知识来改进算法性能的做法，称作“<strong>启发式规则heuristic</strong>”</p>
<p>启发式规则经常用于人工智能领域</p>
<p>可以有效减少搜索范围、更快达到目标等等</p>
<p>如棋类程序算法，会预先存入棋谱、布阵口诀、高手习惯等“启发式规则”，能够在最短时间内从海量的棋局落子点搜索树中定位最佳落子</p>
<h4 id='通用dfs算法允许顶点被重复访问'>通用DFS算法：允许顶点被重复访问</h4>
<p>骑士周游问题是一种特殊的对图进行深度优先搜索</p>
<p>其目的是建立一个没有分支的最深的深度优先树，表现为一条线性的包含所有节点的退化树</p>
<p><strong>一般的深度优先搜索目标是在图上进行尽量深的搜索，连接了尽量多的顶点，必要时可以进行分支（创建了树）</strong></p>
<p>深度优先搜索同样要用到<strong>顶点的“前驱”属性</strong>，来构建树或者森林</p>
<p>另外要<strong>设置“发现时间”和“结束时间”属性</strong>：各标志访问到节点（设置灰色）和完成搜索（设置黑色）的时间</p>
<p><strong>将带有DFS算法的图实现为Graph的子类</strong></p>
<p>顶点Vertex增加了属性Discovery和Finish</p>
<p>图Graph增加了属性time用于记录算法执行的步骤数目</p>
<pre><code class='language-python' lang='python'>from pythonds.graphs import Graph


class DFSGraph(Graph):
    def __init__(self):
        super().__init__()
        self.time = 0

    def dfs(self):
        for aVertex in self:
            aVertex.setColor(&#39;white&#39;)  # 颜色初始化
            aVertex.setPred(-1)
        for aVertex in self:  # 建立树或者森林
            if aVertex.getColor() == &#39;white&#39;:
                self.dfsvisit(aVertex)

    def dfsvisit(self, startVertex):
        startVertex.setColor(&#39;gray&#39;)
        self.time += 1  # 算法的步数
        startVertex.setDiscovery(self.time)
        for nextVertex in startVertex.getConnections():  # 深度优先递归访问
            if nextVertex.getColor() == &#39;white&#39;:
                nextVertex.setPred(startVertex)
                self.dfsvisit(nextVertex)
        startVertex.setColor(&#39;black&#39;)
        self.time += 1
        startVertex.setFinish(self.time)
</code></pre>
<p>注意：BFS采用队列存储待访问顶点，DFS则通过递归隐式地使用了栈</p>
<h4 id='通用的深度优先搜索算法分析'>通用的深度优先搜索算法分析</h4>
<p><strong>DFS构建的树，其顶点“发现时间”和“结束时间”属性，具有类似括号的性质</strong></p>
<p>即一个顶点的“发现时间”总小于所有子顶点的“发现时间”，“结束时间”总大于所有子顶点的“结束时间”。即父顶点总比子顶点更早被发现，更晚结束搜索。</p>
<p><strong>DFS的运行时间同样包括两方面：</strong></p>
<p>dfs函数中有两个循环，每个都是|V|次，所以是<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.484ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2866 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-54-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-54-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-54-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-54-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-54-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-54-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-54-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1152,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-54-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(1430,0)"><use data-c="1D449" xlink:href="#MJX-54-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(2199,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-54-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(2477,0)"><use data-c="29" xlink:href="#MJX-54-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(|V|)</script></p>
<p>dfsvisit函数中进行的循环只会对每条边运行一次，且某些边不会用到，整体来说是<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.473ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2861 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-49-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-49-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-49-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-49-TEX-I-1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path><path id="MJX-49-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-49-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-49-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1152,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-49-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(1430,0)"><use data-c="1D438" xlink:href="#MJX-49-TEX-I-1D438"></use></g><g data-mml-node="mo" transform="translate(2194,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-49-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(2472,0)"><use data-c="29" xlink:href="#MJX-49-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(|E|)</script></p>
<p>加起来就是和BFS一样的<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="12.236ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 5408.4 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-50-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-50-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-50-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-50-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-50-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-50-TEX-I-1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path><path id="MJX-50-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-50-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-50-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1152,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-50-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(1430,0)"><use data-c="1D449" xlink:href="#MJX-50-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(2199,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-50-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(2699.2,0)"><use data-c="2B" xlink:href="#MJX-50-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(3699.4,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-50-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(3977.4,0)"><use data-c="1D438" xlink:href="#MJX-50-TEX-I-1D438"></use></g><g data-mml-node="mo" transform="translate(4741.4,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-50-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(5019.4,0)"><use data-c="29" xlink:href="#MJX-50-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(|V|+|E|)</script></p>
<h3 id='图的应用拓扑排序topological-sort'>图的应用：拓扑排序Topological Sort</h3>
<p>从工作流程图得到工作次序排列的算法，称为“拓扑排序”</p>
<p>拓扑排序处理一个DAG，输出顶点的线性序列，且满足条件：使得两个顶点v,w，如果G中有(v,w)边，在线性序列中v就出现在w之前。</p>
<p>拓扑排序广泛应用在<strong>依赖事件的排期</strong>上，还可以用在项目管理、数据库查询优化和矩阵乘法的次序优化上。</p>
<p>拓扑排序可以用DFS很好地实现：</p>
<ol start='' >
<li>将工作流程建立为图，工作项是节点，依赖关系是有效边</li>
<li>工作流程一定是一个DAG图，否则有循环依赖</li>
<li>对DAG图调用DFS算法，以得到每个顶点的“结束时间”</li>
<li>按照每个顶点的“结束时间”从大到小排序</li>
<li>输出这个次序下的顶点列表</li>

</ol>
<h3 id='图的应用强连通分支'>图的应用：强连通分支</h3>
<p>在图中发现<strong>高度聚集节点群</strong>的算法，即寻找“强连通分支Strongly Connected Components”算法</p>
<p>强连通分支，定义为图G的一个子集C</p>
<ol start='' >
<li>C中的任意两个顶点v,w之间都有<strong>路径来回</strong>，即(v,w),(w,v)都是C的路径</li>
<li>C是具有这样性质的最大子集</li>

</ol>
<p>一旦找到强连通分支，就可以据此对图的顶点进行分类，并对图进行化简</p>
<h4 id='强连通分支算法转置transposition'>强连通分支算法：转置Transposition</h4>
<p>一个有向图的转置<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="3.092ex" height="1.954ex" role="img" focusable="false" viewBox="0 -841.7 1366.8 863.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.05ex;"><defs><path id="MJX-53-TEX-I-1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path><path id="MJX-53-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><use data-c="1D43A" xlink:href="#MJX-53-TEX-I-1D43A"></use></g><g data-mml-node="mi" transform="translate(819,363) scale(0.707)"><use data-c="1D447" xlink:href="#MJX-53-TEX-I-1D447"></use></g></g></g></g></svg></mjx-container><script type="math/tex">G^T</script>，定义为将图G的所有边的顶点交换次序，如将(v,w)转换为(w,v)</p>
<p>可以观察到图和转置图在强连通分支的数量和划分上是相同的</p>
<h4 id='强连通分支算法kosaraju算法思路'>强连通分支算法：Kosaraju算法思路</h4>
<ol start='' >
<li>对图G调用DFS算法，为每个顶点计算<strong>结束时间</strong></li>
<li>对图G进行转置，得到<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="3.092ex" height="1.954ex" role="img" focusable="false" viewBox="0 -841.7 1366.8 863.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.05ex;"><defs><path id="MJX-53-TEX-I-1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path><path id="MJX-53-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><use data-c="1D43A" xlink:href="#MJX-53-TEX-I-1D43A"></use></g><g data-mml-node="mi" transform="translate(819,363) scale(0.707)"><use data-c="1D447" xlink:href="#MJX-53-TEX-I-1D447"></use></g></g></g></g></svg></mjx-container><script type="math/tex">G^T</script></li>
<li>对<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="3.092ex" height="1.954ex" role="img" focusable="false" viewBox="0 -841.7 1366.8 863.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.05ex;"><defs><path id="MJX-53-TEX-I-1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path><path id="MJX-53-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><use data-c="1D43A" xlink:href="#MJX-53-TEX-I-1D43A"></use></g><g data-mml-node="mi" transform="translate(819,363) scale(0.707)"><use data-c="1D447" xlink:href="#MJX-53-TEX-I-1D447"></use></g></g></g></g></svg></mjx-container><script type="math/tex">G^T</script>调用DFS算法，但在dfs函数中，要以顶点的<strong>结束时间倒序</strong>来搜索</li>
<li>最后，深度搜索森林中的每一棵树就是一个强连通分支</li>

</ol>
<h3 id='图的应用最短路径问题'>图的应用：最短路径问题</h3>
<p>可以将互联网路由器体系表示为一个带权边的图</p>
<p>解决信息在路由器网络中选择传播速度最快路径对问题，就转变为在<strong>带权图上最短路径</strong>的问题</p>
<p>这个问题与广度优先搜索BFS算法解决的词梯问题相似，只是在边上增加了权重</p>
<h4 id='最短路径问题dijkstra算法'>最短路径问题：Dijkstra算法</h4>
<p>解决带权最短路径问题的经典算法是Dijkstra算法</p>
<p>这是一个迭代算法，得出一个从一个顶点到其余所有顶点的最短路径，很接近于广度优先搜索算法BFS的结果</p>
<p>u具体实现上，在顶点Vertex类的成员dist用于记录从开始顶点到本顶点的最短带权路径长度（权重之和），算法对图中的每个顶点迭代一次</p>
<ol start='' >
<li>顶点的访问次序由一个<strong>优先队列</strong>来控制，队列中作为优先级的是顶点的dist属性</li>
<li>最初，只有开始顶点dist设为0，而其他所有顶点dist设为sys.maxsize(最大整数)，全部加入到优先队列</li>
<li>随着队列中每个邻接顶点的权重，会引起其他顶点dist的减少和修改，引起堆重排</li>
<li>据更新后的dist优先级再依次出队</li>

</ol>
<pre><code class='language-python' lang='python'>from pythonds.graphs import PriorityQueue, Graph, Vertex
def dijkstra(aGraph,start):
    pq = PriorityQueue()
    start.setDistance(0)
    #建堆，形成优先队列
    pq.buildHeap([(v.getDistance(),v) for v in aGraph])
    while not pq.isEmpty():
        currentVert = pq.delMin() #优先队列出队
        for nextVert in currentVert.getConnections():
            #修改邻接顶点的dist，并逐个重排队列
            newDist = currentVert.getDistance() \
                      + currentVert.getWeight(nextVert)
            if newDist &lt; nextVert.getDistance():
                nextVert.setDistance(newDist)
                nextVert.setPred(currentVert)
                pq.decreaseKey(nextVert,newDist)
</code></pre>
<p>需要注意的是，Dijkstra算法只能处理大于0的权重，如果图中出现负数权重，则算法会陷入无限循环</p>
<h4 id='讨论实际算法'>讨论：实际算法</h4>
<p>虽然Dijkstra算法完美解决了带权图的最短路径问题，但实际上Internet的路由器中采用的是其他算法</p>
<p>其中最重要的原因是，Dijkstra算法需要具备整个图的数据，但对于internet的路由器来说，显然无法将整个Internet所有路由器及其连接信息保存在本地（同时Internet也是一个动态变化的系统）</p>
<p>路由器的选径算法，采用“距离向量路由算法”</p>
<h4 id='dijkstra算法分析'>Dijkstra算法分析</h4>
<ol start='' >
<li>将所有顶点加入优先队列并建堆，时间复杂度为<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.484ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2866 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-54-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-54-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-54-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-54-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-54-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-54-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-54-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1152,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-54-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(1430,0)"><use data-c="1D449" xlink:href="#MJX-54-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(2199,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-54-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(2477,0)"><use data-c="29" xlink:href="#MJX-54-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(|V|)</script></li>
<li>每个顶点仅出队一次，每次delMin花费<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="9.753ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 4310.7 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-57-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-57-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-57-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-57-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-57-TEX-N-67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z"></path><path id="MJX-57-TEX-N-2061" d=""></path><path id="MJX-57-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-57-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-57-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-57-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-57-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(1152,0)"><use data-c="6C" xlink:href="#MJX-57-TEX-N-6C"></use><use data-c="6F" xlink:href="#MJX-57-TEX-N-6F" transform="translate(278,0)"></use><use data-c="67" xlink:href="#MJX-57-TEX-N-67" transform="translate(778,0)"></use></g><g data-mml-node="mo" transform="translate(2430,0)"><use data-c="2061" xlink:href="#MJX-57-TEX-N-2061"></use></g><g data-mml-node="mo" transform="translate(2596.7,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-57-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(2874.7,0)"><use data-c="1D449" xlink:href="#MJX-57-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(3643.7,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-57-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(3921.7,0)"><use data-c="29" xlink:href="#MJX-57-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(\log|V|)</script>，一共<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="13.127ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 5802.3 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-56-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-56-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-56-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-56-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-56-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-56-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-56-TEX-N-67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z"></path><path id="MJX-56-TEX-N-2061" d=""></path><path id="MJX-56-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-56-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-56-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1152,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-56-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(1430,0)"><use data-c="1D449" xlink:href="#MJX-56-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(2199,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-56-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(2643.7,0)"><use data-c="6C" xlink:href="#MJX-56-TEX-N-6C"></use><use data-c="6F" xlink:href="#MJX-56-TEX-N-6F" transform="translate(278,0)"></use><use data-c="67" xlink:href="#MJX-56-TEX-N-67" transform="translate(778,0)"></use></g><g data-mml-node="mo" transform="translate(3921.7,0)"><use data-c="2061" xlink:href="#MJX-56-TEX-N-2061"></use></g><g data-mml-node="mo" transform="translate(4088.3,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-56-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(4366.3,0)"><use data-c="1D449" xlink:href="#MJX-56-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(5135.3,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-56-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(5413.3,0)"><use data-c="29" xlink:href="#MJX-56-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(|V|\log|V|)</script></li>
<li>每个边关联到的顶点会做一次decreaseKey操作<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="9.753ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 4310.7 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-57-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-57-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-57-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-57-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-57-TEX-N-67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z"></path><path id="MJX-57-TEX-N-2061" d=""></path><path id="MJX-57-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-57-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-57-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-57-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-57-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(1152,0)"><use data-c="6C" xlink:href="#MJX-57-TEX-N-6C"></use><use data-c="6F" xlink:href="#MJX-57-TEX-N-6F" transform="translate(278,0)"></use><use data-c="67" xlink:href="#MJX-57-TEX-N-67" transform="translate(778,0)"></use></g><g data-mml-node="mo" transform="translate(2430,0)"><use data-c="2061" xlink:href="#MJX-57-TEX-N-2061"></use></g><g data-mml-node="mo" transform="translate(2596.7,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-57-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(2874.7,0)"><use data-c="1D449" xlink:href="#MJX-57-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(3643.7,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-57-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(3921.7,0)"><use data-c="29" xlink:href="#MJX-57-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(\log|V|)</script>，一共是<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="13.116ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 5797.3 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-58-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-58-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-58-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-58-TEX-I-1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path><path id="MJX-58-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-58-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-58-TEX-N-67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z"></path><path id="MJX-58-TEX-N-2061" d=""></path><path id="MJX-58-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-58-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-58-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-58-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1152,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-58-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(1430,0)"><use data-c="1D438" xlink:href="#MJX-58-TEX-I-1D438"></use></g><g data-mml-node="mo" transform="translate(2194,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-58-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(2638.7,0)"><use data-c="6C" xlink:href="#MJX-58-TEX-N-6C"></use><use data-c="6F" xlink:href="#MJX-58-TEX-N-6F" transform="translate(278,0)"></use><use data-c="67" xlink:href="#MJX-58-TEX-N-67" transform="translate(778,0)"></use></g><g data-mml-node="mo" transform="translate(3916.7,0)"><use data-c="2061" xlink:href="#MJX-58-TEX-N-2061"></use></g><g data-mml-node="mo" transform="translate(4083.3,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-58-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(4361.3,0)"><use data-c="1D449" xlink:href="#MJX-58-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(5130.3,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-58-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(5408.3,0)"><use data-c="29" xlink:href="#MJX-58-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O(|E|\log|V|)</script></li>
<li>于是，总的时间复杂度数量级就是<mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="20.64ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 9122.8 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-59-TEX-I-1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path><path id="MJX-59-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-59-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-59-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path><path id="MJX-59-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-59-TEX-I-1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path><path id="MJX-59-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-59-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-59-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-59-TEX-N-67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z"></path><path id="MJX-59-TEX-N-2061" d=""></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D442" xlink:href="#MJX-59-TEX-I-1D442"></use></g><g data-mml-node="mo" transform="translate(763,0)"><use data-c="28" xlink:href="#MJX-59-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1152,0)"><use data-c="28" xlink:href="#MJX-59-TEX-N-28"></use></g><g data-mml-node="mo" transform="translate(1541,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-59-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(1819,0)"><use data-c="1D449" xlink:href="#MJX-59-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(2588,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-59-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(3088.2,0)"><use data-c="2B" xlink:href="#MJX-59-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(4088.4,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-59-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(4366.4,0)"><use data-c="1D438" xlink:href="#MJX-59-TEX-I-1D438"></use></g><g data-mml-node="mo" transform="translate(5130.4,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-59-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(5408.4,0)"><use data-c="29" xlink:href="#MJX-59-TEX-N-29"></use></g><g data-mml-node="mi" transform="translate(5964.1,0)"><use data-c="6C" xlink:href="#MJX-59-TEX-N-6C"></use><use data-c="6F" xlink:href="#MJX-59-TEX-N-6F" transform="translate(278,0)"></use><use data-c="67" xlink:href="#MJX-59-TEX-N-67" transform="translate(778,0)"></use></g><g data-mml-node="mo" transform="translate(7242.1,0)"><use data-c="2061" xlink:href="#MJX-59-TEX-N-2061"></use></g><g data-mml-node="mo" transform="translate(7408.8,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-59-TEX-N-7C"></use></g><g data-mml-node="mi" transform="translate(7686.8,0)"><use data-c="1D449" xlink:href="#MJX-59-TEX-I-1D449"></use></g><g data-mml-node="mo" transform="translate(8455.8,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-59-TEX-N-7C"></use></g><g data-mml-node="mo" transform="translate(8733.8,0)"><use data-c="29" xlink:href="#MJX-59-TEX-N-29"></use></g></g></g></svg></mjx-container><script type="math/tex">O((|V|+|E|)\log|V|)</script></li>

</ol>
<h3 id='图的应用最小生成树'>图的应用：最小生成树</h3>
<p>信息广播问题：网游需要让所有玩家获知其他玩家所在的位置，收音机则需要让所有听众获取直播的音频数据。</p>
<p>A. 信息广播问题最简单的解法是由广播源维护一个收听者的列表，将每条信息向每个收听者发送一次，每条消息都采用最短路径算法到达收听者。单波解法会产生许多额外流量，因为在路径上的节点会转发多次相同信息</p>
<p>B. 信息广播问题的暴力解法，是将每条信息在路由器之间散布出去。所有的路由器都将收到的信息转发到自己相邻的路由器和收听者。这样很多路由器将会收到重复消息，甚至可能永不停止（存在环）。所以洪水解法一般会给每条消息附加一个生命值<strong>TTL</strong>，设置为从信息源到最远的收听者的距离，并在传播中减少。但是这样显然比前述的单波解法产生更大的流量。</p>
<h4 id='信息广播问题最小生成树'>信息广播问题：最小生成树</h4>
<p>信息广播问题的最优解法，依赖于路由器关系图上选取具有<strong>最小权重的生成树</strong>（minimun weight spanning tree）</p>
<p>生成树：拥有图中所有顶点和最少数量的边，以保持连通的子图</p>
<p>图G(V,E)的最小生成树T，定义为：包含所有顶点V，以及E的无圈子集，并且边权重之和最小</p>
<p>这样，信息广播就只需要从A开始，沿着树的路径层次向下传播，就可以达到每个路由器只需要处理一次信息，同时总费用最小。</p>
<h4 id='最小生成树prim算法'>最小生成树：Prim算法</h4>
<p>解决最小生成树问题的Prim算法，属于“<strong>贪心算法</strong>”，即每步都沿着最小权重的边向前搜索。</p>
<p>构造最小生成树的思路很简单：如果T还不是生成树，则反复做：找到一条最小权重的可以安全添加的边，将边添加到树T</p>
<p>“可以安全添加“的边，定义为一端顶点在树中，另一端不在树中的边，以便保持树的无圈特性</p>
<pre><code class='language-python' lang='python'>from pythonds.graphs import PriorityQueue, Graph, Vertex
import sys

def Prim(G, start):
    pq = PriorityQueue()
    for v in G:
        v.setDistance(sys.maxsize)
        v.setPred(None)
    start.setDistance(0)
    pq.buildHeap([(v.getDistance(), v) for v in G])
    while not pq.isEmpty():
        currentVert = pq.delMin()
        for mextVert in currentVert.getConnections():
            nextVert.setPred(currentVert)
            nextVert.setDistance(newCost)
            pq.decreaseKey(nextVert, newCost)
</code></pre>
<p>&nbsp;</p>
</body>
</html>